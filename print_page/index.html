
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://ibm-wsc.github.io/ConfidentialComputingOnLinuxONE/print_page/">
      
      
      
      <link rel="icon" href="../images/HPVS2.1.xGraphic.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.11">
    
    
      
        <title>Print Site - Confidential Computing LinuxONE Workshop</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0d440cfe.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
    <script>__md_scope=new URL("/ConfidentialComputingOnLinuxONE/",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-GYNTJ48K9Y"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-GYNTJ48K9Y",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-GYNTJ48K9Y",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
  

    
    
    
  
        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();generate_toc();
        })
        </script>
        </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="yellow">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Confidential Computing LinuxONE Workshop" class="md-header__button md-logo" aria-label="Confidential Computing LinuxONE Workshop" data-md-component="logo">
      
  <img src="../images/HPVS2.1.xGraphic.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Confidential Computing LinuxONE Workshop
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Print Site
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="yellow"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="yellow"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ibm-wsc/ConfidentialComputingOnLinuxONE" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../assignments.md" class="md-tabs__link">
      Lab Assignment
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../lab/" class="md-tabs__link">
        Lab
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../localdocbuild/" class="md-tabs__link">
      Locally Building docs
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="./" class="md-tabs__link">
      Print Site
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Confidential Computing LinuxONE Workshop" class="md-nav__button md-logo" aria-label="Confidential Computing LinuxONE Workshop" data-md-component="logo">
      
  <img src="../images/HPVS2.1.xGraphic.png" alt="logo">

    </a>
    Confidential Computing LinuxONE Workshop
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ibm-wsc/ConfidentialComputingOnLinuxONE" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../assignments.md" class="md-nav__link">
        Lab Assignment
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../lab/">Lab</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Lab
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lab/launchKVMguest/" class="md-nav__link">
        Launch Ubuntu KVM guest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lab/configureRsyslog/" class="md-nav__link">
        Configure rsyslog on your KVM guest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lab/configureRsyslogForGREP11/" class="md-nav__link">
        Configure rsyslog client certs on the RHEL host
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lab/createGREP11Contract/" class="md-nav__link">
        Create Contract for GREP11 Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lab/launchGREP11guest/" class="md-nav__link">
        Launch GREP11 Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lab/configureGrep11TestClient/" class="md-nav__link">
        Run GREP11 Client code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lab/hackMeIfYouCan/" class="md-nav__link">
        Standard guest vs. SE-enabled HPVS 2.1.x guest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lab/labCleanup/" class="md-nav__link">
        Lab Cleanup
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../localdocbuild/" class="md-nav__link">
        Locally Building docs
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Print Site
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Print Site
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#" class="md-nav__link">
    1. Home
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-lab" class="md-nav__link">
    I. Lab
  </a>
  
    <nav class="md-nav" aria-label="I. Lab">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lab" class="md-nav__link">
    2. Lab Overview
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lab-launchkvmguest" class="md-nav__link">
    3. Launch Ubuntu KVM guest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lab-configurersyslog" class="md-nav__link">
    4. Configure rsyslog on your KVM guest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lab-configurersyslogforgrep11" class="md-nav__link">
    5. Configure rsyslog client certs on the RHEL host
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lab-creategrep11contract" class="md-nav__link">
    6. Create Contract for GREP11 Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lab-launchgrep11guest" class="md-nav__link">
    7. Launch GREP11 Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lab-configuregrep11testclient" class="md-nav__link">
    8. Run GREP11 Client code
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lab-hackmeifyoucan" class="md-nav__link">
    9. Standard guest vs. SE-enabled HPVS 2.1.x guest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lab-labcleanup" class="md-nav__link">
    10. Lab Cleanup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#localdocbuild" class="md-nav__link">
    11. Locally Building docs
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#" class="md-nav__link">
    1. Home
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-lab" class="md-nav__link">
    I. Lab
  </a>
  
    <nav class="md-nav" aria-label="I. Lab">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lab" class="md-nav__link">
    2. Lab Overview
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lab-launchkvmguest" class="md-nav__link">
    3. Launch Ubuntu KVM guest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lab-configurersyslog" class="md-nav__link">
    4. Configure rsyslog on your KVM guest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lab-configurersyslogforgrep11" class="md-nav__link">
    5. Configure rsyslog client certs on the RHEL host
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lab-creategrep11contract" class="md-nav__link">
    6. Create Contract for GREP11 Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lab-launchgrep11guest" class="md-nav__link">
    7. Launch GREP11 Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lab-configuregrep11testclient" class="md-nav__link">
    8. Run GREP11 Client code
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lab-hackmeifyoucan" class="md-nav__link">
    9. Standard guest vs. SE-enabled HPVS 2.1.x guest
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lab-labcleanup" class="md-nav__link">
    10. Lab Cleanup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#localdocbuild" class="md-nav__link">
    11. Locally Building docs
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Print Site</h1>

<div id="print-site-page" class="print-site-enumerate-headings print-site-enumerate-figures">
        <section class="print-page">
            <div id="print-page-toc" data-toc-depth="3">
                <nav role='navigation' class='print-page-toc-nav'>
                <h1 class='print-page-toc-title'>Table of Contents</h1>
                </nav>
            </div>
        </section>
        <section class="print-page" id="index"><h1 id="index-confidential-computing-linuxone-workshop"><abbr title="Confidential computing is a cloud computing technology that isolates sensitive data in a protected CPU enclave during processing. The contents of the enclave—the data being processed, and the techniques that are used to process it—are accessible only to authorized programming code, and are invisible and unknowable to anything or anyone else, including the cloud provider.">Confidential Computing</abbr> LinuxONE Workshop<a class="headerlink" href="#index-confidential-computing-linuxone-workshop" title="Permanent link">&para;</a></h1>
<p>Welcome to our <abbr title="Confidential computing is a cloud computing technology that isolates sensitive data in a protected CPU enclave during processing. The contents of the enclave—the data being processed, and the techniques that are used to process it—are accessible only to authorized programming code, and are invisible and unknowable to anything or anyone else, including the cloud provider.">Confidential Computing</abbr> LinuxONE workshop. Organizations can leverage secure execution to protect Linux® workloads on IBM zSystems and LinuxONE. This workshop will cover how to get started with this technology on-premises using Hyper Protect Virtual Servers 2.1.x.</p>
<h2 id="index-agenda">Agenda<a class="headerlink" href="#index-agenda" title="Permanent link">&para;</a></h2>
<h3 id="index-introductory-presentations">Introductory Presentations<a class="headerlink" href="#index-introductory-presentations" title="Permanent link">&para;</a></h3>
<ul>
<li>Introduction to Hyper Protect Virtual Servers 2.1.x</li>
</ul>
<h3 id="index-lab-build-and-deploy-a-grep11-server-using-hyper-protect-virtual-servers-21x">Lab: Build and Deploy a <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server Using Hyper Protect Virtual Servers 2.1.x<a class="headerlink" href="#index-lab-build-and-deploy-a-grep11-server-using-hyper-protect-virtual-servers-21x" title="Permanent link">&para;</a></h3>
<p>In this lab, you will deploy a Hyper Protect Virtual Servers 2.1.x <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> instance and connect to it to secure your transactions. <sup id="fnref:1"><a class="footnote-ref" href="#index-fn:1">1</a></sup></p>
<h2 id="index-workshop-authors">Workshop authors<a class="headerlink" href="#index-workshop-authors" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="mailto:silliman@us.ibm.com">Barry Silliman</a></li>
<li><a href="mailto:garrett.lee.woodworth@ibm.com">Garrett Woodworth</a></li>
</ul>
<div class="footnote">
<hr />
<ol>
<li id="index-fn:1">
<p>For the purposes of this lab, you are fulfilling the requirements of a fictional organization. These requirements could change for your specific organization but would follow a similar pattern with different specifics.&#160;<a class="footnote-backref" href="#index-fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div></section>
                        <h1 class='nav-section-title' id='section-lab'>
                            Lab <a class='headerlink' href='#section-lab' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="lab"><h1 id="lab-lab-overview">Lab Overview<a class="headerlink" href="#lab-lab-overview" title="Permanent link">&para;</a></h1>
<h2 id="lab-lab-environment-topology">Lab environment topology<a class="headerlink" href="#lab-lab-environment-topology" title="Permanent link">&para;</a></h2>
<figure>
<p><img alt="Overview Picture" src="../images/LinuxONEConfidentialComputing.svg" />
  </p>
<figcaption>Confidential Computing Lab Architecture</figcaption>
</figure>
<p>Hyper Protect Virtual Servers 2.1.3 provides an IBM-provided and -supported <abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr>-enabled KVM image that runs on a Linux LPAR on an IBM zSystems or LinuxONE server. </p>
<p>Hyper Protect Virtual Servers allows you to specify your workload via a "contract" that you define. </p>
<p>Within the contract you specify an <abbr title="Open Container Initiative: an open governance structure for the express purpose of creating open industry standards around container formats and runtimes. There are 3 specifications: the Runtime Specification (runtime-spec), the Image Specification (image-spec) and the Distribution Specification (distribution-spec)">OCI</abbr>-compliant image that provides your workload.</p>
<p>For our lab this LPAR is running <abbr title="Red Hat Enterprise Linux">RHEL</abbr> 8.5.  You can use any distribution on IBM zSystems or LinuxONE that supports <abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr>- i.e., recent versions of Ubuntu and SUSE as well as <abbr title="Red Hat Enterprise Linux">RHEL</abbr>.</p>
<p>The Hyper Protect Virtual Servers 2.1.3 product provides a component, Crypto Express Network API for <abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr> Enclaves (<abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr>) 1.1.1.3, that runs as an appliance in a <abbr title="a type of LPAR introduced by IBM with the z14 hardware generation.  Hyper Protect Virtual Servers v1.x was built on SSC technology, and the Crypto Express Network API for Secure Execution Enclaves component of HPVS v2.x is also built on SSC technology.">Secure Service Container</abbr> (<abbr title="Secure Service Container- a type of LPAR introduced by IBM with the z14 hardware generation.  Hyper Protect Virtual Servers v1.x was built on SSC technology, and the Crypto Express Network API for Secure Execution Enclaves component of HPVS v2.x is also built on SSC technology.">SSC</abbr>) LPAR that has direct-attached Crypto Express cards.  <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> also provides a <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server <abbr title="Open Container Initiative: an open governance structure for the express purpose of creating open industry standards around container formats and runtimes. There are 3 specifications: the Runtime Specification (runtime-spec), the Image Specification (image-spec) and the Distribution Specification (distribution-spec)">OCI</abbr> image that communicates with the <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> appliance. </p>
<p>This enables <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> client code written to call the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server API to  access the Crypto Express cards on the <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> <abbr title="Secure Service Container- a type of LPAR introduced by IBM with the z14 hardware generation.  Hyper Protect Virtual Servers v1.x was built on SSC technology, and the Crypto Express Network API for Secure Execution Enclaves component of HPVS v2.x is also built on SSC technology.">SSC</abbr> LPAR.
The <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> client code can run from anywhere as long as it has network connectivity to the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server.  The <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server can run anywhere as long as it has network connectivity to the <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> server.</p>
<p>For our lab, The <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> client code will run in a KVM guest running Ubuntu 22.04 within our <abbr title="Red Hat Enterprise Linux">RHEL</abbr> 8.5 Linux LPAR. Each student will start and use their own such guest.
The <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> server will run in the same <abbr title="Red Hat Enterprise Linux">RHEL</abbr> 8.5 Linux LPAR, and it will be a <abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr>-enabled HPVS 2.1.3 KVM guest.  (All HPVS 2.1.3 guests are by definition enabled for <abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr>, so in the remainder of the lab we may not repeat the full phrase "<abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr>-enabled HPVS 2.1.3 KVM guest", but we used it here for emphasis). Each student will start and use their own such <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> server guest. </p>
<p>Your HPVS 2.1.3 <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server guest will be configured to write log messages to an <em><abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr></em> service.  For the lab, you will configure this <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> service on the same Ubuntu guest that you are using for the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> client code.</p>
<p>A single <abbr title="Secure Service Container- a type of LPAR introduced by IBM with the z14 hardware generation.  Hyper Protect Virtual Servers v1.x was built on SSC technology, and the Crypto Express Network API for Secure Execution Enclaves component of HPVS v2.x is also built on SSC technology.">SSC</abbr> LPAR is used for the <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> server. Each student's HPVS 2.1.3 <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server will communicate with the <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> server- therefore, the instructors have already set up this server for you.</p>
<p>During the lab you will log in to two servers: </p>
<ol>
<li>
<p>The <abbr title="Red Hat Enterprise Linux">RHEL</abbr> 8.5 host.  From here you will launch your Ubuntu KVM guest. You will also use your host login to define the "contract" that HPVS expects so that you can launch your HPVS 2.1.3 <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server</p>
</li>
<li>
<p>You will log in to your Ubuntu KVM guest for configuring the <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> service and for running the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> client code</p>
</li>
</ol>
<p>You will not log in directly to your HPVS 2.1.3 <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server, nor to the <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> <abbr title="Secure Service Container- a type of LPAR introduced by IBM with the z14 hardware generation.  Hyper Protect Virtual Servers v1.x was built on SSC technology, and the Crypto Express Network API for Secure Execution Enclaves component of HPVS v2.x is also built on SSC technology.">SSC</abbr> LPAR, but you will make use of them via your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Client code.</p>
<h2 id="lab-lab-logistics">Lab logistics<a class="headerlink" href="#lab-lab-logistics" title="Permanent link">&para;</a></h2>
<p>Except for the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> Jumpbox, the systems used in the lab are in the IBM Washington Systems Center (WSC) in the WSC's private network. Access to the WSC private network is through a virtual private network (VPN) client running on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> Jumpbox.  The instructors access each student's <abbr title="Red Hat Enterprise Linux">RHEL</abbr> Jumpbox in order to log in via the VPN client.  Students access their jumpbox from a web browser- other than a modern web browser, no additional software is required on the student's laptop or workstation.</p>
<p>During the lab, students will be directed to open two terminal windows on their jumpbox- one will be designated for working on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host and the other will be designated for working on their KVM standard Ubuntu guest. Two separate terminal profiles have been created on the jumpbox- one for the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host and one for the KVM standard Ubuntu guest- which have different background and text colors which will help the student more easily differentiate between the two windows.  The student may wish to use a single terminal window with two tabs- one with each terminal profile- instead of two different windows.  It is fine to do so.</p></section><section class="print-page" id="lab-launchkvmguest"><h1 id="lab-launchkvmguest-start-ubuntu-kvm-guest">Start Ubuntu KVM Guest<a class="headerlink" href="#lab-launchkvmguest-start-ubuntu-kvm-guest" title="Permanent link">&para;</a></h1>
<h2 id="lab-launchkvmguest-overview-of-this-page">Overview of this page<a class="headerlink" href="#lab-launchkvmguest-overview-of-this-page" title="Permanent link">&para;</a></h2>
<p>This page will help you verify that your jumpbox is configured properly and then guide you to logging in to the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> Host from which you will start your student-assigned KVM standard Ubuntu guest.</p>
<h2 id="lab-launchkvmguest-verify-the-student-specific-environment-variables-on-your-jumpbox">Verify the student-specific environment variables on your jumpbox<a class="headerlink" href="#lab-launchkvmguest-verify-the-student-specific-environment-variables-on-your-jumpbox" title="Permanent link">&para;</a></h2>
<p>You will first ensure that two crucial environment variables are set on your jumpbox.  Under most circumstances, the instructors will have already set these variables for you.  These variables will enable you to enter all of the commands in this lab without modification- where student-specific information is required in a command, the command will contain environment variables that will be resolved with the student-specific information. </p>
<p>Environment variables are set in three places:</p>
<ol>
<li>
<p>On your jumpbox.  In most cases, the instructors will have configured your jumpbox with your student-specific environment variables</p>
</li>
<li>
<p>You will have a userid on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host, and this userid has been configured with student-specific environment variables </p>
</li>
<li>
<p>You will have your own KVM standard guest running Ubuntu, and your guest is also configured with student-specific environment variables</p>
</li>
</ol>
<h3 id="lab-launchkvmguest-set-or-verify-the-environment-variable-on-your-jumpbox-for-your-student-id">Set or verify the environment variable on your jumpbox for your student ID<a class="headerlink" href="#lab-launchkvmguest-set-or-verify-the-environment-variable-on-your-jumpbox-for-your-student-id" title="Permanent link">&para;</a></h3>
<p>On your jumpbox, open a terminal window.  Your terminal window should have a dark background with a green prompt for the font.  You will use this window to perform work on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host, but before logging in you will ensure that an environment variable specifying your unique student ID has been set properly.</p>
<p>Each student has a unique userid assigned to them. It is likely set for you already. In an instructor-led class, your instructors will let you know if this has been set for you already.</p>
<p>Check this by entering this echo command:</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">StudentID</span><span class="si">}</span>
</code></pre></div>
<details class="- example">
<summary>Example output for <em>student02</em> [click to expand me]</summary>
<div class="highlight"><pre><span></span><code>silliman@nat-147 ~ % echo ${StudentID}
student02
</code></pre></div>
</details>
<p>If a value starting with <em>student</em> and ending with a two-digit number is returned to you, then your jumpbox has been configured properly and you may scroll down a bit to the section <strong><em>Log in to the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> 8.5 host</em></strong>. </p>
<p>If no output is returned, set this variable to the userid assigned to you by the instructor.  E.g., if the instructor assigned you the userid <code>student00</code>, enter this command:
    <div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">StudentID</span><span class="o">=</span>student00
</code></pre></div>
If you had to use the previous <code>export</code> command, repeat the prior <code>echo</code> command to ensure this was set correctly. Now, you should see your userid displayed:
    <div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">StudentID</span><span class="si">}</span>
</code></pre></div></p>
<details class="- example">
<summary>Example output [click to expand me]</summary>
<div class="highlight"><pre><span></span><code>silliman@nat-147 ~ % echo ${StudentID}         
student02
</code></pre></div>
</details>
<div class="admonition question">
<p class="admonition-title">Why did you make me do this?</p>
<p>This way we could provide instructions throughout this lab that are generic enough that every student can just copy and paste most commands "as-is" from the lab guide. (At least that was our goal).</p>
</div>
<h3 id="lab-launchkvmguest-optional-but-highly-recommended-add-your-studentid-environment-variable-to-your-shell-startup-script">Optional but highly recommended- add your StudentID environment variable to your shell startup script<a class="headerlink" href="#lab-launchkvmguest-optional-but-highly-recommended-add-your-studentid-environment-variable-to-your-shell-startup-script" title="Permanent link">&para;</a></h3>
<p><strong>Note:</strong> If your <em>StudentID</em> variable was already present then your shell startup script was already updated appropriately and you can scroll down to the section with the title <strong><em>Log in to the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> 8.5 host</em></strong></p>
<p>If we had our way in supplying a system from which you are running the lab, you are probably using <em>bash</em>.</p>
<p>If you are using your own workstation or laptop, if it is running Linux you are probably either using <em>bash</em> or you are savvy enough to figure out which shell you are running. </p>
<p>If you are running it on Apple hardware then you are probably running <em>zsh</em> or <em>bash</em> or are savvy enough to figure out which shell you are running.</p>
<p>If you are running on a Windows machine then we hope that you are using a modern enough version of Windows so that you can use the Windows Subsystem for Linux and pretend that you are using a Linux machine.</p>
<p>If you are running on an older Windows machine then you should ask your manager for a new laptop. If that doesn't work out for you then ask the instructors for help (but not for a new laptop).</p>
<p>If you are not sure what shell you're using, you can use this command to find out what your shell is:</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">SHELL</span><span class="si">}</span>
</code></pre></div>
<details class="- example">
<summary>Example output when using zsh [click to expand me]</summary>
<div class="highlight"><pre><span></span><code>silliman@nat-147 ~ % echo ${SHELL}
/bin/zsh
</code></pre></div>
</details>
<p>Garrett uses <code>bash</code> 5.x on his Mac.  Barry uses <code>zsh</code> - <code>zsh</code> being the default shell on newer versions of MacOS.
Thus, we will show two commands to add the environment variable to your shell startup script, one for <code>bash</code> and one for <code>zsh</code>.  If you are using a different shell, we trust you'll be able to figure out the equivalent command.  </p>
<div class="admonition warning">
<p class="admonition-title">The Copy Button is Your Friend!</p>
<p>Please enter the appropriate command exactly as shown using the copy button whenever possible.  Approximately 0.47% of students think they have to make the variable substitution before entering the command.  That doesn't end well.  This advice applies generally to every command in this lab unless we explicitly state otherwise.</p>
</div>
<p>For users of <code>bash</code>:
   <div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;export StudentID=&#39;</span><span class="si">${</span><span class="nv">StudentID</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="s2">/.bashrc&quot;</span><span class="w"> </span>
</code></pre></div></p>
<p>For users of <code>zsh</code>:
   <div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;export StudentID=&#39;</span><span class="si">${</span><span class="nv">StudentID</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="s2">/.zshrc&quot;</span>
</code></pre></div></p>
<div class="admonition question">
<p class="admonition-title">Why did I just do that?</p>
<p>If you use more than one terminal window to do this lab, then this would allow new terminal windows to be set with this <em>StudentID</em> variable so that you do not have to re-enter it.  This will be handy if you either want to use multiple terminal windows for the lab or if you need to open a new window due to an old one closing for whatever reason.  We are here to make your flight as comfortable as possible.</p>
</div>
<h2 id="lab-launchkvmguest-log-in-to-the-rhel-85-host">Log in to the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> 8.5 host<a class="headerlink" href="#lab-launchkvmguest-log-in-to-the-rhel-85-host" title="Permanent link">&para;</a></h2>
<p>You will now sign into our z15 LPAR running Red Hat Enterprise Linux 8.5.  This is a system that has been enabled for <abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr> and so can run workloads provisioned with IBM Hyper Protect Virtual Servers 2.1.3.  </p>
<p>Run this command:</p>
<div class="highlight"><pre><span></span><code>ssh<span class="w"> </span>-l<span class="w"> </span><span class="si">${</span><span class="nv">StudentID</span><span class="si">}</span><span class="w"> </span><span class="m">192</span>.168.22.64
</code></pre></div>
<p>One of two things should happen:  </p>
<p>a. If you are on an instructor-provided system and the instructors have had the time to load it with an appropriate RSA private key that matches an RSA public key that has been loaded into your assigned userid's account on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host:</p>
<ul>
<li>you will be able to sign in without a password!</li>
</ul>
<p><strong>OR</strong></p>
<p>b. If you are not on an instructor-provided system or we did not have a chance to load the parts of the RSA key pair in the appropriate locations</p>
<ul>
<li>you will be prompted to enter a password.  Your instructor will provide you a password by some clandestine means, surely we're not going to put it on a page on the Internet <img alt="🤫" class="twemoji" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f92b.svg" title=":shushing_face:" />!</li>
</ul>
<details class="- example">
<summary>Example messages upon login [Click me]</summary>
<div class="highlight"><pre><span></span><code>*
*  IBM Washington Systems Center (WSC)   .....
*    IBM zSystems and LinuxONE          C C  /
*                                      /&lt;   /
*                       ___ __________/_#__=o
*                      /(- /(\_\________   \
*                      \ ) \ )_      \o     \
*                      /|\ /|\       |&#39;     |
*                                    |     _|
*  Red Hat Enterprise Linux 8.5      /o   __\
*                                   / &#39;     |
*                                  / /      |
*                                 /_/\______|
*                                (   _(    &lt;
*  KVM Hypervisor for Blockchain  \    \    \
*       and Hyper Protect          \    \    \
*       and Digital Assets          \____\____\
*    on IBM zSystems and LinuxONE ____\_\__\_\
*                                /`   /`     o\
*           &quot;It&#39;s alive!&quot;        |___ |_______|..o-o-o-(#)
*
Activate the web console with: systemctl enable --now cockpit.socket

Register this system with Red Hat Insights: insights-client --register
Create an account or view all your systems at https://red.ht/insights-dashboard
Last login: Mon Feb 13 16:50:14 2023 from 192.168.215.147
[student02@bczkvm(192.168.22.64) ~ [19:11:51] (0)]$ 
</code></pre></div>
</details>
<h2 id="lab-launchkvmguest-start-your-ubuntu-kvm-guest">Start your Ubuntu KVM guest<a class="headerlink" href="#lab-launchkvmguest-start-your-ubuntu-kvm-guest" title="Permanent link">&para;</a></h2>
<p>A KVM Guest has been defined for each student by the instructors.  This guest has the Ubuntu 22.04.2 operating system installed on it.  A very straightforward installation path was taken with no additional software packages selected during the installation. You will add additional software packages as necessary during the lab. This guest does not take advantage of the additional protection offered by <abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr> and HPVS.  It could have, but you will already be creating another KVM Guest that is protected by <abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr> and HPVS.  This also helps to make the point that you can run "standard", i.e., non-<abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr>-protected guests, and <abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr>-protected guests on the same LPAR.</p>
<p>Display your KVM guest's definition with this command:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>virsh<span class="w"> </span>dumpxml<span class="w"> </span><span class="k">$(</span>whoami<span class="k">)</span>
</code></pre></div>
<p>We named your Ubuntu KVM guest the same as your userid on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host, which is why you can use the <code>whoami</code> command.</p>
<details class="- example">
<summary>Example virsh dumpxml output [Click me]</summary>
<div class="highlight"><pre><span></span><code>&lt;domain type=&#39;kvm&#39;&gt;
  &lt;name&gt;student02&lt;/name&gt;
  &lt;uuid&gt;531199d9-3671-424e-a9c9-74ff5ca3980b&lt;/uuid&gt;
  &lt;memory unit=&#39;KiB&#39;&gt;2097152&lt;/memory&gt;
  &lt;currentMemory unit=&#39;KiB&#39;&gt;2097152&lt;/currentMemory&gt;
  &lt;vcpu placement=&#39;static&#39;&gt;2&lt;/vcpu&gt;
  &lt;os&gt;
    &lt;type arch=&#39;s390x&#39; machine=&#39;s390-ccw-virtio-rhel8.6.0&#39;&gt;hvm&lt;/type&gt;
    &lt;boot dev=&#39;hd&#39;/&gt;
  &lt;/os&gt;
  &lt;cpu mode=&#39;host-model&#39; check=&#39;partial&#39;/&gt;
  &lt;clock offset=&#39;utc&#39;/&gt;
  &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
  &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
  &lt;on_crash&gt;destroy&lt;/on_crash&gt;
  &lt;devices&gt;
    &lt;emulator&gt;/usr/libexec/qemu-kvm&lt;/emulator&gt;
    &lt;disk type=&#39;file&#39; device=&#39;disk&#39;&gt;
      &lt;driver name=&#39;qemu&#39; type=&#39;qcow2&#39;/&gt;
      &lt;source file=&#39;/var/lib/libvirt/images/hpvslab/student02/student02-ubuntu22.04.qcow2&#39;/&gt;
      &lt;target dev=&#39;vda&#39; bus=&#39;virtio&#39;/&gt;
      &lt;address type=&#39;ccw&#39; cssid=&#39;0xfe&#39; ssid=&#39;0x0&#39; devno=&#39;0x0000&#39;/&gt;
    &lt;/disk&gt;
    &lt;disk type=&#39;file&#39; device=&#39;cdrom&#39;&gt;
      &lt;driver name=&#39;qemu&#39; type=&#39;raw&#39;/&gt;
      &lt;target dev=&#39;sda&#39; bus=&#39;scsi&#39;/&gt;
      &lt;readonly/&gt;
      &lt;address type=&#39;drive&#39; controller=&#39;0&#39; bus=&#39;0&#39; target=&#39;0&#39; unit=&#39;0&#39;/&gt;
    &lt;/disk&gt;
    &lt;controller type=&#39;scsi&#39; index=&#39;0&#39; model=&#39;virtio-scsi&#39;&gt;
      &lt;address type=&#39;ccw&#39; cssid=&#39;0xfe&#39; ssid=&#39;0x0&#39; devno=&#39;0x0002&#39;/&gt;
    &lt;/controller&gt;
    &lt;controller type=&#39;pci&#39; index=&#39;0&#39; model=&#39;pci-root&#39;/&gt;
    &lt;controller type=&#39;virtio-serial&#39; index=&#39;0&#39;&gt;
      &lt;address type=&#39;ccw&#39; cssid=&#39;0xfe&#39; ssid=&#39;0x0&#39; devno=&#39;0x0003&#39;/&gt;
    &lt;/controller&gt;
    &lt;interface type=&#39;network&#39;&gt;
      &lt;mac address=&#39;52:54:00:67:e5:c1&#39;/&gt;
      &lt;source network=&#39;default&#39;/&gt;
      &lt;model type=&#39;virtio&#39;/&gt;
      &lt;address type=&#39;ccw&#39; cssid=&#39;0xfe&#39; ssid=&#39;0x0&#39; devno=&#39;0x0001&#39;/&gt;
    &lt;/interface&gt;
    &lt;console type=&#39;pty&#39;&gt;
      &lt;target type=&#39;sclp&#39; port=&#39;0&#39;/&gt;
    &lt;/console&gt;
    &lt;channel type=&#39;unix&#39;&gt;
      &lt;target type=&#39;virtio&#39; name=&#39;org.qemu.guest_agent.0&#39;/&gt;
      &lt;address type=&#39;virtio-serial&#39; controller=&#39;0&#39; bus=&#39;0&#39; port=&#39;1&#39;/&gt;
    &lt;/channel&gt;
    &lt;audio id=&#39;1&#39; type=&#39;none&#39;/&gt;
    &lt;memballoon model=&#39;virtio&#39;&gt;
      &lt;address type=&#39;ccw&#39; cssid=&#39;0xfe&#39; ssid=&#39;0x0&#39; devno=&#39;0x0004&#39;/&gt;
    &lt;/memballoon&gt;
    &lt;panic model=&#39;s390&#39;/&gt;
  &lt;/devices&gt;
&lt;/domain&gt;
</code></pre></div>
</details>
<p>Look for the your userid in the output of the <em>virsh dumpxml</em> command.  You'll see it in two places- at the top where it names your guest, and then within the filepath and filename of the <em>qcow2</em> image that provides your KVM guest.  </p>
<p>Run this command to start your Ubuntu KVM guest:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>virsh<span class="w"> </span>start<span class="w"> </span><span class="k">$(</span>whoami<span class="k">)</span>
</code></pre></div>
<details class="- example">
<summary>Expected output (for <em>student02</em>) </summary>
<div class="highlight"><pre><span></span><code>Domain &#39;student02&#39; started
</code></pre></div>
</details>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="lab-launchkvmguest-__tabbed_1_1" name="lab-launchkvmguest-__tabbed_1" type="radio" /><input id="lab-launchkvmguest-__tabbed_1_2" name="lab-launchkvmguest-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="lab-launchkvmguest-__tabbed_1_1">Your domain (i.e., your KVM guest) has started</label><label for="lab-launchkvmguest-__tabbed_1_2">Your domain didn't start for whatever reason</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="admonition success">
<p class="admonition-title">You are off to a smashing start! <img alt="🚀" class="twemoji" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f680.svg" title=":rocket:" /></p>
<p>You should now open a new window or tab using the terminal profile named <em>KVM Standard Guest</em>. From your current terminal window, click <em>File</em> on the menu bar, and then choose either <em>New Tab</em> or <em>New Window</em> based on your personal preference, but, in either case, choose the profile named <em>KVM Standard Guest</em>.  This will create a terminal tab or window with a light beige background and a gray font.  You'll be directed to use this new tab or window when doing work on your KVM Ubuntu guest and you'll be directed to use your original terminal tab or window when doing work on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host. </p>
</div>
</div>
<div class="tabbed-block">
<div class="admonition failure">
<p class="admonition-title">You have departed from the happy path... <img alt="😞" class="twemoji" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f61e.svg" title=":disappointed:" /></p>
<p>Please ask your instructor for help.</p>
</div>
</div>
</div>
</div></section><section class="print-page" id="lab-configurersyslog"><h1 id="lab-configurersyslog-configure-rsyslog-service">Configure <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> service<a class="headerlink" href="#lab-configurersyslog-configure-rsyslog-service" title="Permanent link">&para;</a></h1>
<h2 id="lab-configurersyslog-overview-of-this-page">Overview of this page<a class="headerlink" href="#lab-configurersyslog-overview-of-this-page" title="Permanent link">&para;</a></h2>
<p>The HPVS 2.1.3-protected <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server that you will create later in the lab will log its output to an <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> service on the Ubuntu KVM guest that you just started in the previous section. Rsyslog on your Ubuntu KVM guest is currently not set up for this, so you will configure <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> in this section of the lab.</p>
<div class="admonition note">
<p class="admonition-title">Logging to IBM Log Analysis on IBM Cloud</p>
<p>You can also log the output of an HPVS 2.1.3 guest to an <a href="https://cloud.ibm.com/catalog/services/logdna" rel="noopener" target="_blank">IBM Log Analysis instance on IBM Cloud</a>.  That is not covered in this lab but if you are interested in this, it is covered in the <a href="https://www.ibm.com/docs/en/hpvs/2.1.x?topic=servers-logging-hyper-protect-virtual" rel="noopener" target="_blank">product documentation</a>.</p>
</div>
<h2 id="lab-configurersyslog-log-in-to-your-ubuntu-kvm-guest">Log in to your Ubuntu KVM guest<a class="headerlink" href="#lab-configurersyslog-log-in-to-your-ubuntu-kvm-guest" title="Permanent link">&para;</a></h2>
<div class="admonition question">
<p class="admonition-title">How tricky can logging in be?</p>
<p>The Ubuntu KVM guest that you started is in a KVM internal private network that uses NAT (Network Address Translation) in order to communicate with the "outside world".  "Outside world" in this context refers to any server outside of our <abbr title="Red Hat Enterprise Linux">RHEL</abbr> 8.5 host. </p>
<div class="admonition note">
<p class="admonition-title">Your home network is probably doing the same thing</p>
<p>Your cable modem or DSL modem or satellite modem provides NAT services for your home network. This modem connects to your network router either:</p>
<ul>
<li>combined into a single physical unit that acts as a modem and a router (and maybe a toaster or coffee maker- at least it should be given how much my wallet shrinks after paying my monthly bill!)</li>
</ul>
<p><em>OR</em></p>
<ul>
<li>a separate modem and router you buy yourself for better performance or to save money in the long run by eliminating monthly equipment rental fees from your internet provider</li>
</ul>
</div>
<div class="admonition abstract">
<p class="admonition-title">tl;dr</p>
<p>You will use "port forwarding" to get from the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> 8.5 host to your Ubuntu KVM guest.  It's a little tricky but we've set things up to make it easy for you. </p>
</div>
</div>
<div class="admonition question">
<p class="admonition-title">How have we made it easy for you?</p>
<p>If you're on an instructor-provided system, we've hopefully set an environment variable for you that specifies the port you'll need to connect to on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> 8.5 host that will allow it to successfully forward your login attempt to your Ubuntu KVM guest.  Run this:</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">Student_SSH_Port</span><span class="si">}</span>
</code></pre></div>
<details class="- example">
<summary>Example output when variable was set</summary>
<div class="highlight"><pre><span></span><code>silliman@nat-147 ~ % echo ${Student_SSH_Port}     
20024
</code></pre></div>
</details>
<p>If you don't see a port number somewhere between 20023 and 20042- each student will have a unique port- then ask the instructor for your port and set it with this command (changing  22222 from the example to your instructor-assigned port)</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">Student_SSH_Port</span><span class="o">=</span><span class="m">22222</span>
</code></pre></div>
<p>There is nothing magical about the port range 20023 to 20042- this just happens to be the range of ports the instructors configured on the host system. The secret formula used by the instructors is <em>20022 + last two digits of your student userid</em>, and the system has been set up to allow twenty students to take the lab at the same time.</p>
<p>For the same reason as explained the in the beginning of the lab when we had you check that your student userid was set in a variable, if this variable was not already set and you had to set it, it is optional but recommended to update your shell so that this change will take effect in new terminal windows or tabs as well.  Examples are shown for <em>bash</em> and <em>zsh</em>- pick the appropriate command or tailor for your shell:</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;export Student_SSH_Port=&#39;</span><span class="si">${</span><span class="nv">Student_SSH_Port</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="s2">/.bashrc&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;export Student_SSH_Port=&#39;</span><span class="si">${</span><span class="nv">Student_SSH_Port</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="s2">/.zshrc&quot;</span>
</code></pre></div>
</div>
<p>Ensure that you are in the terminal tab or window for your KVM Standard Guest since you're now ready to log in to your Ubuntu KVM guest:</p>
<div class="highlight"><pre><span></span><code>ssh -p ${Student_SSH_Port} -l student 192.168.22.64
</code></pre></div>
<details class="- example">
<summary>Example messages logging into Ubuntu KVM guest</summary>
<div class="highlight"><pre><span></span><code>silliman@nat-147 ~ % ssh -p ${Student_SSH_Port} -l student 192.168.22.64

Last login: Thu Feb  9 19:32:09 2023 from 192.168.215.147
student@ubuntu2204:~$ 
</code></pre></div>
</details>
<p>Continue to enter commands in your KVM Standard Guest terminal tab or window until directed to switch to your other tab or window.</p>
<div class="admonition question">
<p class="admonition-title">Is my <code>userid</code> really student?</p>
<p>That's right, your userid is <em>student</em> on your Ubuntu KVM guest.  Each student has a unique userid on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> 8.5 host, but since each student has their own unique Ubuntu KVM guest, you each have the same userid, <em>student</em>, since you have this guest all to yourself.</p>
</div>
<p>You should be able to log in without a password prompt, but if not, your instructor will provide you with the password.</p>
<h2 id="lab-configurersyslog-install-rsyslog-gnutls-package">Install <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr>-gnutls package<a class="headerlink" href="#lab-configurersyslog-install-rsyslog-gnutls-package" title="Permanent link">&para;</a></h2>
<p>The initial installation of Ubuntu installed an <em><abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr></em> service.  Display it with this command:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>rsyslog
</code></pre></div>
<details class="- example">
<summary>Example output</summary>
<div class="highlight"><pre><span></span><code>● rsyslog.service - System Logging Service
     Loaded: loaded (/lib/systemd/system/rsyslog.service; enabled; vendor preset: enabled)
     Active: active (running) since Tue 2023-02-14 00:24:49 UTC; 12min ago
TriggeredBy: ● syslog.socket
       Docs: man:rsyslogd(8)
             man:rsyslog.conf(5)
             https://www.rsyslog.com/doc/
   Main PID: 654 (rsyslogd)
      Tasks: 4 (limit: 2350)
     Memory: 2.2M
        CPU: 8ms
     CGroup: /system.slice/rsyslog.service
             └─654 /usr/sbin/rsyslogd -n -iNONE

Feb 14 00:24:49 ubuntu2204 systemd[1]: Starting System Logging Service...
Feb 14 00:24:49 ubuntu2204 systemd[1]: Started System Logging Service.
Feb 14 00:24:49 ubuntu2204 rsyslogd[654]: imuxsock: Acquired UNIX socket &#39;/run/systemd/journal/syslog&#39; (f&gt;
Feb 14 00:24:49 ubuntu2204 rsyslogd[654]: rsyslogd&#39;s groupid changed to 115
Feb 14 00:24:49 ubuntu2204 rsyslogd[654]: rsyslogd&#39;s userid changed to 107
Feb 14 00:24:49 ubuntu2204 rsyslogd[654]: [origin software=&quot;rsyslogd&quot; swVersion=&quot;8.2112.0&quot; x-pid=&quot;654&quot; x-&gt;
Feb 14 00:24:49 ubuntu2204 systemd[1]: rsyslog.service: Sent signal SIGHUP to main process 654 (rsyslogd)&gt;
Feb 14 00:34:49 ubuntu2204 rsyslogd[654]: [origin software=&quot;rsyslogd&quot; swVersion=&quot;8.2112.0&quot; x-pid=&quot;654&quot; x-&gt;
lines 1-22/22 (END)
</code></pre></div>
</details>
<p>If you're having trouble getting back to a command prompt, press <em>q</em> (for <em>quit</em>). </p>
<p>The default installation of <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> needs to be modified to allow it to receive messages sent across the network using the TCP protocol and with mutual TLS authentication.</p>
<p>You'll modify the configuration to allow this.  </p>
<ol>
<li>
<p>Become the root user:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>su<span class="w"> </span>-
</code></pre></div>
<details class="- example">
<summary>Example output when becoming root</summary>
<div class="highlight"><pre><span></span><code>student@ubuntu2204:~$ sudo su -
root@ubuntu2204:~# 
</code></pre></div>
</details>
</li>
<li>
<p>Create the proper configuration file in the <em>/etc/<abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr>.d/</em> directory:</p>
<div class="highlight"><pre><span></span><code>cat &lt;&lt; EOF &gt; /etc/rsyslog.d/server.conf
# output to journal
module(load=&quot;omjournal&quot;)
template(name=&quot;journal&quot; type=&quot;list&quot;) {
# can add other metadata here
property(outname=&quot;PRIORITY&quot; name=&quot;pri&quot;)
property(outname=&quot;SYSLOG_FACILITY&quot; name=&quot;syslogfacility&quot;)
property(outname=&quot;SYSLOG_IDENTIFIER&quot; name=&quot;app-name&quot;)
property(outname=&quot;HOSTNAME&quot; name=&quot;hostname&quot;)
property(outname=&quot;MESSAGE&quot;  name=&quot;msg&quot;)
}

ruleset(name=&quot;journal-output&quot;) {
action(type=&quot;omjournal&quot; template=&quot;journal&quot;)
}

<span class="hll"># make gtls driver the default and set certificate files
</span><span class="hll">\$DefaultNetstreamDriver &quot;gtls&quot;
</span><span class="hll">\$DefaultNetstreamDriverCAFile /var/lib/rsyslog/x509/ca.crt
</span><span class="hll">\$DefaultNetstreamDriverCertFile /var/lib/rsyslog/x509/server.crt
</span><span class="hll">\$DefaultNetstreamDriverKeyFile /var/lib/rsyslog/x509/server-key.pem
</span>
<span class="hll"># load TCP listener
</span><span class="hll">module(
</span><span class="hll">load=&quot;imtcp&quot;
</span><span class="hll">StreamDriver.Name=&quot;gtls&quot;
</span><span class="hll">StreamDriver.Mode=&quot;1&quot;
</span><span class="hll">StreamDriver.Authmode=&quot;x509/certvalid&quot;
</span><span class="hll">)
</span>
# start up listener at port 6514
input(
type=&quot;imtcp&quot;
port=&quot;6514&quot;
ruleset=&quot;journal-output&quot;
)

EOF
</code></pre></div>
<p>We might have had you put the cart before the horse a little bit because there is some work to do to ensure that what you've added to this configuration file actually works! But we did this so that we can point out the sections that are requiring this extra work.</p>
<div class="admonition tip">
<p class="admonition-title">Take a look close to the bottom of the file</p>
<p>There are two sections of interest that are highlighted in the above code block. If these lines could speak to you, they would say, "We are going to receive TCP messages, and we will use TLS to authenticate with the sender of these messages and to enable encryption of the messages, and here are the certificate and keys needed to enable this to work".</p>
</div>
<p>For this configuration file to work, you'll need to install a software package to allow <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> to receive TLS-authenticated TCP messages and you'll need to create the certificate and keys and put them where the configuration file says you put them.</p>
</li>
<li>
<p>Prove to yourself that the <em><abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr></em> package has already been installed (by the "bare-bones" default Ubuntu setup):</p>
<div class="highlight"><pre><span></span><code>apt-cache<span class="w"> </span>policy<span class="w"> </span>rsyslog
</code></pre></div>
<details class="- example">
<summary>Output showing <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> is already installed</summary>
<div class="highlight"><pre><span></span><code>rsyslog:
<span class="w">    </span>Installed:<span class="w"> </span><span class="m">8</span>.2112.0-2ubuntu2.2
<span class="w">    </span>Candidate:<span class="w"> </span><span class="m">8</span>.2112.0-2ubuntu2.2
<span class="w">    </span>Version<span class="w"> </span>table:
***<span class="w"> </span><span class="m">8</span>.2112.0-2ubuntu2.2<span class="w"> </span><span class="m">500</span>
<span class="w">        </span><span class="m">500</span><span class="w"> </span>http://ports.ubuntu.com/ubuntu-ports<span class="w"> </span>jammy-updates/main<span class="w"> </span>s390x<span class="w"> </span>Packages
<span class="w">        </span><span class="m">500</span><span class="w"> </span>http://ports.ubuntu.com/ubuntu-ports<span class="w"> </span>jammy-security/main<span class="w"> </span>s390x<span class="w"> </span>Packages
<span class="w">        </span><span class="m">100</span><span class="w"> </span>/var/lib/dpkg/status
<span class="w">    </span><span class="m">8</span>.2112.0-2ubuntu2<span class="w"> </span><span class="m">500</span>
<span class="w">        </span><span class="m">500</span><span class="w"> </span>http://ports.ubuntu.com/ubuntu-ports<span class="w"> </span>jammy/main<span class="w"> </span>s390x<span class="w"> </span>Packages
</code></pre></div>
</details>
</li>
<li>
<p>Prove to yourself that the <em><abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr>-gnutls</em> package has not been installed yet:</p>
<div class="highlight"><pre><span></span><code>apt-cache<span class="w"> </span>policy<span class="w"> </span>rsyslog-gnutls
</code></pre></div>
<details class="- example">
<summary>Output showing <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr>-gnutls is not installed</summary>
<div class="highlight"><pre><span></span><code>rsyslog-gnutls:
    Installed: (none)
    Candidate: 8.2112.0-2ubuntu2.2
    Version table:
    8.2112.0-2ubuntu2.2 500
        500 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x Packages
        500 http://ports.ubuntu.com/ubuntu-ports jammy-security/main s390x Packages
    8.2112.0-2ubuntu2 500
        500 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x Packages
</code></pre></div>
</details>
</li>
<li>
<p>Remedy the situation (not having <em><abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr>-gnutls</em> package installed):</p>
<div class="highlight"><pre><span></span><code>apt-get<span class="w"> </span>install<span class="w"> </span>rsyslog-gnutls
</code></pre></div>
<details class="- example">
<summary>Output from installing <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr>-gnutls</summary>
<div class="highlight"><pre><span></span><code>Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
Suggested packages:
    gnutls-bin
The following NEW packages will be installed:
    rsyslog-gnutls
0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.
Need to get 17.8 kB of archives.
After this operation, 90.1 kB of additional disk space will be used.
Get:1 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x rsyslog-gnutls s390x 8.2112.0-2ubuntu2.2 [17.8 kB]
Fetched 17.8 kB in 0s (71.9 kB/s)         
Selecting previously unselected package rsyslog-gnutls.
(Reading database ... 56568 files and directories currently installed.)
Preparing to unpack .../rsyslog-gnutls_8.2112.0-2ubuntu2.2_s390x.deb ...
Unpacking rsyslog-gnutls (8.2112.0-2ubuntu2.2) ...
Setting up rsyslog-gnutls (8.2112.0-2ubuntu2.2) ...
Scanning processes...                                                                                     
Scanning linux images...                                                                                  

Running kernel seems to be up-to-date (ABI upgrades are not detected).

No services need to be restarted.

No containers need to be restarted.

No user sessions are running outdated binaries.

No VM guests are running outdated hypervisor (qemu) binaries on this host.
</code></pre></div>
</details>
</li>
<li>
<p><em>Optional</em>: Repeat <code>apt-cache policy rsyslog-gnutls</code> to see that the package is now installed:</p>
<div class="highlight"><pre><span></span><code>apt-cache<span class="w"> </span>policy<span class="w"> </span>rsyslog-gnutls
</code></pre></div>
<details class="- example">
<summary>Output showing that <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr>-gnutls is installed</summary>
<div class="highlight"><pre><span></span><code>rsyslog-gnutls:
    Installed: 8.2112.0-2ubuntu2.2
    Candidate: 8.2112.0-2ubuntu2.2
    Version table:
*** 8.2112.0-2ubuntu2.2 500
        500 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x Packages
        500 http://ports.ubuntu.com/ubuntu-ports jammy-security/main s390x Packages
        100 /var/lib/dpkg/status
    8.2112.0-2ubuntu2 500
        500 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x Packages
</code></pre></div>
</details>
</li>
</ol>
<h2 id="lab-configurersyslog-create-a-certification-authority-ca-for-your-rsyslog-service">Create a Certification Authority (<abbr title="certification authority">CA</abbr>) for your <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> service<a class="headerlink" href="#lab-configurersyslog-create-a-certification-authority-ca-for-your-rsyslog-service" title="Permanent link">&para;</a></h2>
<h3 id="lab-configurersyslog-background-information">Background Information<a class="headerlink" href="#lab-configurersyslog-background-information" title="Permanent link">&para;</a></h3>
<p>The TLS authentication for communication with the rysyslog service requires an X509 certificate and private key.  An X509 certificate contains a public key that goes with the private key.  An X509 certificate also contains metadata including the identification of the holder of the certificate, the purposes the certificate is intended for, and more. Think of a public key as a yummy cake baked with yellow dough, it's moist and tastes pretty good- but the X509 certificate wrapped around it is like the chocolate icing and the rainbow sprinkles- it's delicious!  (Break time!!) If you haven't given up on the analogy, think of the private key as the secret recipe to bake the cake that nobody but you knows about.  For a slightly more technical (but still just scratching the surface), but perhaps not as tasty, description of public key cryptography check out this <a href="https://ibm-wsc.github.io/hyper-protect-virtual-servers-workshop/grep11-lab/lab-exercise3/#public-key-cryptography-in-simple-terms" rel="noopener" target="_blank">description from one of our earlier labs</a>.</p>
<p>An X509 certificate needs to be created and signed by a certification authority (<abbr title="certification authority">CA</abbr>). </p>
<div class="admonition info">
<p class="admonition-title">The authority prefers certification</p>
<p>Most people call a <abbr title="certification authority">CA</abbr> a "certificate authority" but actually the Internet Request for Comment (RFC) that defines the X509 standard uses the term <a href="https://www.rfc-editor.org/rfc/rfc5280#section-3" rel="noopener" target="_blank">"<em>certification</em> authority"</a>. Imagine that! <img alt="😄" class="twemoji" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f604.svg" title=":smile:" /></p>
</div>
<p>For the lab you will create your own <abbr title="certification authority">CA</abbr>- what is often called a "self-signed" <abbr title="certification authority">CA</abbr>. A utility called <code>openssl</code> can be used to do this.  A <abbr title="certification authority">CA</abbr> signs certificates that it creates. In order to digitally sign something, you use a private key.  In simple terms, a publicly known algorithm- which can be poked at and prodded at by researchers and academics in an effort to prove its security or to hopefully win a large bounty by proving its insecurity- is run against a private key that nobody else knows, and produces a unique output, or signature.  This signature can be verified algorithmically by anybody who holds the private key's corresponding public key.</p>
<details class="- question">
<summary>Who holds the public key?</summary>
<p>That's right, the public <img alt="😲" class="twemoji" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f632.svg" title=":astonished:" />! It is safe to share your public key with others- it is your private key that you must protect from loss, theft or exposure.</p>
</details>
<p>If you receive a piece of digital information that is signed, and the public key that corresponds to the private key used to create the signature, you can prove that whoever signed this had to have held the private key in order to create the signature.  Okay, cool.  But what if a malicious actor had the private key and gave you the public key? Would you feel so great knowing you verified the signer if they were malicious?  No!  That is where a <abbr title="certification authority">CA</abbr> comes in. The idea is that the following process occurs:</p>
<ol>
<li>An individual or organization submits a request for a certificate (<abbr title="certificate signing request">CSR</abbr>) with their public key</li>
<li>The <abbr title="certification authority">CA</abbr> takes the effort to verify that the owner of the public key is a good actor and is who they say they are and can be trusted</li>
<li>The <abbr title="certification authority">CA</abbr> creates the certificate that holds the public key, essentially stating "I am a <abbr title="certification authority">CA</abbr> and you can trust me and the holder of this certificate that I just signed is a good person and they are who they say they are, so you can trust this certificate and anything it signs".</li>
</ol>
<details class="question">
<summary>How is that working out for us?</summary>
<p>The X509 Certification Authority protocol is outstanding in theory. In practice its vulnerability lies in the need for the holders of private keys to protect them with diligence.  Losing your private key is akin to losing your wallet or your house key or your drivers license or ... you get the picture.  Attacks such as <a href="https://www.google.com/search?q=software+supply+chain+attacks" rel="noopener" target="_blank">software supply chain attacks</a> are often accomplished by malicious actors who have stolen others' private keys.  This is why initiatives like <abbr title="Confidential computing is a cloud computing technology that isolates sensitive data in a protected CPU enclave during processing. The contents of the enclave—the data being processed, and the techniques that are used to process it—are accessible only to authorized programming code, and are invisible and unknowable to anything or anyone else, including the cloud provider.">Confidential Computing</abbr> and technologies like Hardware Security Modules are important.</p>
</details>
<p>In real world practice, for external, customer-facing applications an enterprise will ask a well-known and trusted third-party <abbr title="certification authority">CA</abbr> to issue its certificates. In many cases an enterprise may run its own internal <abbr title="certification authority">CA</abbr> for certificates for internal applications.   In this lab you're going to create your own CAs.  Hopefully, you trust yourself <img alt="🤞" class="twemoji" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f91e.svg" title=":fingers_crossed:" /> enough to feel comfortable with this...</p>
<h3 id="lab-configurersyslog-hands-on-keyboard-time">Hands on keyboard time<a class="headerlink" href="#lab-configurersyslog-hands-on-keyboard-time" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Get out of root for the moment, as you'll be doing this certificate work with your regular authority:</p>
<div class="highlight"><pre><span></span><code><span class="nb">exit</span>
</code></pre></div>
<details class="- example">
<summary>Output when getting out of root</summary>
<div class="highlight"><pre><span></span><code>root@ubuntu2204:~# exit
logout
</code></pre></div>
</details>
<p>Your prompt should now end with a dollar sign ($) indicating you are operating with your regular authority as userid <em>student</em>, as opposed to the hash sign (#) prompt that you had when you were operating with <em>root</em> authority.  </p>
</li>
<li>
<p>Run this command sequence:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>rsyslogWork<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>rsyslogWork
</code></pre></div>
<p>It accomplishes the following:</p>
<ol>
<li>Ensures you are in your home directory (which you already are in unless you wandered off on your own)</li>
<li>Creates a fresh directory that you'll work in for this activity</li>
<li>Switches to this new directory</li>
</ol>
</li>
<li>
<p>Create a private key. It will be the private key your self-signed <abbr title="certification authority">CA</abbr> will use so call it <code>ca-key.pem</code>:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>genrsa<span class="w"> </span>-out<span class="w"> </span>ca-key.pem<span class="w"> </span><span class="m">4096</span>
</code></pre></div>
</li>
<li>
<p>Run the following command to create a configuration file for your <abbr title="certification authority">CA</abbr></p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; ca.cnf</span>
<span class="s">[ req ]</span>
<span class="s">default_bits = 2048</span>
<span class="s">default_md = sha256</span>
<span class="s">prompt = no</span>
<span class="s">encrypt_key = no</span>
<span class="s">distinguished_name = dn</span>

<span class="s">[ dn ]</span>
<span class="s">C = US</span>
<span class="s">O = IBM WSC zSystems and LinuxONE</span>
<span class="s">CN = CA for rsyslog for SE-enabled KVM guests</span>

<span class="s">EOF</span>
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Why are we using .cnf configuration files?</p>
<p>Some <code>openssl</code> commands have a tendency to ask a bunch of questions which can be tedious and error-prone when typing the answers, but you can avoid that by creating a configuration file that provides the answers and thus avoids the questions.  You'll see this pattern throughout the lab.</p>
</div>
</li>
<li>
<p>A <abbr title="certification authority">CA</abbr> itself has a certificate that it can send or make available to others (others being people, or computer processes, or whomever). You don't have one yet- all you have is a private key. A certificate signing request (<abbr title="certificate signing request">CSR</abbr>) can be created from a private key- it derives the public key from the private key and creates an object called a Certificate Signing Request (<abbr title="certificate signing request">CSR</abbr>) that contians the public key and other identifying information and can be sent to a <abbr title="certification authority">CA</abbr>. Create your <abbr title="certificate signing request">CSR</abbr>:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>req<span class="w"> </span>-config<span class="w"> </span>ca.cnf<span class="w"> </span>-key<span class="w"> </span>ca-key.pem<span class="w"> </span>-new<span class="w"> </span>-out<span class="w"> </span>ca-req.csr
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Certificate Signing Request (<abbr title="certificate signing request">CSR</abbr>)</p>
<p>The RSA algorithm is a magical mystery tour to most mortals, but the algorithm is such that the public key can be extracted from a private key. You will use the private key as input to a command that will create what is known as a <abbr title="certificate signing request">CSR</abbr>. A <abbr title="certificate signing request">CSR</abbr> is a file that contains the public key (the yellow dough) and other information (the icing and the sprinkles) that you then send to the <abbr title="certification authority">CA</abbr> and say "please, please, I'm a good person and you can trust me and please create a real certificate for me".  A <abbr title="certificate signing request">CSR</abbr> is like a caterpillar <img alt="🐛" class="twemoji" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f41b.svg" title=":bug:" /> and the resulting certificate is like a beautiful butterfly <img alt="🦋" class="twemoji" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f98b.svg" title=":butterfly:" />.</p>
</div>
<p>Now you have a certificate signing request. </p>
<p>So you normally send a <abbr title="certificate signing request">CSR</abbr> to a <abbr title="certification authority">CA</abbr> to sign.  There's a "chicken or the egg" problem here.  If a <abbr title="certification authority">CA</abbr> needs a Certificate,  and a Certificate has to be created by another <abbr title="certification authority">CA</abbr>, then how did that <abbr title="certification authority">CA</abbr> get created?  By another <abbr title="certification authority">CA</abbr>?  Yes, possibly.  But, does the chain go on forever?  No-  at some point in the chain the <abbr title="certification authority">CA</abbr>'s certificate was signed by its own private key, and not a higher <abbr title="certification authority">CA</abbr>.  This is the root of the chain, and it is self-signed. In real life, a chain could be many layers deep, but it eventually has to stop.  Think of it like a management chain in an organization's org chart-  there are first-line managers, second-line managers, and so forth up to the CEO.  The Root certificate is like the CEO.  </p>
</li>
<li>
<p>Since you're the boss of your lab, and the worker, you don't need a big long chain of <abbr title="certification authority">CA</abbr>'s.  Just one will do fine.  So you'll build a single root, or self-signed, <abbr title="certification authority">CA</abbr>, and you'll like it!  <img alt="😉" class="twemoji" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f609.svg" title=":wink:" />:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>x509<span class="w"> </span>-signkey<span class="w"> </span>ca-key.pem<span class="w"> </span>-in<span class="w"> </span>ca-req.csr<span class="w"> </span>-req<span class="w"> </span>-days<span class="w"> </span><span class="m">365</span><span class="w"> </span>-out<span class="w"> </span>ca.crt
</code></pre></div>
<details class="- example">
<summary>Output from creating self-signed <abbr title="certification authority">CA</abbr> certificate</summary>
<div class="highlight"><pre><span></span><code>Certificate request self-signature ok
subject=C = US, O = IBM WSC zSystems and LinuxONE, CN = CA for rsyslog for SE-enabled KVM guests
</code></pre></div>
</details>
</li>
</ol>
<h2 id="lab-configurersyslog-create-certificate-and-key-for-your-rsyslog-service">Create certificate and key for your <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> service<a class="headerlink" href="#lab-configurersyslog-create-certificate-and-key-for-your-rsyslog-service" title="Permanent link">&para;</a></h2>
<h3 id="lab-configurersyslog-process-overview">Process Overview<a class="headerlink" href="#lab-configurersyslog-process-overview" title="Permanent link">&para;</a></h3>
<p>In real life, a <abbr title="certification authority">CA</abbr> will probably issue lots of certificates- it's how they make money.  Your <abbr title="certification authority">CA</abbr> is only going to create a couple:</p>
<ul>
<li>a certificate for the <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> service which you will create next.</li>
<li>a certificate for the client (your future <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server) of the <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> service, which you will create later in the lab.  </li>
</ul>
<p>The process is the same as what you just went through for creating your <abbr title="certification authority">CA</abbr> for steps 1-3 below but differs slightly for step 4:</p>
<ol>
<li>Create a private key</li>
<li>Create a configuration file to answer questions ahead of time</li>
<li>Use the key and the config file to create a <abbr title="certificate signing request">CSR</abbr></li>
<li>This time you'll have your "self-signed" <abbr title="certification authority">CA</abbr> create and sign the certificate.  </li>
</ol>
<h3 id="lab-configurersyslog-creation-time">Creation time<a class="headerlink" href="#lab-configurersyslog-creation-time" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Create the private key:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>genrsa<span class="w"> </span>-out<span class="w"> </span>server-key.pem<span class="w"> </span><span class="m">4096</span>
</code></pre></div>
</li>
<li>
<p>Create the configuration file to preemptively answer the inevitable questions.  We've used a command pipe to extract your guest's IP address into a variable and then we use that variable in two places in the configuration file.  If you borrow this technique for your system please ensure that this command pipe works on your system:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">ip</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>ip<span class="w"> </span>route<span class="w"> </span>get<span class="w"> </span><span class="m">1</span>.1.1.1<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-oP<span class="w"> </span><span class="s1">&#39;src \K[^ ]+&#39;</span><span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; server.cnf</span>
<span class="s">[ req ]</span>
<span class="s">default_bits = 2048</span>
<span class="s">default_md = sha256</span>
<span class="s">prompt = no</span>
<span class="s">encrypt_key = no</span>
<span class="s">distinguished_name = dn</span>

<span class="s">[ server ]</span>
<span class="s">subjectAltName = IP:${ip}</span>
<span class="s">extendedKeyUsage = serverAuth</span>

<span class="s">[ dn ]</span>
<span class="s">C = US</span>
<span class="s">O = Rsyslog Service</span>
<span class="s">CN = ${ip}</span>
<span class="s">EOF</span>
</code></pre></div>
<p><em>Optional</em>: You know you can't resist looking at the output file to see if that IP magic worked, so just do it:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>server.cnf
</code></pre></div>
</li>
<li>
<p>Create the <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> service's <abbr title="certificate signing request">CSR</abbr>:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>req<span class="w"> </span>-config<span class="w"> </span>server.cnf<span class="w"> </span>-key<span class="w"> </span>server-key.pem<span class="w"> </span>-new<span class="w"> </span>-out<span class="w"> </span>server-req.csr
</code></pre></div>
</li>
<li>
<p>"Send" the request to your "self-signed" <abbr title="certification authority">CA</abbr> in order to create the certificate:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>x509<span class="w"> </span>-req<span class="w"> </span>-in<span class="w"> </span>server-req.csr<span class="w"> </span>-days<span class="w"> </span><span class="m">365</span><span class="w"> </span>-CA<span class="w"> </span>ca.crt<span class="w"> </span>-CAkey<span class="w"> </span>ca-key.pem<span class="w"> </span>-CAcreateserial<span class="w"> </span>-extfile<span class="w"> </span>server.cnf<span class="w"> </span>-extensions<span class="w"> </span>server<span class="w"> </span>-out<span class="w"> </span>server.crt
</code></pre></div>
<details class="- example">
<summary>Example output from certificate creation</summary>
<div class="highlight"><pre><span></span><code>Certificate request self-signature ok
subject=C = US, O = Rsyslog Test Server, CN = 172.16.0.42
</code></pre></div>
</details>
<ol>
<li>
<p>Run this command to display the <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> service's certificate in a form that a human can comprehend:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>x509<span class="w"> </span>-noout<span class="w"> </span>-text<span class="w"> </span>-in<span class="w"> </span>server.crt<span class="w"> </span>
</code></pre></div>
<details class="- example">
<summary>Example human-readable display of certificate</summary>
<div class="highlight"><pre><span></span><code>Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            72:1b:54:77:9d:c9:28:b0:7c:f0:b8:d6:dc:24:e1:b1:60:fa:59:f7
        Signature Algorithm: sha256WithRSAEncryption
        Issuer: C = US, O = IBM WSC zSystems and LinuxONE, CN = CA for rsyslog for SE-enabled KVM guests
        Validity
            Not Before: Feb 14 01:18:18 2023 GMT
            Not After : Feb 14 01:18:18 2024 GMT
        Subject: C = US, O = Rsyslog Test Server, CN = 172.16.0.42
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                Public-Key: (4096 bit)
                Modulus:
                    00:aa:ed:d0:83:3c:65:8c:6c:4d:f5:bc:bc:56:e9:
                    3c:57:ab:b8:3c:29:14:2a:73:d6:ca:a0:7e:0c:00:
                    fc:4f:cc:28:88:1c:01:e9:26:9e:5e:0b:60:5e:ee:
                    69:f3:c7:c8:f9:26:19:71:a7:1a:c1:54:3a:3d:6b:
                    01:4a:e2:20:ab:89:a5:31:a7:f4:a2:39:71:30:21:
                    29:17:4f:04:15:73:1d:b7:b6:c2:81:c2:f1:d9:a8:
                    29:d8:ca:c9:d6:97:f3:37:8e:17:9d:a7:b1:30:c8:
                    5c:1c:be:e2:75:5e:9f:88:08:76:54:5a:ee:40:d4:
                    90:26:2b:74:35:71:a2:d1:4d:86:db:46:bf:18:38:
                    0a:fb:e4:1a:ab:ef:f6:49:1e:7b:bc:76:71:3a:b7:
                    5e:e8:c0:c7:3d:db:74:2d:87:20:5b:e6:5e:27:67:
                    1a:e9:e1:ea:20:b8:d2:fc:5e:2d:79:c0:e5:46:22:
                    cf:6e:26:54:c6:00:d1:d0:05:46:0b:9d:97:8c:cb:
                    68:e7:a4:b2:9a:47:21:67:e5:56:32:cb:ba:c3:0e:
                    c8:f3:f4:17:02:ca:ee:ac:37:0e:f3:40:cf:a4:56:
                    98:9d:b3:e3:e2:c2:43:d7:3b:a5:c1:09:92:2b:e9:
                    fb:5b:a6:73:d0:83:97:c9:70:7f:f8:84:59:b3:b6:
                    4f:e8:40:98:92:74:5c:8c:9f:db:27:7f:94:4b:00:
                    a6:cf:06:9b:0f:a9:f4:35:17:01:e6:d6:6d:c2:78:
                    f8:41:59:f6:f6:f2:11:d1:52:28:b5:06:78:ba:db:
                    12:f2:3f:c6:ef:14:64:cd:85:49:ce:8e:fc:91:b8:
                    2a:c3:25:6a:cc:3c:46:9d:e8:10:aa:30:fd:3b:55:
                    3a:26:97:00:8b:62:c4:d6:89:f0:36:68:13:63:19:
                    ba:18:f4:0c:4f:bc:5d:34:c8:24:d9:8e:2f:4b:e5:
                    d9:dd:9f:39:8d:00:54:fe:d9:00:d7:f1:71:6b:8b:
                    9c:ed:66:de:6a:26:3f:48:cb:3a:4a:fc:9c:50:12:
                    f5:da:dc:e7:e5:08:6c:0a:6d:60:73:cf:e6:b2:3e:
                    06:59:98:00:2c:97:25:38:01:50:2e:c2:c6:35:fa:
                    e4:d5:20:01:fb:9d:ca:4c:78:3f:7a:ad:c7:5d:db:
                    5e:04:c7:0f:e2:9f:a1:e9:27:f8:f2:a9:9f:00:07:
                    58:68:c9:3f:d6:41:5b:46:90:f5:26:6a:04:2c:cf:
                    44:c9:f8:1e:5d:38:95:95:71:e2:30:57:d5:83:41:
                    73:a4:00:88:6b:99:84:71:d3:60:ce:32:9c:bb:3b:
                    39:46:a7:77:fd:7e:ed:1c:81:02:e3:da:83:85:2c:
                    c9:60:c7
                Exponent: 65537 (0x10001)
        X509v3 extensions:
            X509v3 Subject Alternative Name: 
                IP Address:172.16.0.42
            X509v3 Extended Key Usage: 
                TLS Web Server Authentication
            X509v3 Subject Key Identifier: 
                CC:01:AD:BA:8C:5F:31:B9:58:A9:2D:4E:05:C7:B1:B7:82:10:90:05
            X509v3 Authority Key Identifier: 
                DirName:/C=US/O=IBM WSC zSystems and LinuxONE/CN=CA for rsyslog for SE-enabled KVM guests
                serial:0B:4A:84:C6:84:00:F8:7F:B7:0A:F0:82:FD:4E:C1:F2:99:C2:63:BC
    Signature Algorithm: sha256WithRSAEncryption
    Signature Value:
        4c:a3:7a:76:21:0d:8f:db:e9:3a:a6:3f:6b:3a:9a:5d:bb:ac:
        7e:75:5c:ed:69:3c:b9:2b:6e:84:1c:fc:1f:56:47:ff:b3:38:
        92:fe:0f:5b:2c:87:32:0e:8f:60:c3:33:ff:d5:89:26:61:9a:
        7f:ce:ae:f3:6b:cc:77:1b:4d:d0:59:5f:d9:09:e1:fa:21:5c:
        6a:6f:b3:71:45:10:98:4f:6e:fe:08:7f:31:42:e6:dd:83:9a:
        11:de:2d:eb:b5:b9:40:4d:80:86:7f:f8:88:cc:87:60:38:d4:
        e2:9a:89:9d:ec:43:61:ad:34:96:38:93:ca:4a:63:8d:cc:b7:
        33:98:33:e2:63:c1:7b:04:98:80:b3:e1:54:df:f6:24:57:82:
        98:c4:e8:64:8a:3b:d2:af:65:56:d7:97:c0:c3:dc:45:06:c9:
        4f:ce:5b:d3:49:7f:2b:28:83:27:57:b9:bf:1a:46:81:68:4c:
        6b:85:d7:db:f0:d4:25:7b:3d:92:63:d0:91:b5:ec:df:cb:e4:
        6b:6c:b0:c4:47:3c:c6:91:64:33:f6:11:6b:5b:f7:70:bd:e1:
        71:ef:a6:28:57:b2:a0:e0:2e:ef:ab:34:7a:c4:b8:24:18:88:
        5f:92:0b:92:ca:14:a2:b6:62:ab:2c:e6:c2:bb:27:91:54:de:
        84:56:1e:ed:f3:7d:b7:e8:34:b4:78:76:2c:1f:af:d9:61:b7:
        6e:59:fa:e8:33:38:b4:5e:30:69:71:06:4d:df:fe:cb:46:03:
        ba:69:7c:85:3c:f0:73:f7:d8:4e:b0:39:aa:79:72:1f:52:2e:
        05:cb:81:9f:e3:62:6b:66:55:7c:92:13:21:62:dc:fd:9d:8f:
        f8:77:dd:d2:b6:61:c4:8f:fa:fa:a0:74:95:fa:9d:f2:5d:d2:
        7d:d4:41:95:d8:41:50:99:7d:80:3d:36:28:75:28:62:67:05:
        11:a3:95:c7:85:8f:20:37:d6:b8:b5:8a:f6:8a:e3:d0:85:6e:
        cd:2a:41:f9:e7:48:bb:b0:b7:54:dc:6b:df:c9:a2:5e:f7:61:
        c2:3a:4c:82:7e:6b:e9:82:cf:c6:3a:7f:a2:ae:39:00:d9:ac:
        bf:8a:84:72:e6:ae:c1:75:e0:92:60:5e:cd:4b:64:1f:5a:44:
        3a:09:15:2c:95:b8:c3:ca:44:ec:79:1e:d5:96:bc:20:9a:7a:
        cf:6b:e4:cf:e0:91:f2:c2:e6:fd:f1:8a:66:c4:ae:eb:90:90:
        f4:ec:64:66:9a:9a:11:8d:11:ab:ef:05:d2:42:fb:e5:2c:78:
        8a:db:16:b7:96:ae:06:b8:42:b4:c7:23:26:b2:9a:c2:85:d8:
        6b:6d:d8:4e:84:0e:ab:a1
</code></pre></div>
</details>
</li>
</ol>
</li>
</ol>
<h2 id="lab-configurersyslog-copy-certificates-and-private-key-to-the-location-specified-in-the-etcrsyslogdserverconf-file">Copy certificates and private key to the location specified in the /etc/<abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr>.d/server.conf file<a class="headerlink" href="#lab-configurersyslog-copy-certificates-and-private-key-to-the-location-specified-in-the-etcrsyslogdserverconf-file" title="Permanent link">&para;</a></h2>
<p>The configuration file you created in <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> a little while ago (near the top of this page) specified <code>/var/lib/rsyslog/x509</code> as the directory to hold some files. You just created these files in your <em>rsyslogWork</em> directory, so now create the <em>/var/lib/<abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr>/x509</em> directory and copy the files in there:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/var/lib/rsyslog/x509<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="k">for</span><span class="w"> </span>file<span class="w"> </span><span class="k">in</span><span class="w"> </span>ca.crt<span class="w"> </span>server.crt<span class="w"> </span>server-key.pem<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>sudo<span class="w"> </span>cp<span class="w"> </span>-ipv<span class="w"> </span><span class="si">${</span><span class="nv">file</span><span class="si">}</span><span class="w"> </span>/var/lib/rsyslog/x509/.<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="se">\</span>
<span class="k">done</span><span class="w"> </span><span class="se">\</span>
<span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>chown<span class="w"> </span>-R<span class="w"> </span>syslog:syslog<span class="w"> </span>/var/lib/rsyslog
</code></pre></div>
<details class="- example">
<summary>Output from copying files</summary>
<div class="highlight"><pre><span></span><code>&#39;ca.crt&#39; -&gt; &#39;/var/lib/rsyslog/x509/./ca.crt&#39;
&#39;server.crt&#39; -&gt; &#39;/var/lib/rsyslog/x509/./server.crt&#39;
&#39;server-key.pem&#39; -&gt; &#39;/var/lib/rsyslog/x509/./server-key.pem&#39;
</code></pre></div>
</details>
<h2 id="lab-configurersyslog-restart-your-rsyslog-service">Restart your <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> service<a class="headerlink" href="#lab-configurersyslog-restart-your-rsyslog-service" title="Permanent link">&para;</a></h2>
<p>You'll truly know that you configured everything correctly later in the lab when you try to write messages to it from your yet-to-be-created HPVS 2.1.3 <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server. But for now, you will verify it somewhat by taking a before and after snapshot of which TCP ports on your system are listening.  </p>
<p>Run this command, and then in a moment you'll repeat the command.  What you should notice here is the absence of port 6514 in the output:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>lsof<span class="w"> </span>-nP<span class="w"> </span>-iTCP<span class="w"> </span>-sTCP:LISTEN
</code></pre></div>
<details class="- example">
<summary>Output showing listening TCP ports</summary>
<div class="highlight"><pre><span></span><code>COMMAND   PID            USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
systemd-r 602 systemd-resolve   14u  IPv4  15472      0t0  TCP 127.0.0.53:53 (LISTEN)
sshd      709            root    3u  IPv4  16871      0t0  TCP *:22 (LISTEN)
sshd      709            root    4u  IPv6  16882      0t0  TCP *:22 (LISTEN)
</code></pre></div>
</details>
<p>You are now ready to restart the <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> service on your machine:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>rsyslog
</code></pre></div>
<p>No news is good news on the above command- it's pretty quiet when it works.</p>
<p>Display the <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> service's status and notice it hasn't been active very long, since it was just restarted:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>rsyslog
</code></pre></div>
<p><em>Reminder</em>:  <em>q</em> gets you back to a command prompt.</p>
<details class="- example">
<summary>Output showing <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> status after restart</summary>
<div class="highlight"><pre><span></span><code>● rsyslog.service - System Logging Service
     Loaded: loaded (/lib/systemd/system/rsyslog.service; enabled; vendor preset: enabled)
     Active: active (running) since Tue 2023-02-14 01:30:47 UTC; 13s ago
TriggeredBy: ● syslog.socket
       Docs: man:rsyslogd(8)
             man:rsyslog.conf(5)
             https://www.rsyslog.com/doc/
   Main PID: 1439 (rsyslogd)
      Tasks: 9 (limit: 2350)
     Memory: 1.8M
        CPU: 1.008s
     CGroup: /system.slice/rsyslog.service
             └─1439 /usr/sbin/rsyslogd -n -iNONE

Feb 14 01:30:46 ubuntu2204 systemd[1]: Starting System Logging Service...
Feb 14 01:30:47 ubuntu2204 rsyslogd[1439]: imuxsock: Acquired UNIX socket &#39;/run/systemd/journal/syslog&#39; (&gt;
Feb 14 01:30:47 ubuntu2204 rsyslogd[1439]: rsyslogd&#39;s groupid changed to 115
Feb 14 01:30:47 ubuntu2204 rsyslogd[1439]: rsyslogd&#39;s userid changed to 107
Feb 14 01:30:47 ubuntu2204 rsyslogd[1439]: [origin software=&quot;rsyslogd&quot; swVersion=&quot;8.2112.0&quot; x-pid=&quot;1439&quot; &gt;
Feb 14 01:30:47 ubuntu2204 systemd[1]: Started System Logging Service.
</code></pre></div>
</details>
<p>Now when you rerun the command to see the listening TCP ports, seeing 6514 in the output is an indication of success.  If you don't see 6514 in the output, it's time to make those instructors earn their keep:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>lsof<span class="w"> </span>-nP<span class="w"> </span>-iTCP<span class="w"> </span>-sTCP:LISTEN
</code></pre></div>
<details class="- example">
<summary>Expected output showing port 6514 is listening</summary>
<div class="highlight"><pre><span></span><code>COMMAND    PID            USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
systemd-r  602 systemd-resolve   14u  IPv4  15472      0t0  TCP 127.0.0.53:53 (LISTEN)
sshd       709            root    3u  IPv4  16871      0t0  TCP *:22 (LISTEN)
sshd       709            root    4u  IPv6  16882      0t0  TCP *:22 (LISTEN)
rsyslogd  1439          syslog    6u  IPv4  22401      0t0  TCP *:6514 (LISTEN)
rsyslogd  1439          syslog    7u  IPv6  22402      0t0  TCP *:6514 (LISTEN)
</code></pre></div>
</details>
<p><strong>Switch to your terminal tab or window for your session with the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host, as you will start the next section of the lab working on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host.</strong></p>
<p>Please proceed to the next section of the lab by clicking the <em>Next</em> link on the bottom right of this page.</p></section><section class="print-page" id="lab-configurersyslogforgrep11"><h1 id="lab-configurersyslogforgrep11-create-rsyslog-client-certificate-for-the-grep11-server">Create <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> client certificate for the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server<a class="headerlink" href="#lab-configurersyslogforgrep11-create-rsyslog-client-certificate-for-the-grep11-server" title="Permanent link">&para;</a></h1>
<h2 id="lab-configurersyslogforgrep11-overview-of-this-section">Overview of this section<a class="headerlink" href="#lab-configurersyslogforgrep11-overview-of-this-section" title="Permanent link">&para;</a></h2>
<p>In the last section you created the following:</p>
<ol>
<li>self-signed <abbr title="certification authority">CA</abbr> for the <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> service</li>
<li>server certificate for the <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> service</li>
</ol>
<p>In this section you will use your self-signed <abbr title="certification authority">CA</abbr> (1 above) to create:</p>
<ol>
<li>client certificate for your (not-yet-created) HPVS 2.1.3 <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server</li>
</ol>
<p>Your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server will be a client to the <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> service. (It serves clients who want to make <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> requests, but for logging it is a client to the <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> service).</p>
<div class="admonition warning">
<p class="admonition-title">Please read the instructions carefully</p>
<p>You'll be switching between both of your userids in this section:</p>
<ol>
<li>your <em>studentnn</em> userid on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host where <em>nn</em> is unique to you and between 01 and 20</li>
<li>your <em>student</em> userid on your Ubuntu KVM guest </li>
</ol>
<p>We'll do our part by telling you when to switch.  Please do your part by reading the instructions carefully!</p>
</div>
<h2 id="lab-configurersyslogforgrep11-if-necessary-log-in-to-the-rhel-host">If necessary, log in to the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host<a class="headerlink" href="#lab-configurersyslogforgrep11-if-necessary-log-in-to-the-rhel-host" title="Permanent link">&para;</a></h2>
<p>If you are following the lab in order in one sitting, you are already logged in and have switched to the correct terminal tab and window.
But if you need to log in for any reason, the command is <code>ssh -l ${StudentID} 192.168.22.64</code></p>
<h2 id="lab-configurersyslogforgrep11-create-certificate-for-client-access-to-rsyslog">Create certificate for client access to <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr><a class="headerlink" href="#lab-configurersyslogforgrep11-create-certificate-for-client-access-to-rsyslog" title="Permanent link">&para;</a></h2>
<p>Steps 1 through 5 will be performed on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host.</p>
<ol>
<li>
<p>Create a working directory and switch to it:</p>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>~/rsyslogClientWork<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>rsyslogClientWork
</code></pre></div>
</li>
<li>
<p>Create a new private key:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>genrsa<span class="w"> </span>-out<span class="w"> </span>client-key.pem<span class="w"> </span><span class="m">4096</span>
</code></pre></div>
<details class="- example">
<summary>Example output when creating RSA private key</summary>
<div class="highlight"><pre><span></span><code>Generating RSA private key, 4096 bit long modulus (2 primes)
..++++
................................................................................++++
e is 65537 (0x010001)
</code></pre></div>
</details>
<p>You should see output similar to what is shown above on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> 8.5 host.  This same command was very quiet on your Ubuntu KVM guest.</p>
</li>
<li>
<p>Create a configuration file:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; client.cnf</span>
<span class="s">[ req ]</span>
<span class="s">default_bits = 2048</span>
<span class="s">default_md = sha256</span>
<span class="s">prompt = no</span>
<span class="s">encrypt_key = no</span>
<span class="s">distinguished_name = dn</span>

<span class="s">[ dn ]</span>
<span class="s">C = US</span>
<span class="s">O = IBM WSC zSystems and LinuxONE</span>
<span class="s">CN = SE-enabled HPVS 2.1.3 Grep11 Server</span>

<span class="s">EOF</span>
</code></pre></div>
</li>
<li>
<p>Create a certificate signing request (<abbr title="certificate signing request">CSR</abbr>):</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>req<span class="w"> </span>-config<span class="w"> </span>client.cnf<span class="w"> </span>-key<span class="w"> </span>client-key.pem<span class="w"> </span>-new<span class="w"> </span>-out<span class="w"> </span>client-req.csr
</code></pre></div>
</li>
<li>
<p>Now you are going to use a pattern that is similar to a real-world pattern:</p>
<p>You are going to send your <abbr title="certificate signing request">CSR</abbr>, which you just created on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host, to the Rsyslog <abbr title="certification authority">CA</abbr> which you created on your Ubuntu KVM guest:</p>
<div class="highlight"><pre><span></span><code>scp<span class="w"> </span>client-req.csr<span class="w"> </span>student@<span class="si">${</span><span class="nv">StudentGuestIP</span><span class="si">}</span>:./rsyslogWork/.
</code></pre></div>
<p>As shown in the sample output below, you may need to type <em>yes</em> since this is the first connection between the two systems, and you may have to enter a password that will be supplied by the instructors:</p>
<details class="- example">
<summary>Example prompt and output when sending file</summary>
<div class="highlight"><pre><span></span><code>The authenticity of host &#39;172.16.0.42 (172.16.0.42)&#39; can&#39;t be established.
ECDSA key fingerprint is SHA256:QBZpZnpbKTyu8uG3XmcB3z2STnArtTjeVPwBtQONSnc.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added &#39;172.16.0.42&#39; (ECDSA) to the list of known hosts.
student@172.16.0.42&#39;s password: 
client-req.csr                                                          100% 1691     9.2MB/s   00:00 
</code></pre></div>
</details>
</li>
<li>
<p>Switch to your terminal tab or window for your KVM Ubuntu guest.</p>
</li>
<li>
<p>If you are doing the lab in one sitting, in order, then you are already logged in.  If you need to login for any reason the command is <code>ssh -p ${Student_SSH_Port} -l student 192.168.22.64</code>.  Steps 8 through 12 will be performed on your Ubuntu KVM guest.</p>
</li>
<li>
<p>You are now the <abbr title="certification authority">CA</abbr> registrar. Switch to your working directory and find the certificate signing request(<abbr title="certificate signing request">CSR</abbr>) that your customer (i.e., you) sent to you.  </p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/rsyslogWork<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>ls<span class="w"> </span>-l<span class="w"> </span>client*.csr
</code></pre></div>
<details class="- example">
<summary>Make sure your csr is listed</summary>
<div class="highlight"><pre><span></span><code>-rw-r--r-- 1 student student 1691 Feb 14 01:47 client-req.csr
</code></pre></div>
</details>
</li>
<li>
<p>You will do your due diligence and check the contents of the <abbr title="certificate signing request">CSR</abbr>:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>req<span class="w"> </span>-noout<span class="w"> </span>-text<span class="w"> </span>-in<span class="w"> </span>client-req.csr
</code></pre></div>
<details class="- example">
<summary>Example human-readable display of <abbr title="certificate signing request">CSR</abbr></summary>
<div class="highlight"><pre><span></span><code>Certificate Request:
    Data:
        Version: 1 (0x0)
        Subject: C = US, O = IBM WSC zSystems and LinuxONE, CN = SE-enabled HPVS 2.1.3 Grep11 Server
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                Public-Key: (4096 bit)
                Modulus:
                    00:b0:38:b1:27:ee:a2:9f:35:10:dd:74:b2:46:e6:
                    b8:2a:e4:c9:7f:7d:b3:1d:45:96:7d:bc:9d:5a:90:
                    06:64:da:b8:23:73:f3:99:46:54:a3:2a:a8:8e:db:
                    10:96:7e:de:04:65:81:ee:68:f1:5e:4d:a1:3d:db:
                    2e:44:3a:ff:e2:fe:60:86:ad:90:b9:91:f1:4b:94:
                    c9:43:4a:85:56:32:2a:ab:c9:2a:71:de:b7:fc:40:
                    e2:1b:aa:17:08:3a:65:4a:b8:70:d8:5c:b4:b6:ca:
                    4f:8d:a1:d0:03:04:20:4e:7e:23:26:20:85:45:e4:
                    21:ec:bb:f8:38:64:36:6d:7c:a1:8a:d8:af:14:1b:
                    72:bf:e8:cd:2f:2d:2c:0b:5a:39:4e:53:41:f8:a0:
                    33:91:be:90:64:18:1c:cf:c2:d9:a0:bf:78:db:88:
                    19:6b:be:0c:10:76:fc:96:fb:01:14:f5:90:8a:4d:
                    a8:0c:0b:10:29:1d:fb:45:e1:f2:59:b5:33:e5:20:
                    f8:76:22:c8:4d:d1:55:dc:de:10:79:66:b8:ff:fa:
                    ee:e4:03:a5:77:9d:50:a1:f2:60:35:84:e1:44:ef:
                    f4:be:be:a9:1b:17:5e:26:4a:ea:24:7d:ff:80:d2:
                    d6:95:4f:1b:b6:5e:22:c6:f2:81:17:bb:fe:ce:f6:
                    44:29:79:4e:ad:76:04:db:a7:8d:a4:db:8c:e3:cd:
                    bf:48:37:99:4c:1c:e0:26:0f:9f:8b:a4:1f:48:71:
                    44:d0:5f:ae:c6:93:83:ab:b8:7b:7b:b8:f3:1d:f1:
                    7d:34:3b:d5:32:f0:74:d9:ee:0b:cd:e7:a9:54:49:
                    2b:23:dc:1a:57:ae:a3:03:d8:9c:47:14:75:0c:47:
                    c6:be:e3:84:61:e7:15:b8:fe:0b:5f:53:a0:f6:a8:
                    92:e4:2c:c9:51:43:de:3f:be:0f:a6:c7:44:1f:81:
                    c9:c0:9d:d3:3a:42:2f:b0:52:59:47:c6:da:96:93:
                    ba:e7:11:f4:dd:ba:75:46:86:b5:ef:ee:49:34:92:
                    36:03:32:00:99:71:ed:83:1a:cd:3f:e3:79:7b:ee:
                    04:49:59:aa:01:ce:4d:67:0e:0f:88:e6:62:82:1e:
                    0b:07:01:cf:74:38:20:7b:0d:69:f5:2e:09:e5:84:
                    20:f3:82:15:7f:a4:0d:ae:35:da:de:f2:a9:30:6e:
                    3e:e3:72:26:b3:18:10:6c:d7:df:4c:fc:bf:e3:33:
                    8c:c6:e3:83:04:db:c9:a9:a8:41:d2:97:be:a0:ec:
                    bd:f1:89:18:eb:c5:e7:0b:fc:47:30:c8:e1:cd:e6:
                    54:cd:f1:e7:c3:23:51:48:4f:fd:89:49:43:6d:96:
                    e0:cc:69
                Exponent: 65537 (0x10001)
        Attributes:
            (none)
            Requested Extensions:
    Signature Algorithm: sha256WithRSAEncryption
    Signature Value:
        8d:0b:7b:fd:eb:6b:04:85:4f:b6:a8:81:8f:03:77:aa:26:7d:
        58:44:3a:af:1b:de:fe:73:52:38:7c:8b:e9:2d:47:34:93:31:
        9d:04:0b:08:3a:3c:92:72:cf:60:c6:3b:83:6c:9a:8d:7b:08:
        4b:13:44:8b:3c:14:58:f7:b6:26:8c:c8:d5:29:f7:f8:fb:98:
        a6:9f:78:6a:9a:f4:10:88:16:55:b8:83:ee:7d:1b:95:4c:02:
        77:10:9c:ca:61:01:c7:33:7f:65:81:6e:5e:18:25:a7:68:26:
        e0:5e:b5:6d:89:00:31:ed:21:bf:32:c8:13:4b:00:c6:a3:b5:
        5f:4d:13:4c:86:51:31:59:02:92:fd:88:30:3a:1f:ac:da:8b:
        82:25:b2:3d:7e:1d:1f:e3:55:aa:7a:26:1f:85:b6:86:87:34:
        9a:36:5e:55:0b:a9:6b:dd:77:56:4f:54:3e:27:ec:ac:a7:aa:
        ea:bb:86:40:a2:e8:af:88:77:5b:41:ec:42:0f:06:1e:7a:36:
        85:5f:36:14:d4:02:30:3c:27:8d:85:61:0c:93:83:a0:0d:cd:
        e7:c3:ac:02:d9:49:2e:58:a5:a1:24:33:56:a6:6c:e1:dc:dc:
        5b:11:32:65:84:08:70:7e:b2:52:2f:34:5e:83:46:45:8e:91:
        dc:4a:2d:31:2d:3e:3a:4a:03:a2:c4:02:d9:7f:6a:89:42:10:
        da:a4:7a:24:c2:2a:b5:fb:25:c8:1b:45:5f:f1:85:91:ca:0a:
        44:74:8f:60:44:86:e5:49:ab:d9:d1:d8:fa:0c:6d:1f:a8:7c:
        7c:6f:3f:66:0b:d9:46:5a:5c:4d:6e:79:7a:c2:eb:d2:02:a9:
        80:1e:66:53:b9:fd:5d:cf:6e:86:e7:58:7f:a4:74:31:cd:9f:
        b6:c2:b0:24:69:70:2f:9e:6e:4f:2d:74:53:8b:15:74:6c:08:
        bd:f0:b9:d2:e4:e0:a4:14:cf:b1:77:4d:6d:88:8a:ee:c7:6c:
        4b:15:c9:91:85:7d:a2:fa:cd:10:27:b3:27:fc:3b:f2:d1:86:
        57:33:0d:27:02:f2:c6:ab:46:8e:00:de:88:1f:59:d0:fd:6f:
        30:39:94:ba:af:17:89:37:df:0d:9e:1a:a7:d6:49:de:f5:40:
        61:e3:fa:52:70:3d:57:76:9f:fa:15:30:be:64:85:27:61:b0:
        02:9f:f6:20:c3:2d:1a:84:44:48:f6:08:db:f8:80:b9:ea:38:
        16:52:fe:2a:c0:f1:d9:8f:80:37:9f:fd:e2:ec:1e:99:c3:01:
        2d:b6:11:dd:5a:29:c8:02:2c:aa:d7:3f:78:c5:f2:fe:29:d7:
        98:f4:d1:1d:7e:9e:5d:8d
</code></pre></div>
</details>
</li>
<li>
<p>Time to <abbr title="certification authority-speak for create">mint</abbr> the certificate</p>
<div class="admonition info">
<p class="admonition-title">Due diligence check</p>
<p>For the purposes of this lab assume you've done a background check on the customer, checked their reviews on Yelp and NextDoor, looked at their Facebook page and LinkedIn profiles.  You're a little concerned with some of those college fraternity party pictures on Facebook, but, what the heck, their check has cleared the bank, so you decide to go ahead and <em><abbr title="certification authority-speak for create">mint</abbr></em> the certificate.</p>
</div>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>x509<span class="w"> </span>-req<span class="w"> </span>-in<span class="w"> </span>client-req.csr<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-days<span class="w"> </span><span class="m">365</span><span class="w"> </span>-CA<span class="w"> </span>ca.crt<span class="w"> </span>-CAkey<span class="w"> </span>ca-key.pem<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-CAcreateserial<span class="w"> </span>-out<span class="w"> </span>client.crt
</code></pre></div>
<details class="- example">
<summary>Output from creating the certificate</summary>
<div class="highlight"><pre><span></span><code>Certificate request self-signature ok
subject=C = US, O = IBM WSC zSystems and LinuxONE, CN = SE-enabled HPVS 2.1.3 Grep11 Server
</code></pre></div>
</details>
</li>
<li>
<p>Your quality control department asks you to display the certificate before sending it to the customer:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>x509<span class="w"> </span>-noout<span class="w"> </span>-text<span class="w"> </span>-in<span class="w"> </span>client.crt<span class="w"> </span>
</code></pre></div>
<details class="- example">
<summary>It should look similar to this [click to expand]</summary>
<div class="highlight"><pre><span></span><code>Certificate:
    Data:
        Version: 1 (0x0)
        Serial Number:
            29:4a:dd:c7:66:81:ab:5a:1d:bb:20:76:a0:25:34:90:21:93:40:6b
        Signature Algorithm: sha256WithRSAEncryption
        Issuer: C = US, O = IBM WSC zSystems and LinuxONE, CN = CA for rsyslog for SE-enabled KVM guests
        Validity
            Not Before: Feb 14 01:58:14 2023 GMT
            Not After : Feb 14 01:58:14 2024 GMT
        Subject: C = US, O = IBM WSC zSystems and LinuxONE, CN = SE-enabled HPVS 2.1.3 Grep11 Server
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                Public-Key: (4096 bit)
                Modulus:
                    00:b0:38:b1:27:ee:a2:9f:35:10:dd:74:b2:46:e6:
                    b8:2a:e4:c9:7f:7d:b3:1d:45:96:7d:bc:9d:5a:90:
                    06:64:da:b8:23:73:f3:99:46:54:a3:2a:a8:8e:db:
                    10:96:7e:de:04:65:81:ee:68:f1:5e:4d:a1:3d:db:
                    2e:44:3a:ff:e2:fe:60:86:ad:90:b9:91:f1:4b:94:
                    c9:43:4a:85:56:32:2a:ab:c9:2a:71:de:b7:fc:40:
                    e2:1b:aa:17:08:3a:65:4a:b8:70:d8:5c:b4:b6:ca:
                    4f:8d:a1:d0:03:04:20:4e:7e:23:26:20:85:45:e4:
                    21:ec:bb:f8:38:64:36:6d:7c:a1:8a:d8:af:14:1b:
                    72:bf:e8:cd:2f:2d:2c:0b:5a:39:4e:53:41:f8:a0:
                    33:91:be:90:64:18:1c:cf:c2:d9:a0:bf:78:db:88:
                    19:6b:be:0c:10:76:fc:96:fb:01:14:f5:90:8a:4d:
                    a8:0c:0b:10:29:1d:fb:45:e1:f2:59:b5:33:e5:20:
                    f8:76:22:c8:4d:d1:55:dc:de:10:79:66:b8:ff:fa:
                    ee:e4:03:a5:77:9d:50:a1:f2:60:35:84:e1:44:ef:
                    f4:be:be:a9:1b:17:5e:26:4a:ea:24:7d:ff:80:d2:
                    d6:95:4f:1b:b6:5e:22:c6:f2:81:17:bb:fe:ce:f6:
                    44:29:79:4e:ad:76:04:db:a7:8d:a4:db:8c:e3:cd:
                    bf:48:37:99:4c:1c:e0:26:0f:9f:8b:a4:1f:48:71:
                    44:d0:5f:ae:c6:93:83:ab:b8:7b:7b:b8:f3:1d:f1:
                    7d:34:3b:d5:32:f0:74:d9:ee:0b:cd:e7:a9:54:49:
                    2b:23:dc:1a:57:ae:a3:03:d8:9c:47:14:75:0c:47:
                    c6:be:e3:84:61:e7:15:b8:fe:0b:5f:53:a0:f6:a8:
                    92:e4:2c:c9:51:43:de:3f:be:0f:a6:c7:44:1f:81:
                    c9:c0:9d:d3:3a:42:2f:b0:52:59:47:c6:da:96:93:
                    ba:e7:11:f4:dd:ba:75:46:86:b5:ef:ee:49:34:92:
                    36:03:32:00:99:71:ed:83:1a:cd:3f:e3:79:7b:ee:
                    04:49:59:aa:01:ce:4d:67:0e:0f:88:e6:62:82:1e:
                    0b:07:01:cf:74:38:20:7b:0d:69:f5:2e:09:e5:84:
                    20:f3:82:15:7f:a4:0d:ae:35:da:de:f2:a9:30:6e:
                    3e:e3:72:26:b3:18:10:6c:d7:df:4c:fc:bf:e3:33:
                    8c:c6:e3:83:04:db:c9:a9:a8:41:d2:97:be:a0:ec:
                    bd:f1:89:18:eb:c5:e7:0b:fc:47:30:c8:e1:cd:e6:
                    54:cd:f1:e7:c3:23:51:48:4f:fd:89:49:43:6d:96:
                    e0:cc:69
                Exponent: 65537 (0x10001)
    Signature Algorithm: sha256WithRSAEncryption
    Signature Value:
        9f:41:62:18:0f:db:0a:84:f6:59:bc:cd:22:e4:73:d6:18:b0:
        d0:4e:2a:da:8f:5c:46:06:f1:80:f3:4b:5d:cf:fe:a2:a3:97:
        cc:bd:96:8e:d2:d4:58:ab:ac:56:dd:6f:12:3b:52:a8:df:e5:
        4b:26:8e:92:b3:ed:28:9a:c3:28:6d:8b:f9:13:b0:01:fa:ed:
        8f:48:08:08:07:ac:8f:61:00:fc:53:41:9e:d2:53:c5:b8:d7:
        f4:f2:c9:cc:87:58:2d:48:f3:34:be:fe:0d:dc:9e:b6:11:74:
        18:da:92:db:db:b3:c6:4f:10:63:6c:4c:fb:5f:86:36:9a:a8:
        58:a9:d3:d9:7c:e0:8d:2f:96:f3:64:85:bf:8d:39:28:d2:06:
        8b:63:93:d6:42:e3:ad:6d:5b:2e:d3:5a:3d:3c:af:1e:a2:61:
        a0:d7:c7:a0:4f:b7:16:f1:3b:94:44:23:d8:16:6f:d7:38:36:
        84:10:31:ac:e7:17:43:2a:24:04:26:5b:46:50:03:05:7c:8d:
        cc:77:f5:c1:c1:e3:a2:04:4a:6d:7c:b2:c7:1e:e3:68:b0:4e:
        24:92:63:dd:bd:87:3c:af:8c:63:a5:ea:2f:41:90:67:79:e3:
        31:89:41:54:be:aa:44:89:45:65:85:2e:5e:b9:8c:af:7c:7e:
        0f:08:9a:9b:97:7c:6f:fc:9f:30:e8:0c:30:c4:be:7a:0c:7d:
        d0:45:71:f2:a7:35:c3:f9:f1:b7:2c:9e:1d:a1:da:3b:70:59:
        5b:05:93:a3:fc:59:41:c5:db:bf:0f:20:ec:15:ef:64:61:7e:
        52:3b:6a:a1:69:0b:73:93:52:a4:a3:79:ca:b3:0c:b8:cd:2b:
        59:b5:19:03:2e:21:b8:b5:d3:8d:05:2e:d6:0d:b0:9a:7d:e9:
        f9:e7:2b:96:3a:a5:e3:05:b6:d8:0a:e2:ea:2f:b0:02:42:ba:
        a5:9c:1d:d8:29:7f:3b:bd:7c:73:1a:4a:ae:ca:3a:1d:50:16:
        3a:42:3c:0c:23:6a:15:ed:57:01:88:f3:dc:b7:e3:3e:55:48:
        31:07:4f:38:9c:dc:10:71:e8:8c:82:d3:9e:a6:97:ca:70:20:
        e9:70:31:b2:46:09:79:03:20:93:b0:16:af:07:67:eb:0c:4f:
        b0:c0:a9:e8:eb:bc:ab:74:37:93:76:89:92:82:f3:48:a5:a1:
        16:62:39:2d:d5:79:67:e2:ea:6e:a9:6e:40:e1:7f:da:01:df:
        f0:4f:6f:a0:36:80:ae:ab:a2:4d:07:6e:ba:14:bf:85:82:50:
        e1:3d:df:64:bc:91:3d:60:c4:90:8c:3b:6f:0f:11:31:a6:5f:
        4f:36:5a:69:04:05:88:b5
</code></pre></div>
</details>
</li>
<li>
<p>Now you send the certificate to the customer:</p>
<div class="highlight"><pre><span></span><code>scp<span class="w"> </span>client.crt<span class="w"> </span><span class="si">${</span><span class="nv">StudentID</span><span class="si">}</span>@192.168.22.64:./rsyslogClientWork/.
</code></pre></div>
<p>You may be prompted to type <em>yes</em> before connecting and you may be asked to enter an instructor-provided password, as shown in the example below:</p>
<details class="- example">
<summary>Example prompt and output from sending file</summary>
<div class="highlight"><pre><span></span><code>The authenticity of host &#39;192.168.22.64 (192.168.22.64)&#39; can&#39;t be established.
ED25519 key fingerprint is SHA256:IJQFhwQnu7GDWPZmz+ICLIIld9FBLJcD+anb2Bu9y7w.
This key is not known by any other names
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added &#39;192.168.22.64&#39; (ED25519) to the list of known hosts.
student02@192.168.22.64&#39;s password: 
client.crt                                                              100% 1907     9.7MB/s   00:00 
</code></pre></div>
</details>
</li>
<li>
<p>Now switch back to your terminal tab or window for your session on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host.</p>
</li>
<li>
<p>If you are doing the lab in one sitting, in order, then you are still logged in on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host.  If you need to login for any reason the command is <code>ssh -l ${StudentID} 192.168.22.64</code>.  Steps 15 and 16 will be performed on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> 8.5 host.</p>
</li>
<li>
<p>Switch to the directory where the <abbr title="certification authority">CA</abbr> "sent" your new certificate and list the files:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/rsyslogClientWork/<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>ls<span class="w"> </span>-ltr
</code></pre></div>
<details class="- example">
<summary>File listing shows your client certificate (client.crt)</summary>
<div class="highlight"><pre><span></span><code>total<span class="w"> </span><span class="m">16</span>
-rw-------<span class="w"> </span><span class="m">1</span><span class="w"> </span>student02<span class="w"> </span>hpvs_students<span class="w"> </span><span class="m">3247</span><span class="w"> </span>Feb<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">20</span>:42<span class="w"> </span>client-key.pem
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>student02<span class="w"> </span>hpvs_students<span class="w">  </span><span class="m">192</span><span class="w"> </span>Feb<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">20</span>:44<span class="w"> </span>client.cnf
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>student02<span class="w"> </span>hpvs_students<span class="w"> </span><span class="m">1691</span><span class="w"> </span>Feb<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">20</span>:45<span class="w"> </span>client-req.csr
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>student02<span class="w"> </span>hpvs_students<span class="w"> </span><span class="m">1907</span><span class="w"> </span>Feb<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">21</span>:06<span class="w"> </span>client.crt
</code></pre></div>
</details>
</li>
<li>
<p>Display your certificate in human-readable form to make sure your <abbr title="certification authority">CA</abbr> did their job correctly:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>x509<span class="w"> </span>-noout<span class="w"> </span>-text<span class="w"> </span>-issuer<span class="w"> </span>-subject<span class="w"> </span>-in<span class="w"> </span>client.crt
</code></pre></div>
<details class="- example">
<summary>Example display of certificate</summary>
<div class="highlight"><pre><span></span><code>Certificate:
    Data:
        Version: 1 (0x0)
        Serial Number:
            29:4a:dd:c7:66:81:ab:5a:1d:bb:20:76:a0:25:34:90:21:93:40:6b
        Signature Algorithm: sha256WithRSAEncryption
        Issuer: C = US, O = IBM WSC zSystems and LinuxONE, CN = CA for rsyslog for SE-enabled KVM guests
        Validity
            Not Before: Feb 14 01:58:14 2023 GMT
            Not After : Feb 14 01:58:14 2024 GMT
        Subject: C = US, O = IBM WSC zSystems and LinuxONE, CN = SE-enabled HPVS 2.1.3 Grep11 Server
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                RSA Public-Key: (4096 bit)
                Modulus:
                    00:b0:38:b1:27:ee:a2:9f:35:10:dd:74:b2:46:e6:
                    b8:2a:e4:c9:7f:7d:b3:1d:45:96:7d:bc:9d:5a:90:
                    06:64:da:b8:23:73:f3:99:46:54:a3:2a:a8:8e:db:
                    10:96:7e:de:04:65:81:ee:68:f1:5e:4d:a1:3d:db:
                    2e:44:3a:ff:e2:fe:60:86:ad:90:b9:91:f1:4b:94:
                    c9:43:4a:85:56:32:2a:ab:c9:2a:71:de:b7:fc:40:
                    e2:1b:aa:17:08:3a:65:4a:b8:70:d8:5c:b4:b6:ca:
                    4f:8d:a1:d0:03:04:20:4e:7e:23:26:20:85:45:e4:
                    21:ec:bb:f8:38:64:36:6d:7c:a1:8a:d8:af:14:1b:
                    72:bf:e8:cd:2f:2d:2c:0b:5a:39:4e:53:41:f8:a0:
                    33:91:be:90:64:18:1c:cf:c2:d9:a0:bf:78:db:88:
                    19:6b:be:0c:10:76:fc:96:fb:01:14:f5:90:8a:4d:
                    a8:0c:0b:10:29:1d:fb:45:e1:f2:59:b5:33:e5:20:
                    f8:76:22:c8:4d:d1:55:dc:de:10:79:66:b8:ff:fa:
                    ee:e4:03:a5:77:9d:50:a1:f2:60:35:84:e1:44:ef:
                    f4:be:be:a9:1b:17:5e:26:4a:ea:24:7d:ff:80:d2:
                    d6:95:4f:1b:b6:5e:22:c6:f2:81:17:bb:fe:ce:f6:
                    44:29:79:4e:ad:76:04:db:a7:8d:a4:db:8c:e3:cd:
                    bf:48:37:99:4c:1c:e0:26:0f:9f:8b:a4:1f:48:71:
                    44:d0:5f:ae:c6:93:83:ab:b8:7b:7b:b8:f3:1d:f1:
                    7d:34:3b:d5:32:f0:74:d9:ee:0b:cd:e7:a9:54:49:
                    2b:23:dc:1a:57:ae:a3:03:d8:9c:47:14:75:0c:47:
                    c6:be:e3:84:61:e7:15:b8:fe:0b:5f:53:a0:f6:a8:
                    92:e4:2c:c9:51:43:de:3f:be:0f:a6:c7:44:1f:81:
                    c9:c0:9d:d3:3a:42:2f:b0:52:59:47:c6:da:96:93:
                    ba:e7:11:f4:dd:ba:75:46:86:b5:ef:ee:49:34:92:
                    36:03:32:00:99:71:ed:83:1a:cd:3f:e3:79:7b:ee:
                    04:49:59:aa:01:ce:4d:67:0e:0f:88:e6:62:82:1e:
                    0b:07:01:cf:74:38:20:7b:0d:69:f5:2e:09:e5:84:
                    20:f3:82:15:7f:a4:0d:ae:35:da:de:f2:a9:30:6e:
                    3e:e3:72:26:b3:18:10:6c:d7:df:4c:fc:bf:e3:33:
                    8c:c6:e3:83:04:db:c9:a9:a8:41:d2:97:be:a0:ec:
                    bd:f1:89:18:eb:c5:e7:0b:fc:47:30:c8:e1:cd:e6:
                    54:cd:f1:e7:c3:23:51:48:4f:fd:89:49:43:6d:96:
                    e0:cc:69
                Exponent: 65537 (0x10001)
    Signature Algorithm: sha256WithRSAEncryption
        9f:41:62:18:0f:db:0a:84:f6:59:bc:cd:22:e4:73:d6:18:b0:
        d0:4e:2a:da:8f:5c:46:06:f1:80:f3:4b:5d:cf:fe:a2:a3:97:
        cc:bd:96:8e:d2:d4:58:ab:ac:56:dd:6f:12:3b:52:a8:df:e5:
        4b:26:8e:92:b3:ed:28:9a:c3:28:6d:8b:f9:13:b0:01:fa:ed:
        8f:48:08:08:07:ac:8f:61:00:fc:53:41:9e:d2:53:c5:b8:d7:
        f4:f2:c9:cc:87:58:2d:48:f3:34:be:fe:0d:dc:9e:b6:11:74:
        18:da:92:db:db:b3:c6:4f:10:63:6c:4c:fb:5f:86:36:9a:a8:
        58:a9:d3:d9:7c:e0:8d:2f:96:f3:64:85:bf:8d:39:28:d2:06:
        8b:63:93:d6:42:e3:ad:6d:5b:2e:d3:5a:3d:3c:af:1e:a2:61:
        a0:d7:c7:a0:4f:b7:16:f1:3b:94:44:23:d8:16:6f:d7:38:36:
        84:10:31:ac:e7:17:43:2a:24:04:26:5b:46:50:03:05:7c:8d:
        cc:77:f5:c1:c1:e3:a2:04:4a:6d:7c:b2:c7:1e:e3:68:b0:4e:
        24:92:63:dd:bd:87:3c:af:8c:63:a5:ea:2f:41:90:67:79:e3:
        31:89:41:54:be:aa:44:89:45:65:85:2e:5e:b9:8c:af:7c:7e:
        0f:08:9a:9b:97:7c:6f:fc:9f:30:e8:0c:30:c4:be:7a:0c:7d:
        d0:45:71:f2:a7:35:c3:f9:f1:b7:2c:9e:1d:a1:da:3b:70:59:
        5b:05:93:a3:fc:59:41:c5:db:bf:0f:20:ec:15:ef:64:61:7e:
        52:3b:6a:a1:69:0b:73:93:52:a4:a3:79:ca:b3:0c:b8:cd:2b:
        59:b5:19:03:2e:21:b8:b5:d3:8d:05:2e:d6:0d:b0:9a:7d:e9:
        f9:e7:2b:96:3a:a5:e3:05:b6:d8:0a:e2:ea:2f:b0:02:42:ba:
        a5:9c:1d:d8:29:7f:3b:bd:7c:73:1a:4a:ae:ca:3a:1d:50:16:
        3a:42:3c:0c:23:6a:15:ed:57:01:88:f3:dc:b7:e3:3e:55:48:
        31:07:4f:38:9c:dc:10:71:e8:8c:82:d3:9e:a6:97:ca:70:20:
        e9:70:31:b2:46:09:79:03:20:93:b0:16:af:07:67:eb:0c:4f:
        b0:c0:a9:e8:eb:bc:ab:74:37:93:76:89:92:82:f3:48:a5:a1:
        16:62:39:2d:d5:79:67:e2:ea:6e:a9:6e:40:e1:7f:da:01:df:
        f0:4f:6f:a0:36:80:ae:ab:a2:4d:07:6e:ba:14:bf:85:82:50:
        e1:3d:df:64:bc:91:3d:60:c4:90:8c:3b:6f:0f:11:31:a6:5f:
        4f:36:5a:69:04:05:88:b5
issuer=C = US, O = IBM WSC zSystems and LinuxONE, CN = CA for rsyslog for SE-enabled KVM guests
subject=C = US, O = IBM WSC zSystems and LinuxONE, CN = SE-enabled HPVS 2.1.3 Grep11 Server
</code></pre></div>
</details>
</li>
</ol>
<p>Click the <em>Next</em> link at the bottom of the page to continue to the next part of the lab, where you will create the <em>contract</em> that HPVS 2.1.3 expects, so that you can run your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server.</p></section><section class="print-page" id="lab-creategrep11contract"><h1 id="lab-creategrep11contract-create-contract-for-grep11-server">Create Contract for <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server<a class="headerlink" href="#lab-creategrep11contract-create-contract-for-grep11-server" title="Permanent link">&para;</a></h1>
<h2 id="lab-creategrep11contract-overview-of-this-section">Overview of this section<a class="headerlink" href="#lab-creategrep11contract-overview-of-this-section" title="Permanent link">&para;</a></h2>
<p>IBM provides the <abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr> feature on z15 and newer generations of its IBM zSystems and LinuxONE servers.  Currently, that's z15 and LinuxONE III for the "z15" generation and z16 and LinuxONE Emperor 4 for the "z16" generation.</p>
<p>You could create your own <abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr>-enabled KVM guests and run a workload in it without Hyper Protect Virtual Servers 2.1.3.  However, there's non-trivial work involved in setting this up.  HPVS 2.1.3 has done that hard work for you, and provided a KVM guest image that will run your application workload as an <abbr title="Open Container Initiative: an open governance structure for the express purpose of creating open industry standards around container formats and runtimes. There are 3 specifications: the Runtime Specification (runtime-spec), the Image Specification (image-spec) and the Distribution Specification (distribution-spec)">OCI</abbr>-compliant (again, think "Docker" in the popular vernacular) <abbr title="a running instance of an OCI image.">container</abbr> within the HPVS 2.1.3 KVM guest.  There is still some work involved in setting up the contract that HPVS 2.1.3 expects- but this is work closer to the <em>application</em> or <em>business</em> level. There is also added value in HPVS 2.1.3 in areas such as:</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> logging</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> attestation</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> verification during boot</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> encryption</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> persistent disk protection</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> separation of duties</li>
</ul>
<p>This lab covers the features that are checked in the list above.  (We won't rest on our laurels until we've built this lab out to cover everything under the sun, but, as the saying goes, <em>Rome wasn't built in a day</em>).</p>
<p>One of the things we just mentioned in the previous paragraph was <em>separation of duties</em>. In a real world situation, multiple personas could create different portions of the contract:</p>
<ul>
<li>an <em>application owner</em> deployer might create the <em>workload</em> section of the contract</li>
<li>a <em>systems administrator</em> might create the <em>environment</em> section of the contract</li>
</ul>
<p>Then, you could imagine the following scenario taking place:</p>
<ol>
<li>application owner can encrypt their piece of the contract such that it can only be decrypted within the HPVS 2.1.3 runtime</li>
<li>application owner passes their encrypted piece of the contract to the <em>systems administrator</em></li>
<li>the <em>systems administrator</em> encrypts their own section</li>
<li>the <em>systems administrator</em> combines the two sections and signs the resultant contract so that it can be verified by the HPVS 2.1.3 runtime.</li>
</ol>
<div class="admonition question">
<p class="admonition-title">Your inquiring mind may say, well that's all well and good, but what about the disk storage of the machine?</p>
<p>If your workload requires persistent disk storage (to survive a <abbr title="a running instance of an OCI image.">container</abbr> restart) then each of the two personas supplies part of a seed that is used in the calculation of an encryption key for the persistent disk. Neither persona has knowledge of the other's part of the seed if it is passed between parties encrypted, so that no human has the ability to decrypt the persistent disk.  The HPVS developers have thought through security very carefully! <img alt="🤓" class="twemoji" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f913.svg" title=":nerd_face:" /> </p>
</div>
<p>Now our lab does not include all of the above features (yet)- for example, the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server is stateless (this is a feature, not a bug) so we do not need persistent disk storage.  And for this lab, you have and will continue to wear many hats, including both the <em>application owner</em> workload deployer and the <em>system administrator</em> environment deployer.  We are not going to cover <em>attestation</em> in this lab either, but hope to do so in a future lab.</p>
<h2 id="lab-creategrep11contract-creation-of-directory-structure-for-contract">Creation of directory structure for contract<a class="headerlink" href="#lab-creategrep11contract-creation-of-directory-structure-for-contract" title="Permanent link">&para;</a></h2>
<p>This command will create the directory structure expected by the lab instructions:</p>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/contract/grep11Server/<span class="o">{</span>workload,environment<span class="o">}</span>
</code></pre></div>
<p>A contract requires a <em>workload</em> section and an <em>environment</em> section, and they each get their own directory. Then the sections are packaged together, and signed, and the signature is added as the third section.  This final result- the contract-  will be stored in your <code>${HOME}/contract/grep11Server</code> directory.</p>
<h2 id="lab-creategrep11contract-create-workload-section-of-the-contract">Create workload section of the contract<a class="headerlink" href="#lab-creategrep11contract-create-workload-section-of-the-contract" title="Permanent link">&para;</a></h2>
<p>Switch to your workload directory:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/contract/grep11Server/workload
</code></pre></div>
<p>HPVS expects the contract to specify an <abbr title="Open Container Initiative: an open governance structure for the express purpose of creating open industry standards around container formats and runtimes. There are 3 specifications: the Runtime Specification (runtime-spec), the Image Specification (image-spec) and the Distribution Specification (distribution-spec)">OCI</abbr> <abbr title="a running instance of an OCI image.">container</abbr> specified by a <em><abbr title="a tool for defining and running multi-container Docker applications. With Compose, you use a YAML file to configure your application’s services. Then, with a single command, you create and start all the services from your configuration.">Docker Compose</abbr></em> file.  The <em><abbr title="a tool for defining and running multi-container Docker applications. With Compose, you use a YAML file to configure your application’s services. Then, with a single command, you create and start all the services from your configuration.">Docker Compose</abbr></em> file specifies an <abbr title="Open Container Initiative: an open governance structure for the express purpose of creating open industry standards around container formats and runtimes. There are 3 specifications: the Runtime Specification (runtime-spec), the Image Specification (image-spec) and the Distribution Specification (distribution-spec)">OCI</abbr> image to run and other information necessary to configure the resulting <abbr title="a running instance of an OCI image.">container</abbr>. Your workload is the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server, so, yes, there's an <abbr title="Open Container Initiative: an open governance structure for the express purpose of creating open industry standards around container formats and runtimes. There are 3 specifications: the Runtime Specification (runtime-spec), the Image Specification (image-spec) and the Distribution Specification (distribution-spec)">OCI</abbr> image for that. The <abbr title="a running instance of an OCI image.">container</abbr> that runs the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server will be configured with information such as:</p>
<ul>
<li>the port it listens on</li>
<li>a configuration file that describes the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> server</li>
<li>another configuration file that describes its connection to the <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> server</li>
<li>certificates and keys to enable TLS communication with the <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> server</li>
<li>certificates and keys to enable TLS communication with clients that call the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server</li>
</ul>
<p>That's right, two more "sets" of X509 certificates, egads!!  You've already worked with one set for the <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> service, so we'll offer the commands for these next two sets without as much commentary.</p>
<div class="admonition information">
<p class="admonition-title">A brief history of the term '<abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr>', or, you say to-MAY-toe and I say to-MAH-toe<p>You will not see the term <em><abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr></em> in any official product documentation.  Try googling it. <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> is the instructor's abbreviation for <em>Crypto Express Network API for <abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr> Enclaves</em>.  The product documentation often uses the term <em>c16</em>.  When the instructor inquired to the developers what <em>c16</em> stood for, because he is sure that customers will ask that question, and was told that it doesn't stand for anything, he coined this acronym and will continue to use it until he is threatened with either legal action or involuntary termination of employment.  </p>
</p>
</div>
<p>You are going to put the building blocks for the workload section of the contract together in the following order:</p>
<ol>
<li>
<p>You will create a docker-compose file</p>
<ol>
<li>docker-compose.yml - this file will reference each of the files listed in items 2-5 of this list</li>
</ol>
</li>
<li>
<p>You will create a <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server configuration file</p>
<ol>
<li>ep11server.yaml</li>
</ol>
</li>
<li>
<p>You will create a configuration file for the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server to the <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> server connection</p>
<ol>
<li>c16client.yaml</li>
</ol>
</li>
<li>
<p>You will create x509 material to enable secure communication between <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> clients and the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server </p>
<ol>
<li>
<p>grep11-ca.pem</p>
</li>
<li>
<p>grep11-server.pem</p>
</li>
<li>
<p>grep11-server.key</p>
</li>
</ol>
</li>
<li>
<p>You will create or obtain x509 material to enable secure communication between <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server and the <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> server </p>
<ol>
<li>
<p>c16-ca.pem - this file has already been created by the instructors</p>
</li>
<li>
<p>c16-client.key</p>
</li>
<li>
<p>c16-client.pem - the instructors will create this file upon your request in a subsequent step in the lab</p>
</li>
</ol>
</li>
</ol>
<p>Let's get started!</p>
<h3 id="lab-creategrep11contract-create-docker-compose-file">Create docker-compose file<a class="headerlink" href="#lab-creategrep11contract-create-docker-compose-file" title="Permanent link">&para;</a></h3>
<p>Create a directory and switch to it:</p>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>-p<span class="w"> </span>compose<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>compose
</code></pre></div>
<p>Create the docker-compose file:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; docker-compose.yml</span>
<span class="s">services:</span>
<span class="s">  $(whoami)-ep11server:</span>
<span class="s">    user: &quot;0&quot;</span>
<span class="s">    image: quay.io/gmoney23/grep11server@sha256:a864174faadc39650e61ca45d8a3ceb01ea88602cfe6f4bd4e35c48e60556900</span>
<span class="s">    ports:</span>
<span class="s">        - 9876:9876</span>
<span class="s">    volumes:</span>
<span class="s">        - ./c16client.yaml:/etc/c16/c16client.yaml</span>
<span class="s">        - ./c16-ca.pem:/cfg/c16-ca.pem</span>
<span class="s">        - ./c16-client.key:/cfg/c16-client.key</span>
<span class="s">        - ./c16-client.pem:/cfg/c16-client.pem</span>
<span class="s">        - ./grep11server.yaml:/etc/ep11server/ep11server.yaml</span>
<span class="s">        - ./grep11-ca.pem:/cfg/grep11-ca.pem</span>
<span class="s">        - ./grep11-server.pem:/cfg/grep11-server.pem</span>
<span class="s">        - ./grep11-server.key:/cfg/grep11-server.key</span>

<span class="s">EOF</span>
</code></pre></div>
<p>Notice the value of the <em>image</em> key.  This is the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server <abbr title="Open Container Initiative: an open governance structure for the express purpose of creating open industry standards around container formats and runtimes. There are 3 specifications: the Runtime Specification (runtime-spec), the Image Specification (image-spec) and the Distribution Specification (distribution-spec)">OCI</abbr> image provided with the Crypto Express Network API for <abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr> Enclaves 1.1.1.3 (<abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr>) that Garrett (<em>gmoney23</em>) has uploaded to his account on Quay.io for this lab. (Not for your production usage as it could disappear at any time).</p>
<p>Notice the list of eight items under the <em>volumes</em> section. The left side of each entry in the list specifies the name of the file on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host.  The value after the ':' specifies where that file is mapped to within the <abbr title="Open Container Initiative: an open governance structure for the express purpose of creating open industry standards around container formats and runtimes. There are 3 specifications: the Runtime Specification (runtime-spec), the Image Specification (image-spec) and the Distribution Specification (distribution-spec)">OCI</abbr> <abbr title="a running instance of an OCI image.">container</abbr> that will run in the HPVS 2.1.3 guest.  Taking the first item in the list as an example, you will create a file named <em>c16client.yaml</em> and then within the <abbr title="Open Container Initiative: an open governance structure for the express purpose of creating open industry standards around container formats and runtimes. There are 3 specifications: the Runtime Specification (runtime-spec), the Image Specification (image-spec) and the Distribution Specification (distribution-spec)">OCI</abbr> <abbr title="a running instance of an OCI image.">container</abbr> it will be available at <em>/etc/c16/c16client.yaml</em>.  (As an aside, you can also map entire directories from your host to a Docker <abbr title="a running instance of an OCI image.">container</abbr>, although this example only maps individual files).</p>
<h3 id="lab-creategrep11contract-create-the-configuration-file-for-the-grep11-server">Create the configuration file for the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> server<a class="headerlink" href="#lab-creategrep11contract-create-the-configuration-file-for-the-grep11-server" title="Permanent link">&para;</a></h3>
<p>Run this command to create the configuration file for the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> server:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; grep11server.yaml</span>
<span class="s">#</span>
<span class="s"># Copyright IBM Corp. All Rights Reserved.</span>
<span class="s">#</span>
<span class="s"># SPDX-License-Identifier: Apache-2.0</span>
<span class="s">#</span>

<span class="s">logging:</span>
<span class="s">  # Package log levels</span>
<span class="s">  # Levels: info, warning, debug, error, fatal, trace, and panic</span>
<span class="s">  levels:</span>
<span class="s">    entry: debug</span>
<span class="s">    # example below</span>
<span class="s">    # entry: info</span>

<span class="s">###################################</span>
<span class="s">## GRPC SERVICES TALKING TO GREP11 server ##</span>
<span class="s">ep11crypto:</span>
<span class="s">  enabled: true</span>
<span class="s">  connection:</span>
<span class="s">    address: 0.0.0.0</span>
<span class="s">    port: 9876</span>

<span class="s">    # Secure connection TLS options</span>
<span class="s">    tls:</span>
<span class="s">        enabled: true</span>
<span class="s">        # certfile, keyfilie and cacert refer to the pem files that holds the certs</span>
<span class="s">        certfile: /cfg/grep11-server.pem</span>
<span class="s">        keyfile: /cfg/grep11-server.key</span>

<span class="s">        mutual: true</span>
<span class="s">        cacert: /cfg/grep11-ca.pem</span>

<span class="s">        # same as above, but instead of filename, contents of PEM can be in an environment</span>
<span class="s">        # variable (i.e. to avoid mounting files into docker container)</span>
<span class="s">        cacertbytes:</span>
<span class="s">        certfilebytes:</span>
<span class="s">        keyfilebytes:</span>

<span class="s">    # Server TCP/IP connection monitoring</span>
<span class="s">    # serverKeepaliveTime is the duration in seconds after which if the server</span>
<span class="s">    # does not see any activity from the client it pings the client to see</span>
<span class="s">    # if it is alive</span>
<span class="s">    # serverKeepaliveTimeout is the duration the server waits for a response</span>
<span class="s">    # from the client after sending a ping before closing the connection</span>
<span class="s">    keepalive:</span>
<span class="s">        serverKeepaliveTime: 30</span>
<span class="s">        serverKeepaliveTimeout: 5</span>

<span class="s">    # Comma-separated list of card.domain tuples. card and domain are hex numbers</span>
<span class="s">    # i.e. &quot;08.0016,0a.0016&quot; corresponds to 22nd (x16) domain on eighth card and 22nd domain on tenth (x0a) card</span>
<span class="s">  domain: &quot;08.0016,0a.0016&quot;</span>
<span class="s">EOF</span>
</code></pre></div>
<h3 id="lab-creategrep11contract-create-the-client-configuration-file-for-the-cena4see-server">Create the client configuration file for the <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> server.<a class="headerlink" href="#lab-creategrep11contract-create-the-client-configuration-file-for-the-cena4see-server" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Run this command to create the client configuration for the the <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> server:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; c16client.yaml</span>
<span class="s">#trace, debug, info, warn, err, error, critical, off</span>
<span class="s">loglevel: &#39;debug&#39;</span>
<span class="s">servers:</span>
<span class="s">  - hostname: 192.168.22.80</span>
<span class="s">    port: 9001</span>
<span class="s">    mTLS: true</span>
<span class="s">    server_cert_file: &quot;/cfg/c16-ca.pem&quot;</span>
<span class="s">    client_key_file: &quot;/cfg/c16-client.key&quot;</span>
<span class="s">    client_cert_file: &quot;/cfg/c16-client.pem&quot;</span>

<span class="s">EOF</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Debug log level for lab purposes</p>
<p>For the two configuration files you just created, you set the log level to debug. We would probably not recommend a log level of debug for most normal production use cases but you won't be trodding too heavily on the server in the lab and it provides extra information for your current pursuit of knowledge.</p>
</div>
<p>The value for the hostname in <em>c16client.yaml</em>,  <em>192.168.22.80</em>, is the IP address of the <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> server running on the <abbr title="Secure Service Container- a type of LPAR introduced by IBM with the z14 hardware generation.  Hyper Protect Virtual Servers v1.x was built on SSC technology, and the Crypto Express Network API for Secure Execution Enclaves component of HPVS v2.x is also built on SSC technology.">SSC</abbr> LPAR used in the lab.</p>
</li>
<li>
<p>Pick out the names of the files you will be creating from the <em>grep11server.yaml</em> file with the following command:</p>
<div class="highlight"><pre><span></span><code>grep<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;file:&#39;</span><span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;cacert:&#39;</span><span class="w"> </span>grep11server.yaml
</code></pre></div>
<p>Your output should look like this:</p>
<details class="- example">
<summary>You will create these files in the lab [Click me]</summary>
<div class="highlight"><pre><span></span><code>    certfile: /cfg/grep11-server.pem
    keyfile: /cfg/grep11-server.key
    cacert: /cfg/grep11-ca.pem
</code></pre></div>
</details>
</li>
<li>
<p>Pick out the names of the files you will be creating or getting from the instructors from the <em>c16client.yaml</em> file with the following command:</p>
<div class="highlight"><pre><span></span><code>grep<span class="w"> </span><span class="s1">&#39;file:&#39;</span><span class="w"> </span>c16client.yaml
</code></pre></div>
<details class="- example">
<summary>You get the first file and create the other two [Click me]</summary>
<div class="highlight"><pre><span></span><code>    server_cert_file: &quot;/cfg/c16-ca.pem&quot;
    client_key_file: &quot;/cfg/c16-client.key&quot;
    client_cert_file: &quot;/cfg/c16-client.pem&quot;
</code></pre></div>
</details>
</li>
</ol>
<h3 id="lab-creategrep11contract-create-x509-material-for-grep11-client-to-grep11-server-communication">Create x509 material for <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> client to <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server communication<a class="headerlink" href="#lab-creategrep11contract-create-x509-material-for-grep11-client-to-grep11-server-communication" title="Permanent link">&para;</a></h3>
<p>Your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server acts as both a server and a client. Its primary purpose is to be a server- to serve requests from <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> clients.  But in order to get its job done, the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server must send requests to the <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> server, so it is a client to the <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> server.  (It is also a client to the <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> service so that it can send its log messages there). </p>
<p>In this section, you'll set up the material to enable the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server's role as a, well, <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server!</p>
<ol>
<li>
<p>Create and change to a new directory which you will use for your self-signed <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server <abbr title="certification authority">CA</abbr>:</p>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/GREP11CAwork<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/GREP11CAwork
</code></pre></div>
</li>
<li>
<p>Create an RSA private key for your self-signed <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server <abbr title="certification authority">CA</abbr>:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>genrsa<span class="w"> </span>-out<span class="w"> </span>grep11-ca-key.pem<span class="w"> </span><span class="m">2048</span>
</code></pre></div>
</li>
<li>
<p>Create a configuration file to assist in creation of your self-signed <abbr title="certification authority">CA</abbr> for the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; ca.cnf</span>

<span class="s">[ req ]</span>
<span class="s">default_bits           = 2048</span>
<span class="s">default_keyfile        = keyfile.pem</span>
<span class="s">distinguished_name     = req_distinguished_name</span>
<span class="s">attributes             = req_attributes</span>
<span class="s">prompt                 = no</span>
<span class="s">output_password        = mypass</span>

<span class="s">[ req_distinguished_name ]</span>
<span class="s">C                      = US</span>
<span class="s">ST                     = Virginia</span>
<span class="s">L                      = Herndon</span>
<span class="s">O                      = IBM</span>
<span class="s">OU                     = Washington Systems Center - IBM zSystems and LinuxONE</span>
<span class="s">CN                     = WSC $(whoami) HPVS CA</span>
<span class="s">emailAddress           = student@notreal.email.com</span>

<span class="s">[ req_attributes ]</span>
<span class="s">challengePassword              = A challenge password</span>

<span class="s">[ x509_extensions ]</span>
<span class="s">subjectKeyIdentifier   = hash</span>
<span class="s">authorityKeyIdentifier = keyid,issuer</span>
<span class="s">basicConstraints       = critical,CA:TRUE</span>

<span class="s">EOF</span>
</code></pre></div>
</li>
<li>
<p>Create your self-signed <abbr title="certification authority">CA</abbr> for the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server. Notice it uses the private key you created two commands ago and refers to the configuration file your last command created:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>req<span class="w"> </span>-new<span class="w"> </span>-x509<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-key<span class="w"> </span>grep11-ca-key.pem<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-out<span class="w"> </span>grep11-ca.pem<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-days<span class="w"> </span><span class="m">395</span><span class="w"> </span>-config<span class="w"> </span>ca.cnf<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-extensions<span class="w"> </span>x509_extensions
</code></pre></div>
</li>
<li>
<p>Display the <abbr title="certification authority">CA</abbr> certificate that you just created:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>x509<span class="w"> </span>-noout<span class="w"> </span>-text<span class="w"> </span>-in<span class="w"> </span>grep11-ca.pem
</code></pre></div>
<p>Your output will look similar to this:</p>
<details class="- example">
<summary>Example of display of certificate:</summary>
<div class="highlight"><pre><span></span><code>Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            61:1d:d1:10:f4:34:bd:84:7b:ca:0b:59:2b:cf:1e:e2:16:5a:01:5c
        Signature Algorithm: sha256WithRSAEncryption
        Issuer: C = US, ST = Virginia, L = Herndon, O = IBM, OU = Washington Systems Center - IBM zSystems and LinuxONE, CN = WSC student02 HPVS CA, emailAddress = student@notreal.email.com.com
        Validity
            Not Before: Feb 14 14:36:41 2023 GMT
            Not After : Mar 15 14:36:41 2024 GMT
        Subject: C = US, ST = Virginia, L = Herndon, O = IBM, OU = Washington Systems Center - IBM zSystems and LinuxONE, CN = WSC student02 HPVS CA, emailAddress = student@notreal.email.com
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                RSA Public-Key: (2048 bit)
                Modulus:
                    00:a6:56:f3:c4:81:58:e0:d5:cd:87:28:38:bc:6b:
                    e3:0f:b4:c7:61:2e:bd:4e:17:b0:a2:65:2e:ad:63:
                    d1:2a:b4:a2:45:d6:f3:9d:ba:8a:0d:66:72:fd:15:
                    b1:d3:4c:08:ff:3c:8d:c0:c4:23:86:c2:65:18:19:
                    35:03:bb:3c:d5:e2:7a:66:47:4a:6e:d1:eb:37:3f:
                    f7:62:c0:35:45:5f:38:7a:2f:4a:1e:aa:f7:8b:4a:
                    55:6f:bb:b4:e3:1e:a6:62:20:55:df:1f:04:1e:70:
                    73:c5:32:b5:5e:77:6f:45:6d:43:fd:01:76:84:83:
                    6f:c8:9a:6e:20:27:81:94:af:e7:fb:7c:c0:8c:91:
                    bf:f1:47:d3:05:a7:56:69:29:bd:1b:59:0d:54:c0:
                    53:e1:d8:58:a9:f1:d1:fb:d4:c0:e1:9d:f3:f2:36:
                    51:ff:60:2a:91:28:9d:07:5e:27:5f:3a:68:f0:7e:
                    5a:29:cb:1a:5e:b1:c5:98:e1:14:fa:38:29:67:81:
                    4e:e3:4b:a2:bb:c7:c3:b5:24:c4:d4:c5:23:d8:70:
                    2b:98:97:e2:ef:26:32:5a:ea:02:ea:3f:48:90:7f:
                    a5:6f:b3:49:68:0a:31:d6:c9:18:c8:57:f7:7c:e0:
                    4d:e4:46:f7:3c:30:7a:4a:16:df:f4:c9:b7:d8:c0:
                    e7:bb
                Exponent: 65537 (0x10001)
        X509v3 extensions:
            X509v3 Subject Key Identifier: 
                E3:62:2B:39:9A:DB:57:77:DE:A2:C5:7E:11:A6:76:22:5F:F7:91:9D
            X509v3 Authority Key Identifier: 
                keyid:E3:62:2B:39:9A:DB:57:77:DE:A2:C5:7E:11:A6:76:22:5F:F7:91:9D

            X509v3 Basic Constraints: critical
                CA:TRUE
    Signature Algorithm: sha256WithRSAEncryption
        88:11:95:13:b8:fb:f8:b0:67:2c:a7:8f:d5:7b:27:24:e1:77:
        45:4a:9d:af:fe:8b:34:f8:84:dc:80:69:a6:fb:50:5f:ce:86:
        5d:a2:30:f5:f0:d9:1b:7a:92:9e:c1:69:78:f3:42:65:9f:2f:
        3e:c9:61:96:bf:93:5a:4f:e9:70:16:de:b1:91:78:b7:0a:38:
        2c:54:6c:21:32:be:90:e9:b5:25:29:d7:df:b2:a5:86:2d:bc:
        04:9a:ca:ee:cb:1b:29:02:6e:59:4f:86:85:d9:06:a3:1b:8e:
        94:df:9b:9b:56:20:f2:33:02:3c:ff:17:c3:46:04:2d:db:64:
        1a:0f:9d:7b:2d:b6:af:dd:c4:5b:ad:70:89:09:5d:3b:02:b7:
        74:24:79:e2:b5:a4:1a:ed:f9:8a:55:73:f6:20:4d:4f:88:42:
        24:77:08:92:09:7d:42:2e:40:88:fa:42:1a:2b:10:b6:8f:28:
        a1:b8:33:7c:99:fa:c6:29:0f:50:85:cd:f7:e0:b1:b7:ea:14:
        0f:ac:a6:cd:16:3a:a9:7a:0e:f4:13:b5:35:f0:87:0d:5d:67:
        d3:14:c3:e8:0e:b7:b1:4f:60:0b:c5:ca:23:93:6e:38:15:ee:
        0b:e4:97:79:f9:97:43:ff:9d:42:f5:ea:80:96:d7:7b:b3:2b:
        d1:4d:7f:36
</code></pre></div>
</details>
<p>Within your <code>${HOME}/GREP11CAWork</code> directory, you are a certification authority!</p>
</li>
<li>
<p>If you change to this directory, you will be soon be a customer of your <abbr title="certification authority">CA</abbr>:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/contract/grep11Server/workload/compose
</code></pre></div>
</li>
<li>
<p>You want to create a certificate for your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server to use for authenticating to <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> clients.  Start by creating an RSA private key:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>genrsa<span class="w"> </span>-out<span class="w"> </span>grep11-server.key<span class="w"> </span><span class="m">2048</span>
</code></pre></div>
</li>
<li>
<p>Create a configuration file to assist the creation of your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server's <abbr title="certificate signing request">CSR</abbr>:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; serverCSR.cnf</span>
<span class="s"># OpenSSL configuration file.</span>
<span class="s">#</span>

<span class="s"># Establish working directory.</span>

<span class="s">dir   = .</span>

<span class="s">[ ca ]</span>
<span class="s">default_ca  = CA_default</span>

<span class="s">[ CA_default ]</span>
<span class="s">serial   = $dir/serial</span>
<span class="s">default_days  = 365</span>
<span class="s">default_md  = sha256</span>
<span class="s">preserve  = no</span>
<span class="s">email_in_dn  = no</span>
<span class="s">nameopt   = default_ca</span>
<span class="s">certopt   = default_ca</span>
<span class="s">default_crl_days = 45</span>
<span class="s">policy   = policy_match</span>

<span class="s">[ policy_match ]</span>
<span class="s">countryName  = match</span>
<span class="s">stateOrProvinceName = optional</span>
<span class="s">organizationName = match</span>
<span class="s">organizationalUnitName = optional</span>
<span class="s">commonName  = supplied</span>
<span class="s">emailAddress  = optional</span>

<span class="s">[ req ]</span>
<span class="s">default_md  = sha256</span>
<span class="s">distinguished_name = req_distinguished_name</span>
<span class="s">prompt             = no</span>

<span class="s">[ req_distinguished_name ]</span>

<span class="s">C  = US</span>
<span class="s">ST = Virginia</span>
<span class="s">L  = Herndon</span>
<span class="s">O  = IBM  </span>
<span class="s">OU = Washington Systems Center - IBM zSystems and LinuxONE</span>

<span class="s">CN = \$ENV::COMMON_NAME</span>

<span class="s">EOF</span>
</code></pre></div>
</li>
<li>
<p>Create the certificate signing request:</p>
<div class="highlight"><pre><span></span><code><span class="nv">COMMON_NAME</span><span class="o">=</span><span class="si">${</span><span class="nv">GREP11ServerIP</span><span class="si">}</span><span class="w">  </span>openssl<span class="w"> </span>req<span class="w"> </span>-new<span class="w"> </span>-key<span class="w"> </span>grep11-server.key<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-out<span class="w"> </span>grep11-server.csr<span class="w"> </span>-config<span class="w"> </span>serverCSR.cnf
</code></pre></div>
</li>
<li>
<p>In your current directory, <code>${HOME}/contract/grep11Server/workload/compose</code>, you are a "customer" of the <abbr title="certification authority">CA</abbr> you created in <code>${HOME}/GREP11CAwork</code>. 
    Thus, "send" your <abbr title="certificate signing request">CSR</abbr> to your <abbr title="certification authority">CA</abbr>:</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>-ipv<span class="w"> </span>grep11-server.csr<span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/GREP11CAwork/.
</code></pre></div>
</li>
<li>
<p>Put your <abbr title="certification authority">CA</abbr> hat back on and go to the <abbr title="certification authority">CA</abbr> directory:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/GREP11CAwork/
</code></pre></div>
</li>
<li>
<p>Create a configuration file to assist the creation of your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server certificate:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; server.cnf</span>
<span class="s"># OpenSSL configuration file.</span>
<span class="s">#</span>

<span class="s"># Establish working directory.</span>

<span class="s">dir   = .</span>

<span class="s">[ ca ]</span>
<span class="s">default_ca  = CA_default</span>

<span class="s">[ CA_default ]</span>
<span class="s">serial   = $dir/serial</span>
<span class="s">default_days  = 365</span>
<span class="s">default_md  = sha256</span>
<span class="s">preserve  = no</span>
<span class="s">email_in_dn  = no</span>
<span class="s">nameopt   = default_ca</span>
<span class="s">certopt   = default_ca</span>
<span class="s">default_crl_days = 45</span>
<span class="s">policy   = policy_match</span>

<span class="s">[ policy_match ]</span>
<span class="s">countryName  = match</span>
<span class="s">stateOrProvinceName = optional</span>
<span class="s">organizationName = match</span>
<span class="s">organizationalUnitName = optional</span>
<span class="s">commonName  = supplied</span>
<span class="s">emailAddress  = optional</span>

<span class="s">[ req ]</span>
<span class="s">default_md  = sha256</span>
<span class="s">distinguished_name = req_distinguished_name</span>
<span class="s">prompt             = no</span>

<span class="s">[ req_distinguished_name ]</span>
<span class="s">C  = US</span>
<span class="s">ST = Virginia</span>
<span class="s">L  = Herndon</span>
<span class="s">O  = IBM  </span>
<span class="s">OU = Washington Systems Center - IBM zSystems and LinuxONE</span>
<span class="s">CN = \${ENV::COMMON_NAME}</span>

<span class="s">[ server ]</span>
<span class="s">basicConstraints = CA:FALSE</span>
<span class="s">keyUsage = digitalSignature, keyEncipherment, dataEncipherment</span>
<span class="s">extendedKeyUsage = serverAuth</span>
<span class="s">nsCertType = server</span>
<span class="s">crlDistributionPoints = @crl</span>
<span class="s">subjectAltName = \${ENV::SUBJECT_ALT_NAME}</span>

<span class="s">[ crl ]</span>
<span class="s">URI=http://localhost/ca.crl</span>

<span class="s">EOF</span>
</code></pre></div>
</li>
<li>
<p>Now, create the certificate:</p>
<div class="highlight"><pre><span></span><code><span class="nv">SUBJECT_ALT_NAME</span><span class="o">=</span>DNS:192.168.22.64:<span class="si">${</span><span class="nv">GREP11ServerForwardedPort</span><span class="si">}</span>,IP:192.168.22.64,DNS:<span class="si">${</span><span class="nv">GREP11ServerIP</span><span class="si">}</span>:9876,IP:<span class="si">${</span><span class="nv">GREP11ServerIP</span><span class="si">}</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="nv">COMMON_NAME</span><span class="o">=</span><span class="si">${</span><span class="nv">GREP11ServerIP</span><span class="si">}</span><span class="w"> </span>openssl<span class="w"> </span>x509<span class="w"> </span>-sha256<span class="w"> </span>-req<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-in<span class="w"> </span>grep11-server.csr<span class="w"> </span>-CA<span class="w"> </span>grep11-ca.pem<span class="w"> </span>-CAkey<span class="w"> </span>grep11-ca-key.pem<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-set_serial<span class="w"> </span><span class="m">8086</span><span class="w"> </span>-extfile<span class="w"> </span>server.cnf<span class="w"> </span>-extensions<span class="w"> </span>server<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-days<span class="w"> </span><span class="m">390</span><span class="w"> </span>-outform<span class="w"> </span>PEM<span class="w"> </span>-out<span class="w"> </span>grep11-server.pem
</code></pre></div>
<details class="- example">
<summary>Example output from certificate creation</summary>
<div class="highlight"><pre><span></span><code>Signature ok
subject=C = US, ST = Virginia, L = Herndon, O = IBM, OU = Washington Systems Center - IBM zSystems and LinuxONE, CN = 172.16.0.61
Getting CA Private Key
</code></pre></div>
</details>
</li>
<li>
<p>Display the info of the certificate you just created:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>x509<span class="w"> </span>-noout<span class="w"> </span>-text<span class="w"> </span>-in<span class="w"> </span>grep11-server.pem
</code></pre></div>
<p>Your certificate will look similar to this:</p>
<details class="- example">
<summary>Certificate info</summary>
<div class="highlight"><pre><span></span><code>Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number: 8086 (0x1f96)
        Signature Algorithm: sha256WithRSAEncryption
        Issuer: C = US, ST = Virginia, L = Herndon, O = IBM, OU = Washington Systems Center - IBM zSystems and LinuxONE, CN = WSC student02 HPVS CA, emailAddress = student@notreal.email.com.com
        Validity
            Not Before: Feb 14 14:47:20 2023 GMT
            Not After : Mar 10 14:47:20 2024 GMT
        Subject: C = US, ST = Virginia, L = Herndon, O = IBM, OU = Washington Systems Center - IBM zSystems and LinuxONE, CN = 172.16.0.61
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                RSA Public-Key: (2048 bit)
                Modulus:
                    00:ac:16:8c:e2:82:f2:18:4d:b0:c2:6b:1e:62:93:
                    a2:6b:58:8f:eb:60:78:49:20:e1:68:64:d9:b7:a1:
                    a7:3d:ce:ae:ca:f9:86:8e:c8:bd:f8:fc:e3:b6:bb:
                    19:7d:d7:8d:59:36:c6:d6:63:44:d3:14:06:ff:92:
                    d6:ee:c9:fe:ad:4c:a0:fe:c6:96:fa:5b:29:e4:bd:
                    08:0b:da:1a:d0:38:eb:f6:90:12:a4:34:a4:b3:21:
                    63:31:06:32:19:9b:33:d6:f1:93:36:f1:b7:27:c3:
                    8f:9b:31:c7:ce:e9:b6:61:15:48:c7:a2:c6:80:18:
                    46:79:73:75:67:6d:78:d1:ec:28:19:24:fc:72:38:
                    37:49:be:05:60:54:0c:9f:fe:52:5f:a1:16:77:98:
                    fc:a3:d8:2e:fe:f3:b2:4f:eb:2f:45:ad:b1:c9:35:
                    05:f3:ab:e5:44:13:24:53:e9:67:93:47:08:a8:42:
                    f3:68:61:66:14:65:d2:c1:fe:09:05:06:3d:5f:72:
                    5c:8b:8b:6b:c4:13:3d:71:9b:f3:5b:29:95:33:e4:
                    3e:d4:1a:04:9a:93:71:07:ec:02:58:c9:f2:47:b8:
                    d3:dc:db:6f:c4:bc:ff:67:e9:b0:bb:f7:5e:f8:ca:
                    a4:cf:5e:ef:05:cf:06:25:56:1e:c4:ee:24:0d:4e:
                    c9:e7
                Exponent: 65537 (0x10001)
        X509v3 extensions:
            X509v3 Basic Constraints: 
                CA:FALSE
            X509v3 Key Usage: 
                Digital Signature, Key Encipherment, Data Encipherment
            X509v3 Extended Key Usage: 
                TLS Web Server Authentication
            Netscape Cert Type: 
                SSL Server
            X509v3 CRL Distribution Points: 

                Full Name:
                URI:http://localhost/ca.crl

            X509v3 Subject Alternative Name: 
                DNS:192.168.22.64:19878, IP Address:192.168.22.64, DNS:172.16.0.61:9876, IP Address:172.16.0.61
    Signature Algorithm: sha256WithRSAEncryption
        84:1e:74:25:f5:7b:d5:c4:d1:7a:7e:5d:c6:84:87:96:2a:75:
        7c:20:ce:40:c4:8d:54:d5:2a:cd:53:81:b6:c0:46:73:e8:55:
        88:ac:8c:21:0e:71:3c:1a:8f:3e:25:34:55:fc:aa:23:dc:9b:
        ba:0b:5f:4a:e3:c3:09:d6:c4:d7:4c:27:a1:d3:d2:0d:f0:a2:
        e0:64:d2:89:b6:61:18:1e:c9:a7:ee:66:fb:36:53:58:3d:a9:
        5c:03:4a:fa:5f:e7:10:08:5a:8b:e0:24:1a:90:48:b2:1c:5e:
        63:d9:23:60:24:80:5f:f6:27:7e:9f:6c:d9:9e:58:98:71:80:
        e3:ea:1b:fa:4a:dc:67:7e:e9:23:fe:5f:d1:09:a9:3f:bc:6e:
        9b:09:47:3a:4e:df:50:8d:26:0f:e2:75:25:ec:ce:80:1d:a7:
        38:29:ef:b2:d6:f0:4e:7d:68:c2:b4:7e:00:7a:ff:79:8f:32:
        8e:c1:79:54:38:3a:40:de:6b:d3:b7:6f:31:7d:ac:71:7e:37:
        27:ac:7c:e7:b9:7e:12:b2:78:41:68:f4:5e:35:77:8c:d9:3c:
        94:f7:0f:95:1c:1b:31:62:9c:f9:99:09:2c:60:03:7c:9c:c1:
        56:c7:a0:7e:7b:0e:c3:22:42:95:76:ee:9c:1a:b4:e5:a8:a8:
        6d:0f:b3:1f
</code></pre></div>
</details>
</li>
<li>
<p>"Send" the completed certificate to the "customer":</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>-ipv<span class="w"> </span>grep11-server.pem<span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/contract/grep11Server/workload/compose/.
</code></pre></div>
</li>
<li>
<p>Also send your public certificate to the customer as they will need it to verify certificates that are sent by their connection partners. (<abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> clients in this case).</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>-ipv<span class="w"> </span>grep11-ca.pem<span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/contract/grep11Server/workload/compose/.
</code></pre></div>
</li>
<li>
<p>Switch directories again:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/contract/grep11Server/workload/compose
</code></pre></div>
</li>
</ol>
<h3 id="lab-creategrep11contract-create-x509-material-for-grep11-server-to-cena4see-server-communication">Create x509 material for <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server to <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> Server communication<a class="headerlink" href="#lab-creategrep11contract-create-x509-material-for-grep11-server-to-cena4see-server-communication" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Learn a new argument (<em>--after-context</em>) to the <em>grep</em> command and display just a portion of the docker-compose file:</p>
<div class="highlight"><pre><span></span><code>grep<span class="w"> </span>--after-context<span class="w"> </span><span class="m">8</span><span class="w"> </span>volumes<span class="w"> </span>docker-compose.yml
</code></pre></div>
<details class="- example">
<summary>Expected output</summary>
<div class="highlight"><pre><span></span><code>    volumes:
    - ./c16client.yaml:/etc/c16/c16client.yaml
    - ./c16-ca.pem:/cfg/c16-ca.pem
    - ./c16-client.key:/cfg/c16-client.key
    - ./c16-client.pem:/cfg/c16-client.pem
    - ./grep11server.yaml:/etc/ep11server/ep11server.yaml
    - ./grep11-ca.pem:/cfg/grep11-ca.pem
    - ./grep11-server.pem:/cfg/grep11-server.pem
    - ./grep11-server.key:/cfg/grep11-server.key
</code></pre></div>
</details>
<p>Of the eight files, you have created five of them:</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> 2 <em>.yaml</em> files</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> 3 <em>grep11-*</em> files</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> 3 <em>c16-*</em> files</li>
</ul>
</li>
<li>
<p>Now it is time to create or acquire the three files called for from <em>c16client.yaml</em>.</p>
<p>There is only one <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> server that all of the lab students will use.  The instructors have set this up, and have created the "self-signed" <abbr title="certification authority">CA</abbr> that governs communication between the <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> server and its clients (each student's <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server is a client of the <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> server). You need to acquire the certificate of the <abbr title="certification authority">CA</abbr> the instructors created:</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>-ipv<span class="w"> </span>/data/lab/c16-ca-public/c16-ca.pem<span class="w"> </span>.
</code></pre></div>
</li>
<li>
<p>Create an RSA private key using <em>certtool</em>:</p>
<div class="admonition info">
<p class="admonition-title">Certtool</p>
<p>You used <em>openssl</em> for your previous certificate work.  You will use another tool called <em>certtool</em> now.  </p>
</div>
<div class="highlight"><pre><span></span><code>certtool<span class="w"> </span>--generate-privkey<span class="w"> </span>--outfile<span class="w"> </span>c16-client.key
</code></pre></div>
<details class="- example">
<summary>Output from private key creation</summary>
<div class="highlight"><pre><span></span><code>Generating a 3072 bit RSA private key...
</code></pre></div>
</details>
</li>
<li>
<p>Create the following template file to avoid being asked questions from <em>certtool</em>:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; csr.cfg</span>
<span class="s"># The common name of the certificate owner.</span>
<span class="s">cn = &quot;c16client&quot;</span>

<span class="s"># The organizational unit of the subject.</span>
<span class="s">unit = &quot;IBM WSC zSystems and LinuxONE&quot;</span>

<span class="s"># The organization of the subject</span>
<span class="s">organization = &quot;IBM WSC&quot;</span>

<span class="s"># The location of the subject</span>
<span class="s">locality = &quot;Herndon&quot;</span>

<span class="s"># The state of the subject.</span>
<span class="s">state = &quot;Virginia&quot;</span>

<span class="s"># The country of the subject. Two letter code.</span>
<span class="s">country = &quot;US&quot;</span>

<span class="s"># The subject&#39;s domain component</span>
<span class="s">dc = &quot;bczkvm&quot;</span>

<span class="s"># A dnsname </span>
<span class="s">dns_name = ${GREP11ServerIP}</span>

<span class="s"># An IP address </span>
<span class="s">ip_address = ${GREP11ServerIP}</span>

<span class="s"># Use certificate for TLS client</span>
<span class="s">tls_www_client</span>
<span class="s">EOF</span>
</code></pre></div>
</li>
<li>
<p>Now create a <abbr title="certificate signing request">CSR</abbr>:</p>
<div class="highlight"><pre><span></span><code>certtool<span class="w"> </span>--generate-request<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--load-privkey<span class="w"> </span>c16-client.key<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--template<span class="w"> </span>csr.cfg<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--outfile<span class="w"> </span>c16-client.csr<span class="w"> </span>
</code></pre></div>
<details class="- example">
<summary>Output from creating <abbr title="certificate signing request">CSR</abbr></summary>
<div class="highlight"><pre><span></span><code>Generating a PKCS #10 certificate request...
</code></pre></div>
</details>
</li>
<li>
<p>Display information about your <abbr title="certificate signing request">CSR</abbr>:</p>
<div class="highlight"><pre><span></span><code>certtool<span class="w"> </span>--crq-info<span class="w"> </span>--infile<span class="w"> </span>c16-client.csr
</code></pre></div>
<p>Your output should look similar to this:</p>
<details class="- example">
<summary>Example <abbr title="certificate signing request">CSR</abbr> info</summary>
<div class="highlight"><pre><span></span><code>PKCS #10 Certificate Request Information:
        Version: 1
        Subject: DC=bczkvm,C=US,ST=Virginia,L=Herndon,O=IBM WSC,OU=IBM WSC zSystems and LinuxONE,CN=c16client
        Subject Public Key Algorithm: RSA
        Algorithm Security Level: High (3072 bits)
            Modulus (bits 3072):
                00:b8:89:6a:97:6f:fd:78:30:e0:c0:16:0e:64:42:fa
                e6:b9:6b:b1:c2:fd:25:c2:0f:f6:9d:f8:29:14:c5:38
                0f:a2:0e:57:07:30:4f:bb:23:03:af:52:fb:65:e5:5b
                e6:fe:93:21:74:8d:5c:e3:de:e0:1c:3b:47:1f:2f:4d
                c2:8d:e1:87:01:f7:6b:d9:c0:5d:c4:2e:53:d1:64:39
                90:be:a9:76:38:5b:52:14:aa:26:b1:9c:1b:24:18:f4
                7c:d7:02:27:3d:08:4a:16:b3:83:c5:70:37:d9:ae:a9
                b4:94:cf:a9:77:d0:96:19:f1:06:5d:5e:b6:ff:76:85
                d3:88:fe:b1:b3:40:a7:75:61:1b:d8:23:93:1f:01:3f
                4a:5e:a3:4b:95:26:36:37:b7:3e:14:c8:dc:c2:d1:1c
                ee:0a:60:a8:57:18:c1:ef:6f:9a:4f:e7:95:93:6a:a6
                15:41:34:d1:9c:51:f6:74:28:5c:79:cb:61:86:f2:73
                db:f0:7d:78:1b:4f:a2:08:92:c5:6d:8f:11:02:28:fd
                70:27:17:88:7f:6c:42:d5:c5:90:06:06:34:a7:bc:cd
                d9:c5:c3:4e:00:48:88:7b:d4:53:d2:63:9e:c6:6e:a8
                6e:29:a5:57:38:7d:c3:02:05:8c:ec:83:95:43:b9:5e
                28:fd:1d:a0:9d:b0:98:58:2e:31:b4:fd:78:75:e7:6a
                40:60:eb:1c:53:eb:ef:31:6a:fd:96:49:c1:db:c7:53
                c6:f8:ca:7c:db:c3:16:31:37:32:2e:25:ed:d4:96:08
                4e:bc:ce:04:b2:ed:c4:91:c1:72:1b:b0:9f:16:3d:17
                df:0f:b3:b7:4d:25:db:c4:ad:b4:42:b9:b2:a8:3c:41
                52:5c:d7:20:40:62:61:29:cf:89:0f:29:db:e9:53:17
                51:65:fc:50:0b:79:13:b5:d6:ab:cb:f8:92:e2:e9:b5
                0d:87:d3:c9:5f:d1:dc:c7:03:c4:e9:6c:ce:f2:09:22
                f1
            Exponent (bits 24):
                01:00:01
    Signature Algorithm: RSA-SHA256
        Attributes:
            Extensions:
                Subject Alternative Name (not critical):
                    DNSname: 172.16.0.61
                    IPAddress: 172.16.0.61
                Basic Constraints (critical):
                    Certificate Authority (CA): FALSE
                Key Usage (critical):
                    Digital signature.
                Key Purpose (critical):
                    TLS WWW Client.
Other Information:
        Public Key ID:
            sha1:70d0427d152be23fc9015be370581d19f3c47ff7
            sha256:8f5547027afe8e10cd64d840903692e6a703b61a63fdbaebf9e0f446013a2ee6
        Public Key PIN:
            pin-sha256:j1VHAnr+jhDNZNhAkDaS5qcDthpj/brr+eD0RgE6LuY=

Self signature: verified

-----BEGIN NEW CERTIFICATE REQUEST-----
MIIERDCCAqwCAQAwgZgxEjAQBgNVBAMTCWMxNmNsaWVudDEmMCQGA1UECxMdSUJN
IFdTQyB6U3lzdGVtcyBhbmQgTGludXhPTkUxEDAOBgNVBAoTB0lCTSBXU0MxEDAO
BgNVBAcTB0hlcm5kb24xETAPBgNVBAgTCFZpcmdpbmlhMQswCQYDVQQGEwJVUzEW
MBQGCgmSJomT8ixkARkWBmJjemt2bTCCAaIwDQYJKoZIhvcNAQEBBQADggGPADCC
AYoCggGBALiJapdv/Xgw4MAWDmRC+ua5a7HC/SXCD/ad+CkUxTgPog5XBzBPuyMD
r1L7ZeVb5v6TIXSNXOPe4Bw7Rx8vTcKN4YcB92vZwF3ELlPRZDmQvql2OFtSFKom
sZwbJBj0fNcCJz0IShazg8VwN9muqbSUz6l30JYZ8QZdXrb/doXTiP6xs0CndWEb
2COTHwE/Sl6jS5UmNje3PhTI3MLRHO4KYKhXGMHvb5pP55WTaqYVQTTRnFH2dChc
ecthhvJz2/B9eBtPogiSxW2PEQIo/XAnF4h/bELVxZAGBjSnvM3ZxcNOAEiIe9RT
0mOexm6obimlVzh9wwIFjOyDlUO5Xij9HaCdsJhYLjG0/Xh152pAYOscU+vvMWr9
lknB28dTxvjKfNvDFjE3Mi4l7dSWCE68zgSy7cSRwXIbsJ8WPRffD7O3TSXbxK20
QrmyqDxBUlzXIEBiYSnPiQ8p2+lTF1Fl/FALeRO11qvL+JLi6bUNh9PJX9HcxwPE
6WzO8gki8QIDAQABoGYwZAYJKoZIhvcNAQkOMVcwVTAcBgNVHREEFTATggsxNzIu
MTYuMC42MYcErBAAPTAMBgNVHRMBAf8EAjAAMA8GA1UdDwEB/wQFAwMHgAAwFgYD
VR0lAQH/BAwwCgYIKwYBBQUHAwIwDQYJKoZIhvcNAQELBQADggGBAA17uU7a2aJx
FNi2syniSomFbZSVQBBTJop7mplzpdyH+/IN/2eJU6wakXuuvCp6Yo2UYd6wMD5V
jl9AuZssXYZZRxfCzLtZ/KhCmNzFqnJIGMPpaPW5W72Jtmo3GE1VRRYEnVGZGqbx
hnUzY0uiHThT+M31P+ZwpYwsPZmWYm0zBT2NfMAPpgYC0EqXstSqUdksgK1Qxa/L
T3pede66CtIDbO+cRCv2ITWyfElZ7HZU93fDAG+R9kSMQDxNyjFQQ1H/b0F155hZ
DjkGJ/VSU5RAv59oud4ZUYkGFOFOXlH+4fRhszAGOA53mDGUxL+Oh1VuYijeWyWo
kepWkbYZ1o39pb5Zj1PEN6V2pwrLVg1My0VWNoxgnOWVJOGUnAt1jFYo+1fNMBsg
xx44AFTZKvKJmHoOnbcSw/maVqg8taeF4vyPHOddsrK9fC4lg5+ZWrLoqhh7t0Ac
TNVxGDGmyklOsttcINyIfbyQGMUTURDEDYLl7xLNX8IFTcG+xtlS1g==
-----END NEW CERTIFICATE REQUEST-----
</code></pre></div>
</details>
<p>The "self-signed" <abbr title="certification authority">CA</abbr> for the <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> server is under instructor control- since there is only one <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> for the class to share, there is only one <abbr title="certification authority">CA</abbr>.  Let the instructors know that you are ready to have a client certificate created and the instructors will create a certificate for you and place it in the same directory that you are presently working in.  </p>
<div class="admonition info">
<p class="admonition-title">How the instructors will create this certificate for you</p>
<p>In the interests of transparency, this is the command the instructors will use to create your certificate (after setting the <em>${student}</em> environment variable appropriately).  Don't try to run this command as it won't work for you because you do not have access to the "self-signed" <abbr title="certification authority">CA</abbr>'s private key.  (You can try- if you succeed, you are either an excellent hacker, or the instructors are not excellent system administrators, or some combination thereof).</p>
<div class="highlight"><pre><span></span><code><span class="c1">### for your information only</span>
certtool<span class="w"> </span>--generate-certificate<span class="w"> </span><span class="se">\</span>
--load-request<span class="w"> </span>/home/<span class="si">${</span><span class="nv">student</span><span class="si">}</span>/contract/grep11Server/workload/compose/c16-client.csr<span class="w"> </span><span class="se">\</span>
--outfile<span class="w"> </span><span class="si">${</span><span class="nv">student</span><span class="si">}</span>-c16-client.pem<span class="w"> </span><span class="se">\</span>
--load-ca-certificate<span class="w"> </span>c16server-ca.pem<span class="w"> </span><span class="se">\</span>
--load-ca-privkey<span class="w"> </span>c16server-ca.key<span class="w"> </span><span class="se">\</span>
--template<span class="w"> </span>cert.cfg<span class="w"> </span>

cp<span class="w"> </span>-ipv<span class="w"> </span><span class="si">${</span><span class="nv">student</span><span class="si">}</span>-c16-client.pem<span class="w"> </span>/home/<span class="si">${</span><span class="nv">student</span><span class="si">}</span>/contract/grep11Server/workload/compose/c16-client.pem

chown<span class="w"> </span><span class="si">${</span><span class="nv">student</span><span class="si">}</span>:hpvs_students<span class="w"> </span>/home/<span class="si">${</span><span class="nv">student</span><span class="si">}</span>/contract/grep11Server/workload/compose/c16-client.pem<span class="w"> </span>
</code></pre></div>
<p>This is also for information only- it is the contents of the configuration file <em>cert.cfg</em> that the instructors use in the above command:</p>
<div class="highlight"><span class="filename">cert.cfg</span><pre><span></span><code><span class="c1"># Expiration days</span>
<span class="na">expiration_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">300</span>

<span class="c1"># Honor certificate request extensions </span>
<span class="c1">#honor_crq_extensions</span>

<span class="c1"># keyUsage </span>
<span class="na">honor_crq_ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2.5.29.15</span>

<span class="c1"># extKeyUsage</span>
<span class="na">honor_crq_ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2.5.27.39</span>

<span class="c1"># subjectAltName</span>
<span class="na">honor_crq_ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2.5.29.17</span>

<span class="c1"># basicConstraints</span>
<span class="na">honor_crq_ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2.5.29.19</span>

<span class="na">tls_www_client</span>
</code></pre></div>
</div>
</li>
<li>
<p>After the instructors notify you that your certificate is ready <img alt="🕰" class="twemoji" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f570.svg" title=":clock:" />, display it:</p>
<div class="highlight"><pre><span></span><code>certtool<span class="w"> </span>--certificate-info<span class="w"> </span>--infile<span class="w"> </span>c16-client.pem
</code></pre></div>
<p>Your certificate will look like this:</p>
<details class="- example">
<summary><abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> client certificate info</summary>
<div class="highlight"><pre><span></span><code>X.509 Certificate Information:
        Version: 3
        Serial Number (hex): 6c8e1ecbc1ee385c441c03bd1dd64759641c5073
        Issuer: DC=hpvs1,C=US,ST=Virginia,L=Herndon,O=IBM WSC zSystems and LinuxONE,OU=IBM WSC,CN=c16server CA
        Validity:
            Not Before: Tue Feb 14 15:41:45 UTC 2023
            Not After: Mon Dec 11 15:41:45 UTC 2023
        Subject: DC=bczkvm,C=US,ST=Virginia,L=Herndon,O=IBM WSC,OU=IBM WSC zSystems and LinuxONE,CN=c16client
        Subject Public Key Algorithm: RSA
        Algorithm Security Level: High (3072 bits)
            Modulus (bits 3072):
                00:b8:89:6a:97:6f:fd:78:30:e0:c0:16:0e:64:42:fa
                e6:b9:6b:b1:c2:fd:25:c2:0f:f6:9d:f8:29:14:c5:38
                0f:a2:0e:57:07:30:4f:bb:23:03:af:52:fb:65:e5:5b
                e6:fe:93:21:74:8d:5c:e3:de:e0:1c:3b:47:1f:2f:4d
                c2:8d:e1:87:01:f7:6b:d9:c0:5d:c4:2e:53:d1:64:39
                90:be:a9:76:38:5b:52:14:aa:26:b1:9c:1b:24:18:f4
                7c:d7:02:27:3d:08:4a:16:b3:83:c5:70:37:d9:ae:a9
                b4:94:cf:a9:77:d0:96:19:f1:06:5d:5e:b6:ff:76:85
                d3:88:fe:b1:b3:40:a7:75:61:1b:d8:23:93:1f:01:3f
                4a:5e:a3:4b:95:26:36:37:b7:3e:14:c8:dc:c2:d1:1c
                ee:0a:60:a8:57:18:c1:ef:6f:9a:4f:e7:95:93:6a:a6
                15:41:34:d1:9c:51:f6:74:28:5c:79:cb:61:86:f2:73
                db:f0:7d:78:1b:4f:a2:08:92:c5:6d:8f:11:02:28:fd
                70:27:17:88:7f:6c:42:d5:c5:90:06:06:34:a7:bc:cd
                d9:c5:c3:4e:00:48:88:7b:d4:53:d2:63:9e:c6:6e:a8
                6e:29:a5:57:38:7d:c3:02:05:8c:ec:83:95:43:b9:5e
                28:fd:1d:a0:9d:b0:98:58:2e:31:b4:fd:78:75:e7:6a
                40:60:eb:1c:53:eb:ef:31:6a:fd:96:49:c1:db:c7:53
                c6:f8:ca:7c:db:c3:16:31:37:32:2e:25:ed:d4:96:08
                4e:bc:ce:04:b2:ed:c4:91:c1:72:1b:b0:9f:16:3d:17
                df:0f:b3:b7:4d:25:db:c4:ad:b4:42:b9:b2:a8:3c:41
                52:5c:d7:20:40:62:61:29:cf:89:0f:29:db:e9:53:17
                51:65:fc:50:0b:79:13:b5:d6:ab:cb:f8:92:e2:e9:b5
                0d:87:d3:c9:5f:d1:dc:c7:03:c4:e9:6c:ce:f2:09:22
                f1
            Exponent (bits 24):
                01:00:01
        Extensions:
            Key Usage (critical):
                Digital signature.
            Subject Alternative Name (not critical):
                DNSname: 172.16.0.61
                IPAddress: 172.16.0.61
            Basic Constraints (critical):
                Certificate Authority (CA): FALSE
            Key Purpose (not critical):
                TLS WWW Client.
            Subject Key Identifier (not critical):
                70d0427d152be23fc9015be370581d19f3c47ff7
            Authority Key Identifier (not critical):
                a9a6c37c6e9d71c63f44db39cb5d5fca84228467
        Signature Algorithm: RSA-SHA256
        Signature:
            16:5d:90:43:8d:ab:7e:5a:d5:7f:3a:20:36:0c:8e:04
            5d:58:32:27:e1:80:19:f2:7e:2a:9e:9d:c1:11:50:6e
            11:03:16:f5:90:4a:32:32:73:b5:59:1d:ef:a0:2e:26
            3b:dc:09:ee:9b:c9:02:99:97:7e:54:d5:93:b1:18:5d
            42:4f:f8:29:5e:f0:60:2c:b0:51:28:52:a3:6f:5c:93
            be:e3:38:2a:cf:23:bf:3e:ce:6e:39:ff:7f:02:44:c3
            9e:2b:54:8a:a7:14:17:75:32:38:ea:e4:0f:12:db:22
            0b:07:93:bd:8f:5a:5e:00:1f:40:67:77:4a:1c:6a:5e
            bf:d2:46:53:42:80:87:d5:67:0e:54:dc:ce:60:92:9b
            15:4f:0c:eb:d2:4a:cb:5e:c0:ad:1c:00:80:66:fb:22
            b1:87:fd:cf:43:f1:21:0d:e6:76:03:ed:99:d0:01:e2
            07:fb:e3:b1:d6:a9:b3:5f:28:8e:48:4b:0b:b8:fa:b3
            3e:f6:c4:66:39:ea:2d:97:fe:56:38:69:52:bb:31:ba
            bc:04:6f:99:ee:f5:0e:02:e7:d1:56:87:22:a8:cd:09
            c2:be:1a:31:a4:87:42:ff:ba:f7:43:d5:b1:d7:f5:5d
            8c:fc:18:8d:5c:78:ef:ce:83:30:76:7c:99:dd:98:d4
            cd:3b:ba:24:5b:bf:a0:be:d4:e5:aa:c2:db:fb:ca:9a
            52:99:6d:02:f4:c7:da:bc:f0:76:d3:54:3a:91:5d:55
            37:13:84:e4:ca:71:6e:1d:24:8b:05:ad:54:15:ee:02
            9d:66:04:2a:eb:82:9e:53:a1:90:7d:43:4d:0e:ab:61
            76:2e:ba:32:4a:10:41:c5:8b:4c:e7:1f:11:0a:7b:17
            37:4b:b6:28:60:5c:69:6c:ae:ac:53:6b:6a:e4:f7:2a
            b6:d1:7d:c4:9b:ea:8c:88:d4:de:11:13:ee:15:7e:d7
            3e:4a:37:bc:19:de:8e:8e:ac:3d:e7:55:bf:8f:8d:6c
Other Information:
        Fingerprint:
            sha1:479b56297c57950ebc2a112e651f9e2031bb3e5f
            sha256:63bbb36695023e4abcb92222eccb15b43d2b8bc8d80b9e35ec9eb89ea5dd816b
        Public Key ID:
            sha1:70d0427d152be23fc9015be370581d19f3c47ff7
            sha256:8f5547027afe8e10cd64d840903692e6a703b61a63fdbaebf9e0f446013a2ee6
        Public Key PIN:
            pin-sha256:j1VHAnr+jhDNZNhAkDaS5qcDthpj/brr+eD0RgE6LuY=

-----BEGIN CERTIFICATE-----
MIIFWDCCA8CgAwIBAgIUbI4ey8HuOFxEHAO9HdZHWWQcUHMwDQYJKoZIhvcNAQEL
BQAwgZoxFTATBgNVBAMTDGMxNnNlcnZlciBDQTEQMA4GA1UECxMHSUJNIFdTQzEm
MCQGA1UEChMdSUJNIFdTQyB6U3lzdGVtcyBhbmQgTGludXhPTkUxEDAOBgNVBAcT
B0hlcm5kb24xETAPBgNVBAgTCFZpcmdpbmlhMQswCQYDVQQGEwJVUzEVMBMGCgmS
JomT8ixkARkWBWhwdnMxMB4XDTIzMDIxNDE1NDE0NVoXDTIzMTIxMTE1NDE0NVow
gZgxEjAQBgNVBAMTCWMxNmNsaWVudDEmMCQGA1UECxMdSUJNIFdTQyB6U3lzdGVt
cyBhbmQgTGludXhPTkUxEDAOBgNVBAoTB0lCTSBXU0MxEDAOBgNVBAcTB0hlcm5k
b24xETAPBgNVBAgTCFZpcmdpbmlhMQswCQYDVQQGEwJVUzEWMBQGCgmSJomT8ixk
ARkWBmJjemt2bTCCAaIwDQYJKoZIhvcNAQEBBQADggGPADCCAYoCggGBALiJapdv
/Xgw4MAWDmRC+ua5a7HC/SXCD/ad+CkUxTgPog5XBzBPuyMDr1L7ZeVb5v6TIXSN
XOPe4Bw7Rx8vTcKN4YcB92vZwF3ELlPRZDmQvql2OFtSFKomsZwbJBj0fNcCJz0I
Shazg8VwN9muqbSUz6l30JYZ8QZdXrb/doXTiP6xs0CndWEb2COTHwE/Sl6jS5Um
Nje3PhTI3MLRHO4KYKhXGMHvb5pP55WTaqYVQTTRnFH2dChcecthhvJz2/B9eBtP
ogiSxW2PEQIo/XAnF4h/bELVxZAGBjSnvM3ZxcNOAEiIe9RT0mOexm6obimlVzh9
wwIFjOyDlUO5Xij9HaCdsJhYLjG0/Xh152pAYOscU+vvMWr9lknB28dTxvjKfNvD
FjE3Mi4l7dSWCE68zgSy7cSRwXIbsJ8WPRffD7O3TSXbxK20QrmyqDxBUlzXIEBi
YSnPiQ8p2+lTF1Fl/FALeRO11qvL+JLi6bUNh9PJX9HcxwPE6WzO8gki8QIDAQAB
o4GVMIGSMA8GA1UdDwEB/wQFAwMHgAAwHAYDVR0RBBUwE4ILMTcyLjE2LjAuNjGH
BKwQAD0wDAYDVR0TAQH/BAIwADATBgNVHSUEDDAKBggrBgEFBQcDAjAdBgNVHQ4E
FgQUcNBCfRUr4j/JAVvjcFgdGfPEf/cwHwYDVR0jBBgwFoAUqabDfG6dccY/RNs5
y11fyoQihGcwDQYJKoZIhvcNAQELBQADggGBABZdkEONq35a1X86IDYMjgRdWDIn
4YAZ8n4qnp3BEVBuEQMW9ZBKMjJztVkd76AuJjvcCe6byQKZl35U1ZOxGF1CT/gp
XvBgLLBRKFKjb1yTvuM4Ks8jvz7Objn/fwJEw54rVIqnFBd1Mjjq5A8S2yILB5O9
j1peAB9AZ3dKHGpev9JGU0KAh9VnDlTczmCSmxVPDOvSSstewK0cAIBm+yKxh/3P
Q/EhDeZ2A+2Z0AHiB/vjsdaps18ojkhLC7j6sz72xGY56i2X/lY4aVK7Mbq8BG+Z
7vUOAufRVociqM0Jwr4aMaSHQv+690PVsdf1XYz8GI1ceO/OgzB2fJndmNTNO7ok
W7+gvtTlqsLb+8qaUpltAvTH2rzwdtNUOpFdVTcThOTKcW4dJIsFrVQV7gKdZgQq
64KeU6GQfUNNDqthdi66MkoQQcWLTOcfEQp7FzdLtihgXGlsrqxTa2rk9yq20X3E
m+qMiNTeERPuFX7XPko3vBnejo6sPedVv4+NbA==
-----END CERTIFICATE-----
</code></pre></div>
</details>
</li>
<li>
<p>Switch directories:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/contract/grep11Server/workload/.
</code></pre></div>
</li>
<li>
<p>Time to add a convenience script</p>
<p>You are almost finished with the workload section.  One thing to do is to add a convenience script to the workload directory.  This script is not
supplied with the product, but is very useful in the creation of the contract.  Create it now and feel free to peruse it but do not run it now.
It will be called later by another script.  Comments have been added to help explain what the script does. </p>
<div class="highlight"><pre><span></span><code><span class="l l-Scalar l-Scalar-Plain">cat &lt;&lt;-EOF &gt; flow.workload</span>
<span class="l l-Scalar l-Scalar-Plain"># Create the workload section of the contract and add the contents in the workload.yaml file.</span>

<span class="l l-Scalar l-Scalar-Plain">#</span><span class="w"> </span>
<span class="l l-Scalar l-Scalar-Plain"># The Docker Compose file and all supporting configuration files are assumed to be in the ./compose directory</span>
<span class="l l-Scalar l-Scalar-Plain"># There should not be any unnecessary files as they will get tarred up and added to the COMPOSE_B64 variable</span>
<span class="l l-Scalar l-Scalar-Plain">#</span>
<span class="l l-Scalar l-Scalar-Plain">COMPOSE_B64=\$(tar -czv -C compose . | base64 -w0)</span>

<span class="l l-Scalar l-Scalar-Plain">#</span>
<span class="l l-Scalar l-Scalar-Plain"># This specifies an intermediate file that could be deleted at the end of the script but</span><span class="w"> </span>
<span class="l l-Scalar l-Scalar-Plain"># is left intact for lab learning purposes-  it is plaintext so keeping it implies that</span>
<span class="l l-Scalar l-Scalar-Plain"># you would have to protect it appropriately.  In production you&#39;ll probably want to delete it</span>
<span class="l l-Scalar l-Scalar-Plain">#</span>
<span class="l l-Scalar l-Scalar-Plain">WORKLOAD_PLAIN=./workload.yaml.plaintext</span>

<span class="l l-Scalar l-Scalar-Plain">#</span>
<span class="l l-Scalar l-Scalar-Plain"># This specifies a file will be encrypted and signed and is the primary output of this script.</span><span class="w">  </span>
<span class="l l-Scalar l-Scalar-Plain"># It is combined with the encrypted and signed environment section that is created by</span><span class="w"> </span>
<span class="l l-Scalar l-Scalar-Plain"># another script (flow.signature which is one directory level higher)</span>
<span class="l l-Scalar l-Scalar-Plain"># Note</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this file will also wind up one directory level higher</span>
<span class="c1">#</span>
<span class="l l-Scalar l-Scalar-Plain">WORKLOAD=workload.yaml</span>

<span class="l l-Scalar l-Scalar-Plain">echo &quot;  type</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">workload</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">compose</span><span class="p p-Indicator">:</span>
<span class="w">    </span><span class="nt">archive</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">\${COMPOSE_B64}&quot; &gt; \${WORKLOAD_PLAIN}</span>

<span class="c1">#</span>
<span class="c1"># This is the encryption certificate for Hyper Protect Container Runtime and it is</span>
<span class="c1"># provided with the Hyper Protect Virtual Servers v2.1.3 product</span>
<span class="c1">#</span>
<span class="l l-Scalar l-Scalar-Plain">CONTRACT_KEY=/data/lab/hpvs213Certs/ibm-hyper-protect-container-runtime-23.1.0-encrypt.crt</span>

<span class="c1">#</span>
<span class="c1"># This variable holds a random password:</span>
<span class="c1">#</span>
<span class="l l-Scalar l-Scalar-Plain">PASSWORD_WORKLOAD=&quot;\$(openssl rand 32 | base64 -w0)&quot;</span>

<span class="c1">#</span>
<span class="c1"># This variable holds the output of the command pipe that</span>
<span class="c1"># takes your plaintext workload yaml ($WORKLOAD_PLAIN) and encrypts it using the password that </span>
<span class="c1"># was generated above ($PASSWORD_WORKLOAD) and then base64 encodes this encrypted workload</span>
<span class="c1">#</span>
<span class="c1"># As long as nobody else knows your random password ($PASSWORD_WORKLOAD) your data is safe.  </span>
<span class="c1"># But, the Hyper Protect Container Runtime has to encrypt it, so it needs your password. </span>
<span class="c1"># How will it get that password securely?  Read the next set of comment lines to find out.</span>
<span class="c1">#</span>
<span class="l l-Scalar l-Scalar-Plain">ENCRYPTED_WORKLOAD=&quot;\$(echo -n &quot;\$PASSWORD_WORKLOAD&quot; | base64 -d | openssl enc -aes-256-cbc -pbkdf2 -pass stdin -in &quot;\$WORKLOAD_PLAIN&quot; | base64 -w0)&quot;</span>

<span class="c1">#</span>
<span class="c1"># This variable provides secure passage of your random password.  How?  </span>
<span class="c1"># It encrypts it with the encryption key of the Hyper Protect Container Runtime (HPCR).</span>
<span class="c1"># (A key that is encrypted by another key is often called a wrapped key).</span>
<span class="c1"># Only the HPCR image has the private key which can decrypt this. It is protected from </span>
<span class="c1"># access from any administrators.  So, malicious actors cannot do anything with this</span>
<span class="c1"># wrapped key, even if they were able to get a hold of it.</span>
<span class="c1"># </span>
<span class="c1">#</span>
<span class="l l-Scalar l-Scalar-Plain">ENCRYPTED_WORKLOAD_PASSWORD=&quot;\$(echo -n &quot;\$PASSWORD_WORKLOAD&quot; | base64 -d | openssl rsautl -encrypt -inkey \$CONTRACT_KEY -certin | base64 -w0 )&quot;</span>

<span class="c1">#</span>
<span class="c1"># Use the following command to get the encrypted section of the contract:</span>
<span class="c1"># This variable holds the output of a concatenation of a header, &quot;hyper-protect-basic&quot;,</span>
<span class="c1"># Your wrapped key, and your encrypted workload. </span>
<span class="c1">#</span>
<span class="l l-Scalar l-Scalar-Plain">WORKLOAD_ENCRYPTED=&quot;hyper-protect-basic.\${ENCRYPTED_WORKLOAD_PASSWORD}.\${ENCRYPTED_WORKLOAD}&quot;</span>

<span class="c1">#</span>
<span class="c1"># The above variable is echoed to the a file the directory one level above</span>
<span class="c1">#</span>
<span class="l l-Scalar l-Scalar-Plain">echo &quot;\$WORKLOAD_ENCRYPTED&quot; &gt; ../\$WORKLOAD</span>

<span class="c1"># </span>
<span class="c1"># NOTE: In a production scenario the plaintext workload section would be </span>
<span class="c1"># deleted or stored securely but it has been left here for student perusal.  </span>
<span class="c1"># The filename is workload.yaml.plaintext</span>
<span class="c1">#</span>
<span class="l l-Scalar l-Scalar-Plain">EOF</span>
</code></pre></div>
</li>
</ol>
<h2 id="lab-creategrep11contract-create-environment-section-of-the-contract">Create environment section of the contract<a class="headerlink" href="#lab-creategrep11contract-create-environment-section-of-the-contract" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Change to the directory where you will prepare for environment section of the contract:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>../environment
</code></pre></div>
</li>
<li>
<p>In the environment section of the contract you are going to specify the information in 
order to have your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server log to the <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> that you configured earlier in the lab.</p>
<ol>
<li>
<p>Create a directory to gather some files you will need for this <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> configuration and change to it:</p>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>-p<span class="w"> </span>rsyslog<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>rsyslog
</code></pre></div>
</li>
<li>
<p>You will need the <abbr title="certification authority">CA</abbr> certificate of the <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> service that you created on your Ubuntu KVM guest which you can get via <em>scp</em>:</p>
<div class="highlight"><pre><span></span><code>scp<span class="w"> </span>student@<span class="si">${</span><span class="nv">StudentGuestIP</span><span class="si">}</span>:rsyslogWork/ca.crt<span class="w"> </span>.
</code></pre></div>
</li>
<li>
<p>Copy your <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> client certificate from your working directory:</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>-ipv<span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/rsyslogClientWork/client.crt<span class="w"> </span>.
</code></pre></div>
</li>
<li>
<p>Convert the client certificate to PKCS#8 format</p>
<p>The directory you just copied the client certificate from also has your private key that you need. However, the <abbr title="Hyper Protect Container Runtime- this is the name given to the Secure Execution-enabled qcow2 image that is provided with Hyper Protect Virtual Servers 2.1.x. The container runtime provided within this image launches the customer's workload as an OCI container, in accordance with the &quot;contract&quot; specified by the customer.">HPCR</abbr> image requires this to be in PKCS#8  (Public Key Cryptography Standard #8) format. Therefore you can't just copy it over- you need to convert it to PKCS#8 format:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>pkcs8<span class="w"> </span>-topk8<span class="w"> </span>-inform<span class="w"> </span>PEM<span class="w"> </span>-outform<span class="w"> </span>PEM<span class="w"> </span>-nocrypt<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-in<span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/rsyslogClientWork/client-key.pem<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-out<span class="w"> </span>client-key-pkcs8.pem
</code></pre></div>
</li>
<li>
<p>Go back up one directory level:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>..<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">pwd</span>
</code></pre></div>
</li>
<li>
<p>We have provided a convenience script to assist in creating the environment section of the contract</p>
<p>This script is not supplied with the product, but is very useful in the creation of the contract. Create it now and feel free to peruse it but do not run it now. It will be called later by another script. Comments have been added to help explain what the script does. </p>
<div class="highlight"><pre><span></span><code><span class="l l-Scalar l-Scalar-Plain">cat &lt;&lt;-EOF &gt; flow.env</span>
<span class="l l-Scalar l-Scalar-Plain"># Create the env section of the contract and add the contents in the env.yaml file.</span>

<span class="l l-Scalar l-Scalar-Plain">#</span>
<span class="l l-Scalar l-Scalar-Plain"># set some file locations at the top of the file here</span>
<span class="l l-Scalar l-Scalar-Plain">#</span>
<span class="l l-Scalar l-Scalar-Plain">RSYSLOG_CA_CRT=&quot;./rsyslog/ca.crt&quot;</span>
<span class="l l-Scalar l-Scalar-Plain">RSYSLOG_CLIENT_CRT=&quot;./rsyslog/client.crt&quot;</span>
<span class="l l-Scalar l-Scalar-Plain">RSYSLOG_CLIENT_KEY=&quot;./rsyslog/client-key-pkcs8.pem&quot;</span>

<span class="l l-Scalar l-Scalar-Plain">#</span>
<span class="l l-Scalar l-Scalar-Plain"># This specifies an intermediate file that could be deleted at the end of the script but</span><span class="w"> </span>
<span class="l l-Scalar l-Scalar-Plain"># is left intact for lab learning purposes-  it is plaintext so keeping it implies that</span>
<span class="l l-Scalar l-Scalar-Plain"># you would have to protect it appropriately.  In production you&#39;ll probably want to delete it</span>
<span class="l l-Scalar l-Scalar-Plain">#</span>
<span class="l l-Scalar l-Scalar-Plain">ENV_PLAIN=&quot;./env.yaml.plaintext&quot;</span>

<span class="l l-Scalar l-Scalar-Plain">#</span>
<span class="l l-Scalar l-Scalar-Plain"># This specifies a file will be encrypted and signed and is the primary output of this script.</span><span class="w">  </span>
<span class="l l-Scalar l-Scalar-Plain"># It is combined with the encrypted and signed workload section that is created by</span><span class="w"> </span>
<span class="l l-Scalar l-Scalar-Plain"># another script (flow.signature which is one directory level higher)</span>
<span class="l l-Scalar l-Scalar-Plain"># Note</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this file will also wind up one directory level higher</span>
<span class="c1">#</span>
<span class="l l-Scalar l-Scalar-Plain">ENV=&quot;env.yaml&quot;</span>

<span class="c1">#</span>
<span class="c1"># This variable holds the output of taking all the newlines out of the rsyslog CA certificate and</span>
<span class="c1"># replacing them with the &quot;\n&quot; characters.  In other words, a multiple line file is squashed down </span>
<span class="c1"># to one line.  The HPCR runtime image will then convert it back to the multiple line format</span>
<span class="c1">#</span>
<span class="l l-Scalar l-Scalar-Plain">ENV_RSYSLOG_SERVER=\$(awk -vRS=&quot;\n&quot; -vORS=&quot;\\\\\n&quot; &#39;1&#39; \${RSYSLOG_CA_CRT})</span>

<span class="c1">#</span>
<span class="c1"># This variable holds the output of taking all the newlines out of the client certificate that the</span>
<span class="c1"># HPCR runtime uses for communicating with rsyslog and replacing them with the &quot;\n&quot; characters.</span>
<span class="c1"># In other words, a multiple line file is squashed down to one line. THe HPCR runtime image will </span>
<span class="c1"># then convert it back to the multiple line format</span>
<span class="c1">#</span>
<span class="l l-Scalar l-Scalar-Plain">ENV_RSYSLOG_CERT=\$(awk -vRS=&quot;\n&quot; -vORS=&quot;\\\\\n&quot; &#39;1&#39; \${RSYSLOG_CLIENT_CRT})</span>

<span class="c1">#</span>
<span class="c1"># This variable holds the output of taking all the newlines out of the client private key that the</span>
<span class="c1"># HPCR runtime uses for communicating with rsyslog and replacing them with the &quot;\n&quot; characters.</span>
<span class="c1"># In other words, a multiple line file is squashed down to one line. THe HPCR runtime image will </span>
<span class="c1"># then convert it back to the multiple line format. Before this all happens, the Private Key is </span>
<span class="c1"># converted to PKCS#8 format</span>
<span class="c1">#</span>
<span class="l l-Scalar l-Scalar-Plain">ENV_RSYSLOG_KEY=\$(awk -vRS=&quot;\n&quot; -vORS=&quot;\\\\\n&quot; &#39;1&#39;  \${RSYSLOG_CLIENT_KEY})</span>


<span class="l l-Scalar l-Scalar-Plain">echo &quot;  type</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">env</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">logging</span><span class="p p-Indicator">:</span>
<span class="w">    </span><span class="nt">syslog</span><span class="p">:</span>
<span class="w">      </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">\&quot;\${StudentGuestIP}\&quot;</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6514</span>
<span class="w">      </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">\&quot;\${ENV_RSYSLOG_SERVER}\&quot;</span>
<span class="w">      </span><span class="nt">cert</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">\&quot;\${ENV_RSYSLOG_CERT}\&quot;</span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">\&quot;\${ENV_RSYSLOG_KEY}\&quot;&quot; &gt;\${ENV_PLAIN}</span>

<span class="c1">#</span>
<span class="c1"># This command adds the public signing key to the plaintext environment yaml.  This key is used inside </span>
<span class="c1"># the Hyper Protect Container Runtime image to verify the signature over workload and environment sections of</span>
<span class="c1"># the contract. </span>
<span class="c1">#</span>
<span class="l l-Scalar l-Scalar-Plain">cat ./pubSigningKey.yaml &gt;&gt; \${ENV_PLAIN}</span>

<span class="c1"># This is the encryption certificate for Hyper Protect Container Runtime and it is</span>
<span class="c1"># provided with the Hyper Protect Virtual Servers v2.1.3 product</span>
<span class="c1">#</span>
<span class="l l-Scalar l-Scalar-Plain">CONTRACT_KEY=/data/lab/hpvs213Certs/ibm-hyper-protect-container-runtime-23.1.0-encrypt.crt</span>

<span class="c1">#</span>
<span class="c1"># This variable holds a random password:</span>
<span class="c1">#</span>
<span class="l l-Scalar l-Scalar-Plain">PASSWORD_ENV=&quot;\$(openssl rand 32 | base64 -w0)&quot;</span>

<span class="c1">#</span>
<span class="c1"># This variable holds the output of the command pipe that</span>
<span class="c1"># takes your plaintext environment yaml (\$ENV_PLAIN) and encrypts it using the password that </span>
<span class="c1"># was generated above (\$PASSWORD_ENV) and then base64 encodes this encrypted environment yaml</span>
<span class="c1">#</span>
<span class="c1"># As long as nobody else knows your random password (\$PASSWORD_ENV) your data is safe.  </span>
<span class="c1"># But, the Hyper Protect Container Runtime has to encrypt it, so it needs your password. </span>
<span class="c1"># How will it get that password securely?  Read the next set of comment lines to find out.</span>
<span class="c1">#</span>
<span class="l l-Scalar l-Scalar-Plain">ENCRYPTED_ENV=&quot;\$(echo -n &quot;\$PASSWORD_ENV&quot; | base64 -d | openssl enc -aes-256-cbc -pbkdf2 -pass stdin -in &quot;\$ENV_PLAIN&quot; | base64 -w0)&quot;</span>

<span class="c1">#</span>
<span class="c1"># This variable provides secure passage for your random password.  How?  </span>
<span class="c1"># It encrypts it with the encryption key of the Hyper Protect Container Runtime (HPCR).</span>
<span class="c1"># (A key that is encrypted by another key is often called a wrapped key).</span>
<span class="c1"># Only the HPCR image has the private key which can decrypt this. It is protected from </span>
<span class="c1"># access from any administrators.  So, malicious actors cannot do anything with this</span>
<span class="c1"># wrapped key, even if they were able to get a hold of it.</span>
<span class="c1">#</span>
<span class="l l-Scalar l-Scalar-Plain">ENCRYPTED_ENV_PASSWORD=&quot;\$(echo -n &quot;\$PASSWORD_ENV&quot; | base64 -d | openssl rsautl -encrypt -inkey \$CONTRACT_KEY -certin | base64 -w0 )&quot;</span>

<span class="c1">#</span>
<span class="c1"># Use the following command to get the encrypted environment section of the contract:</span>
<span class="c1"># This variable holds the output of a concatenation of a header, &quot;hyper-protect-basic&quot;,</span>
<span class="c1"># Your wrapped key, and your encrypted environment yaml.. </span>
<span class="c1">#</span>
<span class="l l-Scalar l-Scalar-Plain">ENV_ENCRYPTED=&quot;hyper-protect-basic.\${ENCRYPTED_ENV_PASSWORD}.\${ENCRYPTED_ENV}&quot;</span>
<span class="c1">#</span>
<span class="c1"># The above variable writes the encrypted environment section to the directory one level above</span>
<span class="c1">#</span>
<span class="l l-Scalar l-Scalar-Plain">echo &quot;\$ENV_ENCRYPTED&quot; &gt; ../\$ENV</span>
<span class="l l-Scalar l-Scalar-Plain">EOF</span>
</code></pre></div>
</li>
</ol>
</li>
<li>
<p>Backup one more directory level:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>..
</code></pre></div>
</li>
<li>
<p>You will create three more files that are convenience scripts, similar to <em>flow.workload</em> and <em>flow.env</em> which you have already created:</p>
<ol>
<li>
<p>The first script will provide some preparation steps.  Create it, peruse it, love it, but don't run it yet:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; flow.prepare</span>

<span class="s"># Use the following command to generate a key pair to sign the contract </span>
<span class="s">openssl genrsa -aes128 -passout pass:test1234 -out private.pem 4096</span>
<span class="s">openssl rsa -in private.pem -passin pass:test1234 -pubout -out public.pem</span>

<span class="s"># The following command is an example of how you can get the signing key:</span>
<span class="s">key=\$(awk -vRS=&quot;\n&quot; -vORS=&quot;\\\\\n&quot; &#39;1&#39; public.pem)</span>
<span class="s">echo &quot;  signingKey: \&quot;\${key%\\\\n}\&quot;&quot; &gt; environment/pubSigningKey.yaml</span>
<span class="s">EOF</span>
</code></pre></div>
</li>
<li>
<p>Create the second script which signs the concatenated workload and environment sections of the contract and then appends the signature as the third and final element of the contract.  Don't run it yet!</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; flow.signature</span>
<span class="s"># combine workload and environment</span>
<span class="s">cat workload.yaml env.yaml | tr -d &#39;\n&#39; &gt; contract.yaml</span>

<span class="s"># Sign the combination from workload and env being approved</span>
<span class="s">echo \$( cat contract.yaml | openssl dgst -sha256 -sign private.pem | openssl enc -base64) | tr -d &#39; &#39; &gt; signature.yaml</span>

<span class="s"># Create user data and add signature:</span>
<span class="s">echo &quot;workload: \$(cat workload.yaml)</span>
<span class="s">env: \$(cat env.yaml)</span>
<span class="s">envWorkloadSignature: \$(cat signature.yaml)&quot; &gt; user_data.yaml</span>

<span class="s">echo &quot;&quot;</span>
<span class="s">echo &quot;import \`pwd\`/user_data.yaml into User Data or copy and paste from below:&quot;</span>
<span class="s">echo &quot;&quot;</span>

<span class="s">cat user_data.yaml</span>
<span class="s">EOF</span>
</code></pre></div>
</li>
<li>
<p>This script isn't strictly necessary for the lab for reasons stated in the comments in the script, but you can create it anyway:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; flow.clear</span>
<span class="s">#</span>
<span class="s"># It isn&#39;t really necessary to run this in our lab environment </span>
<span class="s"># because the other scripts will happily trod on these files </span>
<span class="s"># as necessary.</span>
<span class="s">#</span>
<span class="s"># It is more likely that you would run this after running the</span>
<span class="s"># other scripts in order to remove these files for security</span>
<span class="s"># reasons</span>
<span class="s">#</span>
<span class="s"># But if you ever had a need to save your signing key pair, </span>
<span class="s"># you would want to save private.pem somewhere safe.</span>
<span class="s"># </span>
<span class="s">rm private.pem public.pem</span>
<span class="s">rm environment/pubSigningKey.yaml environment/env.yaml.plaintext</span>
<span class="s">rm workload/workload.yaml.plaintext</span>
<span class="s">rm env.yaml workload.yaml contract.yaml signature.yaml user_data.yaml</span>
<span class="s">EOF</span>
</code></pre></div>
</li>
</ol>
</li>
</ol>
<h2 id="lab-creategrep11contract-encrypt-and-sign-the-contract">Encrypt and sign the contract<a class="headerlink" href="#lab-creategrep11contract-encrypt-and-sign-the-contract" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Create a final helper script which calls the <em>flow.*</em> scripts you created earlier:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; makeContract</span>
<span class="s">. ./flow.prepare</span>
<span class="s">cd workload</span>
<span class="s">. ./flow.workload</span>
<span class="s">cd ../environment</span>
<span class="s">. ./flow.env</span>
<span class="s">cd ..</span>
<span class="s">. ./flow.signature</span>

<span class="s">EOF</span>
</code></pre></div>
</li>
<li>
<p>Now run the helper script that you just created:</p>
<div class="highlight"><pre><span></span><code>.<span class="w"> </span>./makeContract
</code></pre></div>
</li>
</ol>
<p>You will be prompted to enter a passphrase.  In real life this is something that you would set yourself and have to keep track of.  For this lab, the script has hard-coded <code>test1234</code> so you must type that in and press enter when prompted for it.</p>
<p>The script creates the final contract in a file named <code>user_data.yaml</code>.  It also displays the contents of this file to the screen. At the bottom of the output you will see an <em>envWorkloadSignature</em> key.  If there is a gobbledygook value (base64-encoded text) associated with this key then things went well.</p>
<h2 id="lab-creategrep11contract-create-the-startup-file-for-the-hpvs-213-grep11-guest">Create the startup file for the HPVS 2.1.3 <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> guest<a class="headerlink" href="#lab-creategrep11contract-create-the-startup-file-for-the-hpvs-213-grep11-guest" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Create a copy of the <code>user_data.yaml</code> file that your created</p>
<p>The contract that you just created is going to be packaged with some other files into a startup file for the HPVS 2.1.3 guest that will run your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server. One of the files expected is a file named <code>user-data</code> that is just a copy of the <code>user_data.yaml</code> file that was just created</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>-ipv<span class="w"> </span>user_data.yaml<span class="w"> </span>user-data
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Why didn't the script just do the above copy for me</p>
<p>We kept <em>user-data</em> intact in case something went wrong in the process, in which case <em>user_data.yaml</em> may be rubbish but at least you haven't trampled on a good <em>user-data</em> that might already be in use.  </p>
</div>
</li>
<li>
<p>Create <code>vendor-data</code> which is another file required by the process:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; vendor-data</span>
<span class="s">#cloud-config</span>
<span class="s">users:</span>
<span class="s">- default</span>
<span class="s">EOF</span>
</code></pre></div>
</li>
<li>
<p>Create <code>meta-data</code> which is also required, and it will have a hostname tailored for your userid:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; meta-data</span>
<span class="s">local-hostname: $(whoami)-grep11server</span>
<span class="s">EOF</span>
</code></pre></div>
</li>
<li>
<p>Run this command (<abbr title="Red Hat Enterprise Linux">RHEL</abbr>-specific, see product documentation for Ubuntu command) in order to create the startup file, <em>ciiso.iso</em>:</p>
<div class="highlight"><pre><span></span><code>genisoimage<span class="w"> </span>-output<span class="w"> </span>/var/lib/libvirt/images/hpvslab/<span class="k">$(</span>whoami<span class="k">)</span>/ciiso.iso<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-volid<span class="w"> </span>cidata<span class="w"> </span>-joliet<span class="w"> </span>-rock<span class="w"> </span>user-data<span class="w"> </span>meta-data<span class="w"> </span>vendor-data
</code></pre></div>
<p>Your output will look like this:</p>
<details class="- example">
<summary>Output from genisoimage command</summary>
<div class="highlight"><pre><span></span><code>I: -input-charset not specified, using utf-8 (detected in locale settings)
Total translation table size: 0
Total rockridge attributes bytes: 414
Total directory bytes: 0
Path table size(bytes): 10
Max brk space used 0
203 extents written (0 MB)
</code></pre></div>
</details>
</li>
</ol>
<p>Please click the <em>Next</em> link at the bottom of the page to continue with the lab.</p></section><section class="print-page" id="lab-launchgrep11guest"><h1 id="lab-launchgrep11guest-start-the-grep11-server-as-a-secure-execution-enabled-hpvs-213-guest">Start the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server as a <abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr>-enabled, HPVS 2.1.3 guest<a class="headerlink" href="#lab-launchgrep11guest-start-the-grep11-server-as-a-secure-execution-enabled-hpvs-213-guest" title="Permanent link">&para;</a></h1>
<h2 id="lab-launchgrep11guest-launch-the-hpvs-213-grep11-server">launch the HPVS 2.1.3 <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> server<a class="headerlink" href="#lab-launchgrep11guest-launch-the-hpvs-213-grep11-server" title="Permanent link">&para;</a></h2>
<p>You will start this section from your login session on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host, and will soon be instructed to switch to your Ubuntu KVM guest session.</p>
<p>This fancy command figures out the last two characters of your assigned userid and is used in other commands in this section, so that the lab instructions will work for everybody:</p>
<div class="highlight"><pre><span></span><code><span class="nv">suffix</span><span class="o">=</span><span class="k">$(</span><span class="nv">temp</span><span class="o">=</span><span class="k">$(</span>whoami<span class="k">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">temp</span><span class="p">: -2</span><span class="si">}</span><span class="k">)</span>
</code></pre></div>
<p>You aren't going to change anything here since it's already been defined for you by the instructors, but you can display the KVM guest definition of your HPVS 2.1.3 <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>virsh<span class="w"> </span>dumpxml<span class="w"> </span>grep11se<span class="si">${</span><span class="nv">suffix</span><span class="si">}</span>
</code></pre></div>
<details class="- example">
<summary>Definition of KVM guest for <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server</summary>
<div class="highlight"><pre><span></span><code>&lt;domain type=&#39;kvm&#39;&gt;
  &lt;name&gt;grep11se02&lt;/name&gt;
  &lt;uuid&gt;2315f8ea-a340-4506-abbf-ae04cf7ea868&lt;/uuid&gt;
  &lt;metadata&gt;
    &lt;libosinfo:libosinfo xmlns:libosinfo=&quot;http://libosinfo.org/xmlns/libvirt/domain/1.0&quot;&gt;
      &lt;libosinfo:os id=&quot;http://ubuntu.com/ubuntu/20.04&quot;/&gt;
    &lt;/libosinfo:libosinfo&gt;
  &lt;/metadata&gt;
  &lt;memory unit=&#39;KiB&#39;&gt;3903488&lt;/memory&gt;
  &lt;currentMemory unit=&#39;KiB&#39;&gt;3903488&lt;/currentMemory&gt;
  &lt;vcpu placement=&#39;static&#39;&gt;2&lt;/vcpu&gt;
  &lt;os&gt;
    &lt;type arch=&#39;s390x&#39; machine=&#39;s390-ccw-virtio-rhel8.2.0&#39;&gt;hvm&lt;/type&gt;
    &lt;boot dev=&#39;hd&#39;/&gt;
  &lt;/os&gt;
  &lt;cpu mode=&#39;host-model&#39; check=&#39;partial&#39;/&gt;
  &lt;clock offset=&#39;utc&#39;/&gt;
  &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
  &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
  &lt;on_crash&gt;destroy&lt;/on_crash&gt;
  &lt;devices&gt;
    &lt;emulator&gt;/usr/libexec/qemu-kvm&lt;/emulator&gt;
    &lt;disk type=&#39;file&#39; device=&#39;disk&#39;&gt;
      &lt;driver name=&#39;qemu&#39; type=&#39;qcow2&#39; iommu=&#39;on&#39;/&gt;
      &lt;source file=&#39;/var/lib/libvirt/images/hpcr/student02/ibm-hyper-protect-container-runtime-23.1.0.qcow2&#39;/&gt;
      &lt;backingStore/&gt;
      &lt;target dev=&#39;vda&#39; bus=&#39;virtio&#39;/&gt;
      &lt;address type=&#39;ccw&#39; cssid=&#39;0xfe&#39; ssid=&#39;0x0&#39; devno=&#39;0x0000&#39;/&gt;
    &lt;/disk&gt;
    &lt;disk type=&#39;file&#39; device=&#39;disk&#39;&gt;
      &lt;driver name=&#39;qemu&#39; type=&#39;raw&#39; cache=&#39;none&#39; io=&#39;native&#39; iommu=&#39;on&#39;/&gt;
      &lt;source file=&#39;/var/lib/libvirt/images/hpvslab/student02/ciiso.iso&#39;/&gt;
      &lt;target dev=&#39;vdc&#39; bus=&#39;virtio&#39;/&gt;
      &lt;readonly/&gt;
      &lt;address type=&#39;ccw&#39; cssid=&#39;0xfe&#39; ssid=&#39;0x0&#39; devno=&#39;0x0002&#39;/&gt;
    &lt;/disk&gt;
    &lt;controller type=&#39;pci&#39; index=&#39;0&#39; model=&#39;pci-root&#39;/&gt;
    &lt;interface type=&#39;network&#39;&gt;
      &lt;mac address=&#39;52:54:00:b1:e0:11&#39;/&gt;
      &lt;source network=&#39;default&#39;/&gt;
      &lt;model type=&#39;virtio&#39;/&gt;
      &lt;driver name=&#39;vhost&#39; iommu=&#39;on&#39;/&gt;
      &lt;address type=&#39;ccw&#39; cssid=&#39;0xfe&#39; ssid=&#39;0x0&#39; devno=&#39;0x0001&#39;/&gt;
    &lt;/interface&gt;
    &lt;console type=&#39;pty&#39;&gt;
      &lt;target type=&#39;sclp&#39; port=&#39;0&#39;/&gt;
    &lt;/console&gt;
    &lt;audio id=&#39;1&#39; type=&#39;none&#39;/&gt;
    &lt;memballoon model=&#39;none&#39;/&gt;
    &lt;panic model=&#39;s390&#39;/&gt;
  &lt;/devices&gt;
&lt;/domain&gt;
</code></pre></div>
</details>
<p>Start your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server and attach to its console.  Watch the messages carefully.  You should not see any failures:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>virsh<span class="w"> </span>start<span class="w"> </span>grep11se<span class="si">${</span><span class="nv">suffix</span><span class="si">}</span><span class="w"> </span>--console
</code></pre></div>
<details class="- example">
<summary>This is what success looks like</summary>
<div class="highlight"><pre><span></span><code>Domain &#39;grep11se02&#39; started
Connected to domain &#39;grep11se02&#39;
Escape character is ^] (Ctrl + ])
# HPL11 build:23.1.0 enabler:22.11.6
# Tue Feb 14 17:37:53 UTC 2023
# delete old root partition...
# create new root partition...
# encrypt root partition...
# create root filesystem...
# write OS to root disk...
# decrypt user-data...
2 token decrypted, 0 encrypted token ignored
# run attestation...
# set hostname...
# finish root disk setup...
# Tue Feb 14 17:38:18 UTC 2023
# HPL11 build:23.1.0 enabler:22.11.6
# HPL11099I: bootloader end
hpcr-dnslookup[889]: HPL14000I: Network connectivity check completed successfully.
hpcr-logging[1094]: Configuring logging ...
hpcr-logging[1095]: Version [1.1.74]
hpcr-logging[1095]: Configuring logging, input [/var/hyperprotect/user-data.decrypted] ...
hpcr-logging[1095]: HPL01010I: Logging has been setup successfully.
hpcr-logging[1094]: Logging has been configured
hpcr-catch-success[1391]: VSI Status is:  Success
hpcr-catch-success[1391]: VSI has started successfully.
</code></pre></div>
</details>
<p>You will have to enter the <code>Ctrl + ]</code> key-combination to break out of the console.</p>
<h2 id="lab-launchgrep11guest-verify-that-grep11-server-log-messages-are-received-by-rsyslog">verify that <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> server log messages are received by <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr><a class="headerlink" href="#lab-launchgrep11guest-verify-that-grep11-server-log-messages-are-received-by-rsyslog" title="Permanent link">&para;</a></h2>
<p><strong>The logging of the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> server is going to the <em><abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr></em> service that you configured on your Ubuntu guest, so switch to the terminal tab or window for your KVM standard guest.</strong></p>
<p>The arguments to the <em>journalctl</em> command here aren't the most elegant in the world, but, unless midnight passed since you started your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server, you will be able to see messages in <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> from when you just started up your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server:</p>
<div class="highlight"><pre><span></span><code>journalctl<span class="w"> </span>--since<span class="w"> </span>today<span class="w"> </span>--no-pager
</code></pre></div>
<p>There are a lot of messages logged, a veritable trove of treasure for the curious.  Here is an example of what you should be able to see:</p>
<details class="- example">
<summary>Log messages in <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> from starting the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server</summary>
<div class="highlight"><pre><span></span><code>Feb 14 17:38:20 ubuntu2204 vpcnode[1439]: authentication probe
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Linux version 5.4.0-136-generic (buildd@bos02-s390x-017) (gcc version 9.4.0 (Ubuntu 9.4.0-1ubuntu1~20.04.1)) #153-Ubuntu SMP Thu Nov 24 15:57:18 UTC 2022 (Ubuntu 5.4.0-136.153-generic 5.4.218)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  setup.289988: Linux is running under KVM in 64-bit mode
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  setup.b050d0: The maximum memory size is 3812MB
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  numa.196305: NUMA mode: plain
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  cpu.33a262: 2 configured CPUs, 0 standby CPUs
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Write protected kernel read-only data: 14928k
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Zone ranges:
Feb 14 17:38:21 ubuntu2204 kernel[1439]:    DMA      [mem 0x0000000000000000-0x000000007fffffff]
Feb 14 17:38:21 ubuntu2204 kernel[1439]:    Normal   [mem 0x0000000080000000-0x00000000ee3fffff]
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Movable zone start for each node
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Early memory node ranges
Feb 14 17:38:21 ubuntu2204 kernel[1439]:    node   0: [mem 0x0000000000000000-0x00000000ee3fffff]
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Zeroed struct page in unavailable ranges: 7168 pages
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Initmem setup node 0 [mem 0x0000000000000000-0x00000000ee3fffff]
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  On node 0 totalpages: 975872
Feb 14 17:38:21 ubuntu2204 kernel[1439]:    DMA zone: 8192 pages used for memmap
Feb 14 17:38:21 ubuntu2204 kernel[1439]:    DMA zone: 0 pages reserved
Feb 14 17:38:21 ubuntu2204 kernel[1439]:    DMA zone: 524288 pages, LIFO batch:63
Feb 14 17:38:21 ubuntu2204 kernel[1439]:    Normal zone: 7056 pages used for memmap
Feb 14 17:38:21 ubuntu2204 kernel[1439]:    Normal zone: 451584 pages, LIFO batch:63
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  percpu: Embedded 34 pages/cpu s98816 r8192 d32256 u139264
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  pcpu-alloc: s98816 r8192 d32256 u139264 alloc=34*4096
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  pcpu-alloc: [0] 0 [0] 1 
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Built 1 zonelists, mobility grouping on.  Total pages: 960624
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Policy zone: Normal
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Kernel command line: panic=0 blacklist=virtio_rng swiotlb=262144 cloud-init=disabled console=ttyS0 quiet loglevel=0 systemd.show_status=0 printk.time=0 systemd.getty_auto=0 systemd.firstboot=0 module.sig_enforce=1
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Dentry cache hash table entries: 524288 (order: 10, 4194304 bytes, linear)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Inode-cache hash table entries: 262144 (order: 9, 2097152 bytes, linear)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  mem auto-init: stack:off, heap alloc:on, heap free:off
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  software IO TLB: mapped [mem 0x5fffc000-0x7fffc000] (512MB)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Memory: 3277624K/3903488K available (9216K kernel code, 1716K rwdata, 5708K rodata, 3436K init, 960K bss, 625864K reserved, 0K cma-reserved)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  SLUB: HWalign=256, Order=0-3, MinObjects=0, CPUs=2, Nodes=1
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  ftrace: allocating 29715 entries in 117 pages
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  rcu: Hierarchical RCU implementation.
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  rcu: #011RCU restricting CPUs from NR_CPUS=512 to nr_cpu_ids=2.
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  #011Tasks RCU enabled.
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  rcu: RCU calculated value of scheduler-enlistment delay is 10 jiffies.
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  rcu: Adjusting geometry for rcu_fanout_leaf=16, nr_cpu_ids=2
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  NR_IRQS: 3, nr_irqs: 3, preallocated irqs: 3
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  clocksource: tod: mask: 0xffffffffffffffff max_cycles: 0x3b0a9be803b0a9, max_idle_ns: 1805497147909793 ns
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  random: crng init done
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Console: colour dummy device 80x25
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  printk: console [ttyS0] enabled
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  printk: console [ttysclp0] enabled
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Calibrating delay loop (skipped)... 24038.00 BogoMIPS preset
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  pid_max: default: 32768 minimum: 301
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  LSM: Security Framework initializing
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Yama: becoming mindful.
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  AppArmor: AppArmor initialized
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Mount-cache hash table entries: 8192 (order: 4, 65536 bytes, linear)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Mountpoint-cache hash table entries: 8192 (order: 4, 65536 bytes, linear)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  *** VALIDATE tmpfs ***
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  *** VALIDATE proc ***
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  *** VALIDATE cgroup1 ***
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  *** VALIDATE cgroup2 ***
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  rcu: Hierarchical SRCU implementation.
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  smp: Bringing up secondary CPUs ...
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  smp: Brought up 1 node, 2 CPUs
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  devtmpfs: initialized
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  futex hash table entries: 512 (order: 5, 131072 bytes, linear)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  NET: Registered protocol family 16
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  audit: initializing netlink subsys (disabled)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  audit: type=2000 audit(1676396272.929:1): state=initialized audit_enabled=0 res=1
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Spectre V2 mitigation: etokens
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  HugeTLB registered 1.00 MiB page size, pre-allocated 0 pages
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  iommu: Default domain type: Translated 
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  SCSI subsystem initialized
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  NetLabel: Initializing
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  NetLabel:  domain hash size = 128
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  NetLabel:  protocols = UNLABELED CIPSOv4 CALIPSO
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  NetLabel:  unlabeled traffic allowed by default
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  *** VALIDATE bpf ***
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  VFS: Disk quotas dquot_6.6.0
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  VFS: Dquot-cache hash table entries: 512 (order 0, 4096 bytes)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  *** VALIDATE ramfs ***
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  *** VALIDATE hugetlbfs ***
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  AppArmor: AppArmor Filesystem Enabled
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  NET: Registered protocol family 2
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  IP idents hash table entries: 65536 (order: 7, 524288 bytes, linear)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  tcp_listen_portaddr_hash hash table entries: 2048 (order: 3, 32768 bytes, linear)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  TCP established hash table entries: 32768 (order: 6, 262144 bytes, linear)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  TCP bind hash table entries: 32768 (order: 7, 524288 bytes, linear)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  TCP: Hash tables configured (established 32768 bind 32768)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  UDP hash table entries: 2048 (order: 4, 65536 bytes, linear)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  UDP-Lite hash table entries: 2048 (order: 4, 65536 bytes, linear)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  NET: Registered protocol family 1
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  NET: Registered protocol family 44
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Trying to unpack rootfs image as initramfs...
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Freeing initrd memory: 8780K
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  kvm-s390.a3074b: SIE is not available
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  hypfs.7f5705: The hardware system does not support hypfs
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Initialise system trusted keyrings
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Key type blacklist registered
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  workingset: timestamp_bits=42 max_order=20 bucket_order=0
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  zbud: loaded
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  squashfs: version 4.0 (2009/01/31) Phillip Lougher
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  fuse: init (API version 7.31)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  *** VALIDATE fuse ***
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  *** VALIDATE fuse ***
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Platform Keyring initialized
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Key type asymmetric registered
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Asymmetric key parser &#39;x509&#39; registered
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Block layer SCSI generic (bsg) driver version 0.4 loaded (major 250)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  io scheduler mq-deadline registered
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  hvc_iucv.691dff: The z/VM IUCV HVC device driver cannot be used without z/VM
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  loop: module loaded
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  tun: Universal TUN/TAP device driver, 1.6
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  device-mapper: uevent: version 1.0.3
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  device-mapper: ioctl: 4.41.0-ioctl (2019-09-16) initialised: dm-devel@redhat.com
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  cio.b5d5f6: Channel measurement facility initialized using format extended (mode autodetected)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  sclp_sd.ef2911: Store Data request failed (eq=2, di=3, response=0x40f0, flags=0x00, status=0, rc=-5)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  ap.3677f7: The hardware system does not support AP instructions
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  drop_monitor: Initializing network drop monitor service
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  NET: Registered protocol family 10
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Segment Routing with IPv6
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  NET: Registered protocol family 17
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Key type dns_resolver registered
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  registered taskstats version 1
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Loading compiled-in X.509 certificates
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Loaded X.509 cert &#39;Build time autogenerated kernel key: 33ff8022a129d630916009cb7675eb5fd18109f5&#39;
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Loaded X.509 cert &#39;Canonical Ltd. Live Patch Signing: 14df34d1a87cf37625abec039ef2bf521249b969&#39;
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Loaded X.509 cert &#39;Canonical Ltd. Kernel Module Signing: 88f752e560a1e0737e31163a466ad7b70a850c19&#39;
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  blacklist: Loading compiled-in revocation X.509 certificates
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Loaded X.509 cert &#39;Canonical Ltd. Secure Boot Signing: 61482aa2830d0ab2ad5af10b7250da9033ddcef0&#39;
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  zswap: loaded using pool lzo/zbud
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Key type ._fscrypt registered
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Key type .fscrypt registered
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Key type big_key registered
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Key type encrypted registered
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  AppArmor: AppArmor sha1 policy hashing enabled
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  ima: No TPM chip found, activating TPM-bypass!
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  ima: Allocated hash algorithm: sha1
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  ima: No architecture policies found
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  evm: Initialising EVM extended attributes:
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  evm: security.selinux
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  evm: security.SMACK64
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  evm: security.SMACK64EXEC
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  evm: security.SMACK64TRANSMUTE
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  evm: security.SMACK64MMAP
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  evm: security.apparmor
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  evm: security.ima
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  evm: security.capability
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  evm: HMAC attrs: 0x1
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Freeing unused kernel memory: 3436K
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Write protected read-only-after-init data: 88k
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Run /init as init process
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  virtio_blk virtio1: [vda] 816 512-byte logical blocks (418 kB/408 KiB)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  virtio_blk virtio0: [vdb] 209715200 512-byte logical blocks (107 GB/100 GiB)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:   vdb: vdb1 vdb2
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  EXT4-fs (dm-0): mounted filesystem with ordered data mode. Opts: (null)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  EXT4-fs (vdb1): mounted filesystem with ordered data mode. Opts: (null)
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  ISO 9660 Extensions: Microsoft Joliet Level 3
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  ISO 9660 Extensions: RRIP_1991A
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  EXT4-fs (dm-0): re-mounted. Opts: (null)
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  systemd 245.4-4ubuntu3.19 running in system mode. (+PAM +AUDIT +SELINUX +IMA +APPARMOR +SMACK +SYSVINIT +UTMP +LIBCRYPTSETUP +GCRYPT +GNUTLS +ACL +XZ +LZ4 +SECCOMP +BLKID +ELFUTILS +KMOD +IDN2 -IDN +PCRE2 default-hierarchy=hybrid)
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Detected virtualization kvm.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Detected architecture s390x.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Set hostname to &lt;student02-grep11server&gt;.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Initializing machine ID from D-Bus machine ID.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Installed transient /etc/machine-id file.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  /usr/lib/systemd/system-generators/s390-cpi-vars failed with exit status 1.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Created slice system-modprobe.slice.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Created slice system-systemd\x2dfsck.slice.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Created slice User and Session Slice.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Forward Password Requests to Wall Directory Watch.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Set up automount Arbitrary Executable File Formats File System Automount Point.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Slices.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Swap.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Listening on Device-mapper event daemon FIFOs.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Listening on LVM2 poll daemon socket.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Listening on multipathd control socket.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Listening on Syslog Socket.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Listening on fsck to fsckd communication Socket.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Listening on initctl Compatibility Named Pipe.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Listening on Journal Audit Socket.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Listening on Journal Socket (/dev/log).
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Listening on Journal Socket.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Listening on Network Service Netlink Socket.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Listening on udev Control Socket.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Listening on udev Kernel Socket.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Mounting Huge Pages File System...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Mounting POSIX Message Queue File System...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Mounting Kernel Debug File System...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Mounting Kernel Trace File System...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Journal Service...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Set the console keyboard layout...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Create list of static device nodes for the current kernel...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Monitoring of LVM2 mirrors, snapshots etc. using dmeventd or progress polling...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Load Kernel Module chromeos_pstore...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Load Kernel Module drm...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Load Kernel Module efi_pstore...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Load Kernel Module pstore_blk...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Load Kernel Module pstore_zone...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Load Kernel Module ramoops...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Condition check resulted in OpenVSwitch configuration for cleanup being skipped.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Condition check resulted in Set Up Additional Binary Formats being skipped.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting File System Check on Root Device...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Load Kernel Modules...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting udev Coldplug all Devices...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Mounted Huge Pages File System.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Mounted POSIX Message Queue File System.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Mounted Kernel Debug File System.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Mounted Kernel Trace File System.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Create list of static device nodes for the current kernel.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  modprobe@chromeos_pstore.service: Succeeded.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Load Kernel Module chromeos_pstore.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  modprobe@efi_pstore.service: Succeeded.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Load Kernel Module efi_pstore.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  modprobe@pstore_blk.service: Succeeded.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Load Kernel Module pstore_blk.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  modprobe@pstore_zone.service: Succeeded.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Load Kernel Module pstore_zone.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Load Kernel Modules.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Mounting FUSE Control File System...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Mounting Kernel Configuration File System...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Apply Kernel Variables...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Mounted FUSE Control File System.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started File System Check Daemon to report status.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Mounted Kernel Configuration File System.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished File System Check on Root Device.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Remount Root and Kernel File Systems...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Apply Kernel Variables.
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  EXT4-fs (dm-0): re-mounted. Opts: errors=remount-ro
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Remount Root and Kernel File Systems.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Condition check resulted in Rebuild Hardware Database being skipped.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Load/Save Random Seed...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Create System Users...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Create System Users.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Create Static Device Nodes in /dev...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished udev Coldplug all Devices.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting udev Wait for Complete Device Initialization...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Create Static Device Nodes in /dev.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting udev Kernel Device Manager...
Feb 14 17:38:21 ubuntu2204 systemd-journald[1439]:  Journal started
Feb 14 17:38:21 ubuntu2204 systemd-journald[1439]:  Runtime Journal (/run/log/journal/1dcc72ccd9744ca4bf0ed36a45a64fde) is 4.0M, max 32.1M, 28.1M free.
Feb 14 17:38:21 ubuntu2204 systemd-modules-load[1439]:  Failed to find module &#39;ipmi-devintf&#39;
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Journal Service.
Feb 14 17:38:21 ubuntu2204 systemd-sysctl[1439]:  Not setting net/ipv4/conf/all/promote_secondaries (explicit setting exists).
Feb 14 17:38:21 ubuntu2204 systemd-journald[1439]:  Time spent on flushing to /var/log/journal/1dcc72ccd9744ca4bf0ed36a45a64fde is 1.088ms for 239 entries.
Feb 14 17:38:21 ubuntu2204 systemd-journald[1439]:  System Journal (/var/log/journal/1dcc72ccd9744ca4bf0ed36a45a64fde) is 8.0M, max 4.0G, 3.9G free.
Feb 14 17:38:21 ubuntu2204 systemd-sysctl[1439]:  Not setting net/ipv4/conf/default/promote_secondaries (explicit setting exists).
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Flush Journal to Persistent Storage...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Load/Save Random Seed.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  modprobe@drm.service: Succeeded.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Load Kernel Module drm.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  modprobe@ramoops.service: Succeeded.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Load Kernel Module ramoops.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Condition check resulted in Platform Persistent Storage Archival being skipped.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started udev Kernel Device Manager.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Network Service...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Flush Journal to Persistent Storage.
Feb 14 17:38:21 ubuntu2204 systemd-fsck[1439]:  /dev/mapper/luks-83ed88f3-2a74-47bb-b3c1-1b0a2ff3dc03: clean, 27572/6291456 files, 785365/25161728 blocks
Feb 14 17:38:21 ubuntu2204 systemd-networkd[1439]:  Enumeration completed
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Network Service.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Wait for Network to be Configured...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Wait for Network to be Configured.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Set the console keyboard layout.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Condition check resulted in Show Plymouth Boot Screen being skipped.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Dispatch Password Requests to Console Directory Watch.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Condition check resulted in Forward Password Requests to Plymouth Directory Watch being skipped.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Local Encrypted Volumes.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Paths.
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  VFIO - User Level meta-driver version: 0.3
Feb 14 17:38:21 ubuntu2204 systemd-udevd[1439]:  ethtool: autonegotiation is unset or enabled, the speed and duplex are not writable.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Found device /dev/disk/by-uuid/8b336c4a-74e3-4ca8-a907-4c445428b8b7.
Feb 14 17:38:21 ubuntu2204 systemd-udevd[1439]:  Using default interface naming scheme &#39;v245&#39;.
Feb 14 17:38:21 ubuntu2204 systemd-udevd[1439]:  ethtool: autonegotiation is unset or enabled, the speed and duplex are not writable.
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  virtio_net virtio2 enc1: renamed from eth0
Feb 14 17:38:21 ubuntu2204 udevadm[1439]:  systemd-udev-settle.service is deprecated.
Feb 14 17:38:21 ubuntu2204 systemd-networkd[1439]:  eth0: Interface name change detected, eth0 has been renamed to enc1.
Feb 14 17:38:21 ubuntu2204 systemd-udevd[1439]:  Using default interface naming scheme &#39;v245&#39;.
Feb 14 17:38:21 ubuntu2204 systemd-udevd[1439]:  ethtool: autonegotiation is unset or enabled, the speed and duplex are not writable.
Feb 14 17:38:21 ubuntu2204 systemd-networkd[1439]:  enc1: IPv6 successfully enabled
Feb 14 17:38:21 ubuntu2204 systemd-networkd[1439]:  enc1: Link UP
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished udev Wait for Complete Device Initialization.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Device-Mapper Multipath Device Controller...
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  alua: device handler registered
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  emc: device handler registered
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  rdac: device handler registered
Feb 14 17:38:21 ubuntu2204 multipathd[1439]:  --------start up--------
Feb 14 17:38:21 ubuntu2204 multipathd[1439]:  read /etc/multipath.conf
Feb 14 17:38:21 ubuntu2204 multipathd[1439]:  path checkers start up
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Device-Mapper Multipath Device Controller.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Monitoring of LVM2 mirrors, snapshots etc. using dmeventd or progress polling.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Local File Systems (Pre).
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting File System Check on /dev/disk/by-uuid/8b336c4a-74e3-4ca8-a907-4c445428b8b7...
Feb 14 17:38:21 ubuntu2204 systemd-fsck[1439]:  /dev/vdb1: clean, 13/262144 files, 119488/1048064 blocks
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished File System Check on /dev/disk/by-uuid/8b336c4a-74e3-4ca8-a907-4c445428b8b7.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Mounting /boot...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Mounted /boot.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Local File Systems.
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  EXT4-fs (vdb1): mounted filesystem with ordered data mode. Opts: (null)
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Set console font and keymap...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Apply Control Program Identification (CPI)...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Create final runtime dir for shutdown pivot root...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Condition check resulted in LXD - agent - 9p mount being skipped.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Condition check resulted in LXD - agent being skipped.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Tell Plymouth To Write Out Runtime Data...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Condition check resulted in Store a System Token in an EFI Variable being skipped.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Commit a transient machine-id on disk...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Create Volatile Files and Directories...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Create final runtime dir for shutdown pivot root.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Set console font and keymap.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Create Volatile Files and Directories.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Network Name Resolution...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Network Time Synchronization...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Update UTMP about System Boot/Shutdown...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  plymouth-read-write.service: Succeeded.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Tell Plymouth To Write Out Runtime Data.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Update UTMP about System Boot/Shutdown.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  etc-machine\x2did.mount: Succeeded.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Commit a transient machine-id on disk.
Feb 14 17:38:21 ubuntu2204 cpictl[1439]:  /lib/s390-tools/cpictl: line 112: echo: write error: Operation not supported
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  cpi.service: Succeeded.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Apply Control Program Identification (CPI).
Feb 14 17:38:21 ubuntu2204 systemd-resolved[1439]:  Positive Trust Anchors:
Feb 14 17:38:21 ubuntu2204 systemd-resolved[1439]:  . IN DS 20326 8 2 e06d44b80b8f1d39a95c0b0d7c65d08458e880409bbc683457104237c7f8ec8d
Feb 14 17:38:21 ubuntu2204 systemd-resolved[1439]:  Negative trust anchors: 10.in-addr.arpa 16.172.in-addr.arpa 17.172.in-addr.arpa 18.172.in-addr.arpa 19.172.in-addr.arpa 20.172.in-addr.arpa 21.172.in-addr.arpa 22.172.in-addr.arpa 23.172.in-addr.arpa 24.172.in-addr.arpa 25.172.in-addr.arpa 26.172.in-addr.arpa 27.172.in-addr.arpa 28.172.in-addr.arpa 29.172.in-addr.arpa 30.172.in-addr.arpa 31.172.in-addr.arpa 168.192.in-addr.arpa d.f.ip6.arpa corp home internal intranet lan local private test
Feb 14 17:38:21 ubuntu2204 systemd-resolved[1439]:  Using system hostname &#39;student02-grep11server&#39;.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Network Name Resolution.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Network.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Network is Online.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Host and Network Name Lookups.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Condition check resulted in Login to default iSCSI targets being skipped.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Remote File Systems (Pre).
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Remote File Systems.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Availability of block devices...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Network Time Synchronization.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target System Initialization.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Daily Cleanup of Temporary Directories.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target System Time Set.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target System Time Synchronized.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Daily apt download activities.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Daily apt upgrade and clean activities.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Periodic ext4 Online Metadata Check for All Filesystems.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Discard unused blocks once a week.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Refresh fwupd metadata regularly.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Daily rotation of log files.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Daily man-db regeneration.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Message of the Day.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Timer for calling verify disk encryption invoker service.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Timers.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Listening on D-Bus System Message Bus Socket.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Docker Socket for the API.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Listening on Open-iSCSI iscsid Socket.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Listening on UUID daemon activation socket.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Listening on Docker Socket for the API.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Sockets.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Basic System.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Deferred execution scheduler...
Feb 14 17:38:21 ubuntu2204 cron[1439]:  (CRON) INFO (pidfile fd = 3)
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting containerd container runtime...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Condition check resulted in CPACF statistics collection daemon process for Linux on System z being skipped.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Regular background program processing daemon.
Feb 14 17:38:21 ubuntu2204 cron[1439]:  (CRON) INFO (Running @reboot jobs)
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started D-Bus System Message Bus.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Save initial kernel messages after boot.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Configure dump on panic for System z...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Remove Stale Online ext4 Metadata Check Snapshots...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Discard unused blocks on filesystems from /etc/fstab...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Condition check resulted in getty on tty2-tty6 if dbus and logind are not available being skipped.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Login Prompts.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started irqbalance daemon.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Condition check resulted in Set the CPU Frequency Scaling governor being skipped.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Authorization Manager...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Condition check resulted in Pollinate to seed the pseudo random number generator being skipped.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Condition check resulted in fast remote file copy program daemon being skipped.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Logging Configuration...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Login Service...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Permit User Sessions...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Disk Manager...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Rotate log files...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Daily man-db regeneration...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Availability of block devices.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Deferred execution scheduler.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Permit User Sessions.
Feb 14 17:38:21 ubuntu2204 journal[1439]:  udisks daemon version 2.8.4 starting
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Hold until boot process finishes up...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Terminate Plymouth Boot Screen...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  plymouth-quit-wait.service: Succeeded.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Hold until boot process finishes up.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Set console scheme...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Set console scheme.
Feb 14 17:38:21 ubuntu2204 dbus-daemon[1439]:  [system] AppArmor D-Bus mediation is enabled
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  man-db.service: Succeeded.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Daily man-db regeneration.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  e2scrub_reap.service: Succeeded.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Remove Stale Online ext4 Metadata Check Snapshots.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  plymouth-quit.service: Succeeded.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Terminate Plymouth Boot Screen.
Feb 14 17:38:21 ubuntu2204 dumpconf[1439]:  stop on panic configured.
Feb 14 17:38:21 ubuntu2204 polkitd[1439]:  started daemon version 0.105 using authority implementation `local&#39; version `0.105&#39;
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  logrotate.service: Succeeded.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Rotate log files.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Authorization Manager.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Modem Manager...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Configure dump on panic for System z.
Feb 14 17:38:21 ubuntu2204 journal[1439]:  failed to load module mdraid: libbd_mdraid.so.2: cannot open shared object file: No such file or directory
Feb 14 17:38:21 ubuntu2204 ModemManager[1439]:  &lt;info&gt;  ModemManager (version 1.18.6) starting in system bus...
Feb 14 17:38:21 ubuntu2204 journal[1439]:  Failed to load the &#39;mdraid&#39; libblockdev plugin
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Modem Manager.
Feb 14 17:38:21 ubuntu2204 systemd-logind[1439]:  New seat seat0.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Login Service.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Disk Manager.
Feb 14 17:38:21 ubuntu2204 journal[1439]:  Acquired the name org.freedesktop.UDisks2 on the system message bus
Feb 14 17:38:21 ubuntu2204 fstrim[1439]:  /boot: 3.6 GiB (3803447296 bytes) trimmed on /dev/vdb1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.283295581Z&quot; level=info msg=&quot;starting containerd&quot; revision= version=&quot;1.5.9-0ubuntu1~20.04.6&quot;
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  fstrim.service: Succeeded.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Discard unused blocks on filesystems from /etc/fstab.
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.322989175Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.content.v1.content\&quot;...&quot; type=io.containerd.content.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.324771036Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.snapshotter.v1.aufs\&quot;...&quot; type=io.containerd.snapshotter.v1
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  aufs 5.4.3-20200302
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.329621227Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.snapshotter.v1.btrfs\&quot;...&quot; type=io.containerd.snapshotter.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.329814187Z&quot; level=info msg=&quot;skip loading plugin \&quot;io.containerd.snapshotter.v1.btrfs\&quot;...&quot; error=&quot;path /var/lib/containerd/io.containerd.snapshotter.v1.btrfs (ext4) must be a btrfs filesystem to be used with the btrfs snapshotter: skip plugin&quot; type=io.containerd.snapshotter.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.329853950Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.snapshotter.v1.devmapper\&quot;...&quot; type=io.containerd.snapshotter.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.329893496Z&quot; level=warning msg=&quot;failed to load plugin io.containerd.snapshotter.v1.devmapper&quot; error=&quot;devmapper not configured&quot;
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.329921482Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.snapshotter.v1.native\&quot;...&quot; type=io.containerd.snapshotter.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.330054237Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.snapshotter.v1.overlayfs\&quot;...&quot; type=io.containerd.snapshotter.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.330186987Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.snapshotter.v1.zfs\&quot;...&quot; type=io.containerd.snapshotter.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.330298845Z&quot; level=info msg=&quot;skip loading plugin \&quot;io.containerd.snapshotter.v1.zfs\&quot;...&quot; error=&quot;path /var/lib/containerd/io.containerd.snapshotter.v1.zfs must be a zfs filesystem to be used with the zfs snapshotter: skip plugin&quot; type=io.containerd.snapshotter.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.330332378Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.metadata.v1.bolt\&quot;...&quot; type=io.containerd.metadata.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.330358166Z&quot; level=warning msg=&quot;could not use snapshotter devmapper in metadata plugin&quot; error=&quot;devmapper not configured&quot;
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.330383266Z&quot; level=info msg=&quot;metadata content store policy set&quot; policy=shared
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.331033245Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.differ.v1.walking\&quot;...&quot; type=io.containerd.differ.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.331071842Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.gc.v1.scheduler\&quot;...&quot; type=io.containerd.gc.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.331120214Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.service.v1.introspection-service\&quot;...&quot; type=io.containerd.service.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.331183804Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.service.v1.containers-service\&quot;...&quot; type=io.containerd.service.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.331224800Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.service.v1.content-service\&quot;...&quot; type=io.containerd.service.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.331281253Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.service.v1.diff-service\&quot;...&quot; type=io.containerd.service.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.331333354Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.service.v1.images-service\&quot;...&quot; type=io.containerd.service.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.331371665Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.service.v1.leases-service\&quot;...&quot; type=io.containerd.service.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.331407044Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.service.v1.namespaces-service\&quot;...&quot; type=io.containerd.service.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.331436391Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.service.v1.snapshots-service\&quot;...&quot; type=io.containerd.service.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.331473287Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.runtime.v1.linux\&quot;...&quot; type=io.containerd.runtime.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.331544044Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.runtime.v2.task\&quot;...&quot; type=io.containerd.runtime.v2
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.331607188Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.monitor.v1.cgroups\&quot;...&quot; type=io.containerd.monitor.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.331966367Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.service.v1.tasks-service\&quot;...&quot; type=io.containerd.service.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.332026406Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.internal.v1.restart\&quot;...&quot; type=io.containerd.internal.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.332087354Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.grpc.v1.containers\&quot;...&quot; type=io.containerd.grpc.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.332122235Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.grpc.v1.content\&quot;...&quot; type=io.containerd.grpc.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.332152723Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.grpc.v1.diff\&quot;...&quot; type=io.containerd.grpc.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.332187646Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.grpc.v1.events\&quot;...&quot; type=io.containerd.grpc.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.332216938Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.grpc.v1.healthcheck\&quot;...&quot; type=io.containerd.grpc.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.332250263Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.grpc.v1.images\&quot;...&quot; type=io.containerd.grpc.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.332279562Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.grpc.v1.leases\&quot;...&quot; type=io.containerd.grpc.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.332305604Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.grpc.v1.namespaces\&quot;...&quot; type=io.containerd.grpc.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.332327281Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.internal.v1.opt\&quot;...&quot; type=io.containerd.internal.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.332722776Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.grpc.v1.snapshots\&quot;...&quot; type=io.containerd.grpc.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.332754771Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.grpc.v1.tasks\&quot;...&quot; type=io.containerd.grpc.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.332788017Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.grpc.v1.version\&quot;...&quot; type=io.containerd.grpc.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.332812904Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.grpc.v1.cri\&quot;...&quot; type=io.containerd.grpc.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.332902355Z&quot; level=info msg=&quot;Start cri plugin with config {PluginConfig:{ContainerdConfig:{Snapshotter:overlayfs DefaultRuntimeName:runc DefaultRuntime:{Type: Engine: PodAnnotations:[] ContainerAnnotations:[] Root: Options:map[] PrivilegedWithoutHostDevices:false BaseRuntimeSpec:} UntrustedWorkloadRuntime:{Type: Engine: PodAnnotations:[] ContainerAnnotations:[] Root: Options:map[] PrivilegedWithoutHostDevices:false BaseRuntimeSpec:} Runtimes:map[runc:{Type:io.containerd.runc.v2 Engine: PodAnnotations:[] ContainerAnnotations:[] Root: Options:map[BinaryName: CriuImagePath: CriuPath: CriuWorkPath: IoGid:0 IoUid:0 NoNewKeyring:false NoPivotRoot:false Root: ShimCgroup: SystemdCgroup:false] PrivilegedWithoutHostDevices:false BaseRuntimeSpec:}] NoPivot:false DisableSnapshotAnnotations:true DiscardUnpackedLayers:false} CniConfig:{NetworkPluginBinDir:/opt/cni/bin NetworkPluginConfDir:/etc/cni/net.d NetworkPluginMaxConfNum:1 NetworkPluginConfTemplate:} Registry:{ConfigPath: Mirrors:map[] Configs:map[] Auths:map[] Headers:map[]} ImageDecryption:{KeyModel:node} DisableTCPService:true StreamServerAddress:127.0.0.1 StreamServerPort:0 StreamIdleTimeout:4h0m0s EnableSelinux:false SelinuxCategoryRange:1024 SandboxImage:k8s.gcr.io/pause:3.5 StatsCollectPeriod:10 SystemdCgroup:false EnableTLSStreaming:false X509KeyPairStreaming:{TLSCertFile: TLSKeyFile:} MaxContainerLogLineSize:16384 DisableCgroup:false DisableApparmor:false RestrictOOMScoreAdj:false MaxConcurrentDownloads:3 DisableProcMount:false UnsetSeccompProfile: TolerateMissingHugetlbController:true DisableHugetlbController:true IgnoreImageDefinedVolumes:false NetNSMountsUnderStateDir:false} ContainerdRootDir:/var/lib/containerd ContainerdEndpoint:/run/containerd/containerd.sock RootDir:/var/lib/containerd/io.containerd.grpc.v1.cri StateDir:/run/containerd/io.containerd.grpc.v1.cri}&quot;
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.332985899Z&quot; level=info msg=&quot;Connect containerd service&quot;
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.333039151Z&quot; level=info msg=&quot;Get image filesystem path \&quot;/var/lib/containerd/io.containerd.snapshotter.v1.overlayfs\&quot;&quot;
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.333598171Z&quot; level=error msg=&quot;failed to load cni during init, please check CRI plugin status before setting up network for pods&quot; error=&quot;cni config load failed: no network config found in /etc/cni/net.d: cni plugin not initialized: failed to load cni config&quot;
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.333706212Z&quot; level=info msg=&quot;loading plugin \&quot;io.containerd.grpc.v1.introspection\&quot;...&quot; type=io.containerd.grpc.v1
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.333894993Z&quot; level=info msg=serving... address=/run/containerd/containerd.sock.ttrpc
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.333934483Z&quot; level=info msg=serving... address=/run/containerd/containerd.sock
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.333979581Z&quot; level=info msg=&quot;containerd successfully booted in 0.051063s&quot;
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started containerd container runtime.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Docker Application Container Engine...
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.341347775Z&quot; level=info msg=&quot;Start subscribing containerd event&quot;
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.341427731Z&quot; level=info msg=&quot;Start recovering state&quot;
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.341503299Z&quot; level=info msg=&quot;Start event monitor&quot;
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.341527042Z&quot; level=info msg=&quot;Start snapshots syncer&quot;
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.341554437Z&quot; level=info msg=&quot;Start cni network conf syncer&quot;
Feb 14 17:38:21 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:19.341577669Z&quot; level=info msg=&quot;Start streaming server&quot;
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.417162288Z&quot; level=info msg=&quot;Starting up&quot;
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.417747593Z&quot; level=info msg=&quot;detected 127.0.0.53 nameserver, assuming systemd-resolved, so using resolv.conf: /run/systemd/resolve/resolv.conf&quot;
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.418433441Z&quot; level=info msg=&quot;parsed scheme: \&quot;unix\&quot;&quot; module=grpc
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.418471524Z&quot; level=info msg=&quot;scheme \&quot;unix\&quot; not registered, fallback to default scheme&quot; module=grpc
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.418512027Z&quot; level=info msg=&quot;ccResolverWrapper: sending update to cc: {[{unix:///run/containerd/containerd.sock  &lt;nil&gt; 0 &lt;nil&gt;}] &lt;nil&gt; &lt;nil&gt;}&quot; module=grpc
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.418545665Z&quot; level=info msg=&quot;ClientConn switching balancer to \&quot;pick_first\&quot;&quot; module=grpc
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.421022900Z&quot; level=info msg=&quot;parsed scheme: \&quot;unix\&quot;&quot; module=grpc
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.421069661Z&quot; level=info msg=&quot;scheme \&quot;unix\&quot; not registered, fallback to default scheme&quot; module=grpc
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.421103752Z&quot; level=info msg=&quot;ccResolverWrapper: sending update to cc: {[{unix:///run/containerd/containerd.sock  &lt;nil&gt; 0 &lt;nil&gt;}] &lt;nil&gt; &lt;nil&gt;}&quot; module=grpc
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.421137414Z&quot; level=info msg=&quot;ClientConn switching balancer to \&quot;pick_first\&quot;&quot; module=grpc
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.494902961Z&quot; level=info msg=&quot;[graphdriver] using prior storage driver: overlay2&quot;
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.506175790Z&quot; level=warning msg=&quot;Your kernel does not support swap memory limit&quot;
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.506186302Z&quot; level=warning msg=&quot;Your kernel does not support CPU realtime scheduler&quot;
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.506190862Z&quot; level=warning msg=&quot;Your kernel does not support cgroup blkio weight&quot;
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.506194842Z&quot; level=warning msg=&quot;Your kernel does not support cgroup blkio weight_device&quot;
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.506304997Z&quot; level=info msg=&quot;Loading containers: start.&quot;
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  bridge: filtering via arp/ip/ip6tables is no longer available by default. Update your scripts to load br_netfilter if you need this.
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Bridge firewalling registered
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  bpfilter: Loaded bpfilter_umh pid 960
Feb 14 17:38:21 ubuntu2204 journal[1439]:  Started bpfilter
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  Initializing XFRM netlink socket
Feb 14 17:38:21 ubuntu2204 systemd-networkd[1439]:  rtnl: received neighbor for link &#39;3&#39; we don&#39;t know about, ignoring.
Feb 14 17:38:21 ubuntu2204 systemd-networkd[1439]:   message repeated 3 times: [rtnl: received neighbor for link &#39;3&#39; we don&#39;t know about, ignoring.]
Feb 14 17:38:21 ubuntu2204 systemd-udevd[1439]:  ethtool: autonegotiation is unset or enabled, the speed and duplex are not writable.
Feb 14 17:38:21 ubuntu2204 systemd-networkd[1439]:  docker0: Link UP
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.581343022Z&quot; level=info msg=&quot;Default bridge (docker0) is assigned with an IP address 172.17.0.0/16. Daemon option --bip can be used to set a preferred IP address&quot;
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.597014467Z&quot; level=info msg=&quot;Loading containers: done.&quot;
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  var-lib-docker-overlay2-opaque\x2dbug\x2dcheck013158240-merged.mount: Succeeded.
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.613641614Z&quot; level=info msg=&quot;Docker daemon&quot; commit=&quot;20.10.12-0ubuntu2~20.04.1&quot; graphdriver(s)=overlay2 version=20.10.12
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.613739452Z&quot; level=info msg=&quot;Daemon has completed initialization&quot;
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Docker Application Container Engine.
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:19.630818138Z&quot; level=info msg=&quot;API listen on /run/docker.sock&quot;
Feb 14 17:38:21 ubuntu2204 systemd-networkd[1439]:  enc1: Gained carrier
Feb 14 17:38:21 ubuntu2204 systemd-timesyncd[1439]:  Network configuration changed, trying to establish connection.
Feb 14 17:38:21 ubuntu2204 systemd-networkd[1439]:  enc1: DHCPv4 address 172.16.0.62/24 via 172.16.0.1
Feb 14 17:38:21 ubuntu2204 dbus-daemon[1439]:  [system] Activating via systemd: service name=&#39;org.freedesktop.hostname1&#39; unit=&#39;dbus-org.freedesktop.hostname1.service&#39; requested by &#39;:1.1&#39; (uid=100 pid=761 comm=&quot;/lib/systemd/systemd-networkd &quot; label=&quot;unconfined&quot;)
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Hostname Service...
Feb 14 17:38:21 ubuntu2204 kernel[1439]:  IPv6: ADDRCONF(NETDEV_CHANGE): enc1: link becomes ready
Feb 14 17:38:21 ubuntu2204 dbus-daemon[1439]:  [system] Successfully activated service &#39;org.freedesktop.hostname1&#39;
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Hostname Service.
Feb 14 17:38:21 ubuntu2204 systemd-hostnamed[1439]:  Changed host name to &#39;grep11se02&#39;
Feb 14 17:38:21 ubuntu2204 systemd-timesyncd[1439]:  Initial synchronization to time server 185.125.190.58:123 (ntp.ubuntu.com).
Feb 14 17:38:21 ubuntu2204 hpcr-dnslookup[1439]:  HPL14000I: Network connectivity check completed successfully.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Logging Configuration.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Early Initialization.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Logging to remote monitoring server is initiated..
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Logging Configuration...
Feb 14 17:38:21 ubuntu2204 hpcr-logging[1439]:  Configuring logging ...
Feb 14 17:38:21 ubuntu2204 hpcr-logging[1439]:  Version [1.1.74]
Feb 14 17:38:21 ubuntu2204 hpcr-logging[1439]:  Configuring logging, input [/var/hyperprotect/user-data.decrypted] ...
Feb 14 17:38:21 ubuntu2204 hpcr-logging[1439]:  ValidateContractE ...
Feb 14 17:38:21 ubuntu2204 hpcr-logging[1439]:  config written: /etc/rsyslog.d/22-logging.conf
Feb 14 17:38:21 ubuntu2204 hpcr-logging[1439]:  HPL01010I: Logging has been setup successfully.
Feb 14 17:38:21 ubuntu2204 hpcr-logging[1439]:  Logging has been configured
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Logging Configuration.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting System Logging Service...
Feb 14 17:38:21 ubuntu2204 rsyslogd[1439]:  rsyslogd&#39;s groupid changed to 110
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started System Logging Service.
Feb 14 17:38:21 ubuntu2204 rsyslogd[1439]:  rsyslogd&#39;s userid changed to 104
Feb 14 17:38:21 ubuntu2204 rsyslogd[1439]:  [origin software=&quot;rsyslogd&quot; swVersion=&quot;8.2001.0&quot; x-pid=&quot;1099&quot; x-info=&quot;https://www.rsyslog.com&quot;] start
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Synchronizes the Logging Target.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Logging to remote log server is initiated..
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Service that does validation of contract...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting HPCR Registry Authentication...
Feb 14 17:38:21 ubuntu2204 rsyslogd[1439]:  imjournal: No statefile exists, /var/spool/rsyslog/journal_state will be created (ignore if this is first run): No such file or directory [v8.2001.0 try https://www.rsyslog.com/e/2040 ]
Feb 14 17:38:21 ubuntu2204 hpcr-registry-auth[1439]:  Starting Registry Authentication ...
Feb 14 17:38:21 ubuntu2204 hpcr-registry-auth[1439]:  Version [1.0.38]
Feb 14 17:38:21 ubuntu2204 hpcr-registry-auth[1439]:  Writing auth config: /root/.docker/config.json
Feb 14 17:38:21 ubuntu2204 hpcr-contract[1439]:  Welcome to SE Contract Validator
Feb 14 17:38:21 ubuntu2204 hpcr-contract[1439]:  Contract file passed is:  /var/hyperprotect/user-data.decrypted
Feb 14 17:38:21 ubuntu2204 hpcr-registry-auth[1439]:  Registry Authentication started
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished HPCR Registry Authentication.
Feb 14 17:38:21 ubuntu2204 rsyslogd[1439]:  imjournal: journal files changed, reloading...  [v8.2001.0 try https://www.rsyslog.com/e/0 ]
Feb 14 17:38:21 ubuntu2204 hpcr-contract[1439]:  Contract file is valid.
Feb 14 17:38:21 ubuntu2204 hpcr-contract[1439]:  Extracting workload from /var/hyperprotect/user-data.decrypted to /var/hyperprotect/workload-data.decrypted
Feb 14 17:38:21 ubuntu2204 hpcr-contract[1439]:  Extraction completed
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Service that does validation of contract.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Service that does signature validation of Env Workload of contract...
Feb 14 17:38:21 ubuntu2204 hpcr-signature[1439]:  Welcome to SE ENV Workload Signature Validator
Feb 14 17:38:21 ubuntu2204 hpcr-signature[1439]:  Decrypted Contract file passed is:  /var/hyperprotect/workload-data.decrypted
Feb 14 17:38:21 ubuntu2204 hpcr-signature[1439]:  Encrypted Contract file passed is:  /var/hyperprotect/cidata/user-data
Feb 14 17:38:21 ubuntu2204 hpcr-signature[1439]:  Check Dependency params Public key and EnvWorkload signature
Feb 14 17:38:21 ubuntu2204 hpcr-signature[1439]:  Access Public key and EnvWorkload signature
Feb 14 17:38:21 ubuntu2204 hpcr-signature[1439]:  Create combined EnvWorkload contract content
Feb 14 17:38:21 ubuntu2204 hpcr-signature[1439]:  Verify signing key, signature and combined EnvWorkload contract
Feb 14 17:38:21 ubuntu2204 hpcr-signature[1439]:  Verified OK
Feb 14 17:38:21 ubuntu2204 hpcr-signature[1439]:  Successfully verified contract with signature and signing key
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Service that does signature validation of Env Workload of contract.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Contract is unpacked and ready for consumption..
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Set docker image policy...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Service that waits until the user devices are ready...
Feb 14 17:38:21 ubuntu2204 hpcr-image[1439]:  Starting image service...
Feb 14 17:38:21 ubuntu2204 hpcr-image[1439]:  Contract yaml file: /var/hyperprotect/workload-data.decrypted
Feb 14 17:38:21 ubuntu2204 hpcr-image[1439]:  Extracting image contract
Feb 14 17:38:21 ubuntu2204 hpcr-image[1439]:  Successfully extracted Image contract
Feb 14 17:38:21 ubuntu2204 hpcr-image[1439]:  Extracting container contract
Feb 14 17:38:21 ubuntu2204 hpcr-image[1439]:  Checking for image with digest
Feb 14 17:38:21 ubuntu2204 hpcr-image[1439]:  No image for DCT verification
Feb 14 17:38:21 ubuntu2204 hpcr-image[1439]:  Image service completed successfully
Feb 14 17:38:21 ubuntu2204 hpcr-disk-standby[1439]:  Waiting for devices ...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Set docker image policy.
Feb 14 17:38:21 ubuntu2204 hpcr-disk-standby[1439]:  Version [1.0.32]
Feb 14 17:38:21 ubuntu2204 hpcr-disk-standby[1439]:  WaitForDevices input=[/var/hyperprotect/user-data.decrypted], timeout=[2023-02-14 17:53:20.390068206 +0000 UTC m=+900.005943373]
Feb 14 17:38:21 ubuntu2204 hpcr-disk-standby[1439]:  ParseContract ...
Feb 14 17:38:21 ubuntu2204 hpcr-disk-standby[1439]:  ValidateContract ...
Feb 14 17:38:21 ubuntu2204 hpcr-disk-standby[1439]:  MergeVolumes ...
Feb 14 17:38:21 ubuntu2204 hpcr-disk-standby[1439]:  Waiting for devices done done
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Service that waits until the user devices are ready.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Service that mounts the data volumes after they are ready...
Feb 14 17:38:21 ubuntu2204 hpcr-disk-mount[1439]:  Mounting volumes ...
Feb 14 17:38:21 ubuntu2204 hpcr-disk-mount[1439]:  Version [1.0.32]
Feb 14 17:38:21 ubuntu2204 hpcr-disk-mount[1439]:  MountVolumes input=[/var/hyperprotect/user-data.decrypted]
Feb 14 17:38:21 ubuntu2204 hpcr-disk-mount[1439]:  ParseContract ...
Feb 14 17:38:21 ubuntu2204 hpcr-disk-mount[1439]:  ValidateContract ...
Feb 14 17:38:21 ubuntu2204 hpcr-disk-mount[1439]:  MergeVolumes ...
Feb 14 17:38:21 ubuntu2204 hpcr-disk-mount[1439]:  Mounting volumes ...
Feb 14 17:38:21 ubuntu2204 hpcr-disk-mount[1439]:  Mounting volumes done
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Finished Service that mounts the data volumes after they are ready.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Reached target Data volumes are mounted ready to be used..
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Starting Service that creates a set of containers...
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Service that verifies all disks are encrypted and logs output to systemd journal.
Feb 14 17:38:21 ubuntu2204 systemd[1439]:  Started Service that periodically logs entry to trigger verify disk encryption service.
Feb 14 17:38:21 ubuntu2204 verify-disk-encryption[1439]:  Verify disk encryption started...
Feb 14 17:38:21 ubuntu2204 hpcr-container[1439]:  Starting container service...
Feb 14 17:38:21 ubuntu2204 hpcr-container[1439]:  Validating contract...
Feb 14 17:38:21 ubuntu2204 hpcr-container[1439]:  Compose folder /data1/compose created
Feb 14 17:38:21 ubuntu2204 hpcr-container[1439]:  Contract yaml file: /var/hyperprotect/workload-data.decrypted
Feb 14 17:38:21 ubuntu2204 hpcr-container[1439]:  Compose folder: /data1/compose
Feb 14 17:38:21 ubuntu2204 hpcr-container[1439]:  Validation completed
Feb 14 17:38:21 ubuntu2204 hpcr-container[1439]:  Parsing contract...
Feb 14 17:38:21 ubuntu2204 hpcr-container[1439]:  Parsing of the Contract File completed successfully
Feb 14 17:38:21 ubuntu2204 hpcr-container[1439]:  Extracting compose...
Feb 14 17:38:21 ubuntu2204 hpcr-container[1439]:  Extracting done...
Feb 14 17:38:21 ubuntu2204 hpcr-container[1439]:  Extracting the ENV Contents...
Feb 14 17:38:21 ubuntu2204 hpcr-container[1439]:  Writing new env file /data1/compose/.env ...
Feb 14 17:38:21 ubuntu2204 hpcr-container[1439]:  Reading existing env file /data1/compose/.env ...
Feb 14 17:38:21 ubuntu2204 hpcr-container[1439]:  Extracting of environment contents done
Feb 14 17:38:21 ubuntu2204 hpcr-container[1439]:  Check if docker is ready
Feb 14 17:38:21 ubuntu2204 hpcr-container[1439]:  docker-compose.yml file is present in the directory
Feb 14 17:38:21 ubuntu2204 hpcr-container[1439]:  Starting workload containers...
Feb 14 17:38:21 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:20.740416835Z&quot; level=warning msg=&quot;reference for unknown type: &quot; digest=&quot;sha256:a864174faadc39650e61ca45d8a3ceb01ea88602cfe6f4bd4e35c48e60556900&quot; remote=&quot;quay.io/gmoney23/grep11server@sha256:a864174faadc39650e61ca45d8a3ceb01ea88602cfe6f4bd4e35c48e60556900&quot;
Feb 14 17:38:22 ubuntu2204 systemd-networkd[1439]:  enc1: Gained IPv6LL
Feb 14 17:38:22 ubuntu2204 systemd-networkd[1439]:  rtnl: received neighbor for link &#39;4&#39; we don&#39;t know about, ignoring.
Feb 14 17:38:22 ubuntu2204 systemd-networkd[1439]:   message repeated 3 times: [rtnl: received neighbor for link &#39;4&#39; we don&#39;t know about, ignoring.]
Feb 14 17:38:22 ubuntu2204 systemd-udevd[1439]:  ethtool: autonegotiation is unset or enabled, the speed and duplex are not writable.
Feb 14 17:38:22 ubuntu2204 systemd-networkd[1439]:  br-a0e686f1e37f: Link UP
Feb 14 17:38:22 ubuntu2204 systemd[1439]:  var-lib-docker-overlay2-fe252209f8cfc5596c5db84b758e7bffdba1c82197aef3950e7b8521eca255d5\x2dinit-merged.mount: Succeeded.
Feb 14 17:38:23 ubuntu2204 systemd-udevd[1439]:  ethtool: autonegotiation is unset or enabled, the speed and duplex are not writable.
Feb 14 17:38:23 ubuntu2204 systemd-udevd[1439]:  veth3f0ef8a: Could not generate persistent MAC: No data available
Feb 14 17:38:23 ubuntu2204 systemd-udevd[1439]:  ethtool: autonegotiation is unset or enabled, the speed and duplex are not writable.
Feb 14 17:38:23 ubuntu2204 systemd-udevd[1439]:  vetha7147ab: Could not generate persistent MAC: No data available
Feb 14 17:38:23 ubuntu2204 systemd-networkd[1439]:  vetha7147ab: Link UP
Feb 14 17:38:23 ubuntu2204 kernel[1439]:  br-a0e686f1e37f: port 1(vetha7147ab) entered blocking state
Feb 14 17:38:23 ubuntu2204 kernel[1439]:  br-a0e686f1e37f: port 1(vetha7147ab) entered disabled state
Feb 14 17:38:23 ubuntu2204 kernel[1439]:  device vetha7147ab entered promiscuous mode
Feb 14 17:38:23 ubuntu2204 kernel[1439]:  br-a0e686f1e37f: port 1(vetha7147ab) entered blocking state
Feb 14 17:38:23 ubuntu2204 kernel[1439]:  br-a0e686f1e37f: port 1(vetha7147ab) entered forwarding state
Feb 14 17:38:23 ubuntu2204 kernel[1439]:  br-a0e686f1e37f: port 1(vetha7147ab) entered disabled state
Feb 14 17:38:23 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:22.985307486Z&quot; level=info msg=&quot;No non-localhost DNS nameservers are left in resolv.conf. Using default external servers: [nameserver 8.8.8.8 nameserver 8.8.4.4]&quot;
Feb 14 17:38:23 ubuntu2204 dockerd[1439]:  time=&quot;2023-02-14T17:38:22.985477569Z&quot; level=info msg=&quot;IPv6 enabled; Adding default IPv6 external servers: [nameserver 2001:4860:4860::8888 nameserver 2001:4860:4860::8844]&quot;
Feb 14 17:38:23 ubuntu2204 containerd[1439]:  time=&quot;2023-02-14T17:38:23.025615368Z&quot; level=info msg=&quot;starting signal loop&quot; namespace=moby path=/run/containerd/io.containerd.runtime.v2.task/moby/af2cd1486e7fe84a95c95ec9f22141a516de4eb42826e3e81ca565dc1476c931 pid=1305
Feb 14 17:38:23 ubuntu2204 systemd[1439]:  run-docker-runtime\x2drunc-moby-af2cd1486e7fe84a95c95ec9f22141a516de4eb42826e3e81ca565dc1476c931-runc.rizuDd.mount: Succeeded.
Feb 14 17:38:23 ubuntu2204 kernel[1439]:  cgroup: cgroup: disabling cgroup2 socket matching due to net_prio or net_cls activation
Feb 14 17:38:23 ubuntu2204 kernel[1439]:  eth0: renamed from veth3f0ef8a
Feb 14 17:38:23 ubuntu2204 systemd-networkd[1439]:  vetha7147ab: Gained carrier
Feb 14 17:38:23 ubuntu2204 systemd-networkd[1439]:  br-a0e686f1e37f: Gained carrier
Feb 14 17:38:23 ubuntu2204 kernel[1439]:  IPv6: ADDRCONF(NETDEV_CHANGE): vetha7147ab: link becomes ready
Feb 14 17:38:23 ubuntu2204 kernel[1439]:  br-a0e686f1e37f: port 1(vetha7147ab) entered blocking state
Feb 14 17:38:23 ubuntu2204 kernel[1439]:  br-a0e686f1e37f: port 1(vetha7147ab) entered forwarding state
Feb 14 17:38:23 ubuntu2204 kernel[1439]:  IPv6: ADDRCONF(NETDEV_CHANGE): br-a0e686f1e37f: link becomes ready
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  Docker Compose Logs:
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:   student02-ep11server Pulling
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  620e494ced91 Pulling fs layer
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  6c8a4d0d91d5 Pulling fs layer
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  870d2d701868 Pulling fs layer
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  17cad8585d31 Pulling fs layer
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  957151557b52 Pulling fs layer
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  356d6d7e116b Pulling fs layer
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  e90fb9a2f971 Pulling fs layer
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  6792527a66d0 Pulling fs layer
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  c5f3a9d4fd2b Pulling fs layer
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  f23b28cea2a0 Pulling fs layer
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  17cad8585d31 Waiting
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  957151557b52 Waiting
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  356d6d7e116b Waiting
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  e90fb9a2f971 Waiting
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  6792527a66d0 Waiting
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  c5f3a9d4fd2b Waiting
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  f23b28cea2a0 Waiting
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  620e494ced91 Downloading [==================================&gt;                ]     613B/890B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  620e494ced91 Downloading [==================================================&gt;]     890B/890B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  620e494ced91 Verifying Checksum
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  620e494ced91 Download complete
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  620e494ced91 Extracting [==================================================&gt;]     890B/890B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  620e494ced91 Extracting [==================================================&gt;]     890B/890B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  6c8a4d0d91d5 Downloading [&gt;                                                  ]  1.979kB/113.9kB
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  870d2d701868 Downloading [&gt;                                                  ]  189.2kB/18.69MB
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  6c8a4d0d91d5 Downloading [==================================================&gt;]  113.9kB/113.9kB
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  6c8a4d0d91d5 Verifying Checksum
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  6c8a4d0d91d5 Download complete
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  620e494ced91 Pull complete
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  6c8a4d0d91d5 Extracting [==============&gt;                                    ]  32.77kB/113.9kB
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  870d2d701868 Downloading [====================&gt;                              ]  7.829MB/18.69MB
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  6c8a4d0d91d5 Extracting [==================================================&gt;]  113.9kB/113.9kB
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  6c8a4d0d91d5 Extracting [==================================================&gt;]  113.9kB/113.9kB
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  6c8a4d0d91d5 Pull complete
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  870d2d701868 Downloading [==============================================&gt;    ]  17.42MB/18.69MB
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  957151557b52 Downloading [==================================================&gt;]     167B/167B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  957151557b52 Verifying Checksum
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  957151557b52 Download complete
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  870d2d701868 Verifying Checksum
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  870d2d701868 Download complete
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  870d2d701868 Extracting [&gt;                                                  ]  196.6kB/18.69MB
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  17cad8585d31 Downloading [&gt;                                                  ]  73.12kB/6.994MB
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  870d2d701868 Extracting [=======&gt;                                           ]  2.949MB/18.69MB
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  356d6d7e116b Downloading [==================================================&gt;]     174B/174B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  356d6d7e116b Verifying Checksum
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  356d6d7e116b Download complete
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  e90fb9a2f971 Downloading [==================================================&gt;]     156B/156B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  e90fb9a2f971 Verifying Checksum
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  e90fb9a2f971 Download complete
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  870d2d701868 Extracting [===============&gt;                                   ]  5.702MB/18.69MB
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  17cad8585d31 Downloading [======================================&gt;            ]  5.355MB/6.994MB
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  17cad8585d31 Verifying Checksum
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  17cad8585d31 Download complete
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  c5f3a9d4fd2b Downloading [==================================================&gt;]     145B/145B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  6792527a66d0 Downloading [==================================================&gt;]     139B/139B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  c5f3a9d4fd2b Verifying Checksum
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  c5f3a9d4fd2b Download complete
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  6792527a66d0 Verifying Checksum
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  6792527a66d0 Download complete
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  870d2d701868 Extracting [=======================&gt;                           ]  8.847MB/18.69MB
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  870d2d701868 Extracting [==================================================&gt;]  18.69MB/18.69MB
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  870d2d701868 Pull complete
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  17cad8585d31 Extracting [&gt;                                                  ]   98.3kB/6.994MB
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  f23b28cea2a0 Downloading [==================================================&gt;]     142B/142B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  f23b28cea2a0 Verifying Checksum
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  f23b28cea2a0 Download complete
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  17cad8585d31 Extracting [==========&gt;                                        ]  1.475MB/6.994MB
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  17cad8585d31 Extracting [===================================&gt;               ]  5.014MB/6.994MB
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  17cad8585d31 Extracting [==================================================&gt;]  6.994MB/6.994MB
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  17cad8585d31 Pull complete
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  957151557b52 Extracting [==================================================&gt;]     167B/167B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  957151557b52 Extracting [==================================================&gt;]     167B/167B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  957151557b52 Pull complete
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  356d6d7e116b Extracting [==================================================&gt;]     174B/174B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  356d6d7e116b Extracting [==================================================&gt;]     174B/174B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  356d6d7e116b Pull complete
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  e90fb9a2f971 Extracting [==================================================&gt;]     156B/156B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  e90fb9a2f971 Extracting [==================================================&gt;]     156B/156B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  e90fb9a2f971 Pull complete
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  6792527a66d0 Extracting [==================================================&gt;]     139B/139B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  6792527a66d0 Extracting [==================================================&gt;]     139B/139B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  6792527a66d0 Pull complete
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  c5f3a9d4fd2b Extracting [==================================================&gt;]     145B/145B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  c5f3a9d4fd2b Extracting [==================================================&gt;]     145B/145B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  c5f3a9d4fd2b Pull complete
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  f23b28cea2a0 Extracting [==================================================&gt;]     142B/142B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  f23b28cea2a0 Extracting [==================================================&gt;]     142B/142B
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  f23b28cea2a0 Pull complete
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  student02-ep11server Pulled
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  Network compose_default  Creating
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  Network compose_default  Created
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  Container compose-student02-ep11server-1  Creating
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  Container compose-student02-ep11server-1  Created
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  Container compose-student02-ep11server-1  Starting
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  Container compose-student02-ep11server-1  Started
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[37mDEBU#033[0m[2023-02-14 17:38:23.375] Setting log level [debug] for module util    
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[37mDEBU#033[0m[2023-02-14 17:38:23.375] Setting log level [debug] for module keyprotect 
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[37mDEBU#033[0m[2023-02-14 17:38:23.375] Setting log level [debug] for module ep11server 
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[37mDEBU#033[0m[2023-02-14 17:38:23.375] Setting log level [debug] for module config  
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[37mDEBU#033[0m[2023-02-14 17:38:23.375] Setting log level [debug] for module main    
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[37mDEBU#033[0m[2023-02-14 17:38:23.375] Setting log level [debug] for module entry   
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[37mDEBU#033[0m[2023-02-14 17:38:23.375] Service recoverykeyseedtemplate not found     #033[37mmodule#033[0m=entry
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[37mDEBU#033[0m[2023-02-14 17:38:23.375] Service connectiontemplate not found          #033[37mmodule#033[0m=entry
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[37mDEBU#033[0m[2023-02-14 17:38:23.375] Service basevoteridtemplate not found         #033[37mmodule#033[0m=entry
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[37mDEBU#033[0m[2023-02-14 17:38:23.375] Service logging not found                     #033[37mmodule#033[0m=entry
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[37mDEBU#033[0m[2023-02-14 17:38:23.375] Service clientconnectiontemplate not found    #033[37mmodule#033[0m=entry
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[37mDEBU#033[0m[2023-02-14 17:38:23.375] Service ep11manager not found                 #033[37mmodule#033[0m=entry
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[37mDEBU#033[0m[2023-02-14 17:38:23.375] Service domaintemplate not found              #033[37mmodule#033[0m=entry
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[37mDEBU#033[0m[2023-02-14 17:38:23.375] Service remoteconfig not found                #033[37mmodule#033[0m=entry
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[37mDEBU#033[0m[2023-02-14 17:38:23.375] Service directiamauthtemplate not found       #033[37mmodule#033[0m=entry
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[37mDEBU#033[0m[2023-02-14 17:38:23.375] Service tls not found                         #033[37mmodule#033[0m=entry
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[37mDEBU#033[0m[2023-02-14 17:38:23.375] Service postgrestemplate not found            #033[37mmodule#033[0m=entry
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[36mINFO#033[0m[2023-02-14 17:38:23.396] Starting GREP11 server []                     #033[36mmodule#033[0m=entry
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[36mINFO#033[0m[2023-02-14 17:38:23.396] TLS is enabled                                #033[36mmodule#033[0m=config
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[37mDEBU#033[0m[2023-02-14 17:38:23.396] Creating new listener for *config.EP11CryptoOpts  #033[37mmodule#033[0m=entry
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] hostname:port=192.168.22.80:9001
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::c16OpenAdapter: Entering ...
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::c16OpenAdapter: server_idx=0
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::makeNewC16ClientStub: target_str=192.168.22.80:9001
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::c16OpenAdapter: Done.
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::c16Request: Entering ...
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::c16DoEP11Request: Checking target i=0, ap_id=8, dom_id=22
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client:c16DoEP11Request: Target still on same server
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client:c16DoEP11Request: Target list check passed. (server_idx=0)
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] C16ClientStub::DoRequest: targets_num: 1
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] C16ClientStub::DoRequest: req_len: 37
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] C16ClientStub::DoRequest: Setting resp_len: 54
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::c16Request: Done.
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::c16OpenAdapter: Entering ...
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::c16OpenAdapter: server_idx=0
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::makeNewC16ClientStub: target_str=192.168.22.80:9001
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::c16OpenAdapter: Done.
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::c16Request: Entering ...
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::c16DoEP11Request: Checking target i=0, ap_id=10, dom_id=22
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client:c16DoEP11Request: Target still on same server
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client:c16DoEP11Request: Target list check passed. (server_idx=0)
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] C16ClientStub::DoRequest: targets_num: 1
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] C16ClientStub::DoRequest: req_len: 37
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  Docker compose result:
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:   CONTAINER ID   IMAGE                           COMMAND                 CREATED        STATUS                  PORTS                                                  NAMES
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  af2cd1486e7f   quay.io/gmoney23/grep11server   &quot;/usr/bin/ep11server&quot;   1 second ago   Up Less than a second   0.0.0.0:9876-&gt;9876/tcp, :::9876-&gt;9876/tcp, 50052/tcp   compose-student02-ep11server-1
Feb 14 17:38:23 ubuntu2204 hpcr-container[1439]:  Container service completed successfully
Feb 14 17:38:23 ubuntu2204 systemd[1439]:  Finished Service that creates a set of containers.
Feb 14 17:38:23 ubuntu2204 systemd[1439]:  Reached target Workload is up and running..
Feb 14 17:38:23 ubuntu2204 systemd[1439]:  Starting Phase2 Catch Service...
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] C16ClientStub::DoRequest: Setting resp_len: 54
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::c16Request: Done.
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::c16Request: Entering ...
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::c16DoEP11Request: Checking target i=0, ap_id=8, dom_id=22
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client:c16DoEP11Request: Target still on same server
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::c16DoEP11Request: Checking target i=1, ap_id=10, dom_id=22
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client:c16DoEP11Request: Target still on same server
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client:c16DoEP11Request: Target list check passed. (server_idx=0)
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] C16ClientStub::DoRequest: targets_num: 2
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] C16ClientStub::DoRequest: req_len: 46
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] C16ClientStub::DoRequest: Setting resp_len: 438
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::c16Request: Done.
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::c16Request: Entering ...
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::c16DoEP11Request: Checking target i=0, ap_id=8, dom_id=22
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client:c16DoEP11Request: Target still on same server
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::c16DoEP11Request: Checking target i=1, ap_id=10, dom_id=22
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client:c16DoEP11Request: Target still on same server
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client:c16DoEP11Request: Target list check passed. (server_idx=0)
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] C16ClientStub::DoRequest: targets_num: 2
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] C16ClientStub::DoRequest: req_len: 58
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] C16ClientStub::DoRequest: Setting resp_len: 254
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  [c16client][debug] c16client::c16Request: Done.
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[36mINFO#033[0m[2023-02-14 17:38:23.440] admin.ep11.go:ep11server.(*CryptoServer).adminCommand:53: m_admin returned an error  #033[36merror code#033[0m=CKR_IBM_TARGET_INVALID #033[36mmodule#033[0m=util
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[36mINFO#033[0m[2023-02-14 17:38:23.441] admin.ep11.go:ep11server.(*CryptoServer).adminCommand:53: m_admin returned an error  #033[36merror code#033[0m=CKR_IBM_TARGET_INVALID #033[36mmodule#033[0m=util
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:   message repeated 6 times: [#033[36mINFO#033[0m[2023-02-14 17:38:23.441] admin.ep11.go:ep11server.(*CryptoServer).adminCommand:53: m_admin returned an error  #033[36merror code#033[0m=CKR_IBM_TARGET_INVALID #033[36mmodule#033[0m=util]
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[36mINFO#033[0m[2023-02-14 17:38:23.442] admin.ep11.go:ep11server.(*CryptoServer).adminCommand:53: m_admin returned an error  #033[36merror code#033[0m=CKR_IBM_TARGET_INVALID #033[36mmodule#033[0m=util
Feb 14 17:38:23 ubuntu2204 hpcr-catch-success[1439]:  Catch service start
Feb 14 17:38:23 ubuntu2204 hpcr-catch-success[1439]:  VSI Status is:  Success
Feb 14 17:38:23 ubuntu2204 hpcr-catch-success[1439]:  VSI has started successfully.
Feb 14 17:38:23 ubuntu2204 hpcr-catch-success[1439]:  Catch service completed successfully
Feb 14 17:38:23 ubuntu2204 systemd[1439]:  Finished Phase2 Catch Service.
Feb 14 17:38:23 ubuntu2204 systemd[1439]:  Reached target Multi-User System.
Feb 14 17:38:23 ubuntu2204 systemd[1439]:  Reached target Graphical Interface.
Feb 14 17:38:23 ubuntu2204 systemd[1439]:  Starting Update UTMP about System Runlevel Changes...
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[36mINFO#033[0m[2023-02-14 17:38:23.443] admin.ep11.go:ep11server.(*CryptoServer).adminCommand:53: m_admin returned an error  #033[36merror code#033[0m=CKR_IBM_TARGET_INVALID #033[36mmodule#033[0m=util
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[36mINFO#033[0m[2023-02-14 17:38:23.449] admin.ep11.go:ep11server.(*CryptoServer).adminCommand:53: m_admin returned an error  #033[36merror code#033[0m=CKR_IBM_TARGET_INVALID #033[36mmodule#033[0m=util
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[36mINFO#033[0m[2023-02-14 17:38:23.450] admin.ep11.go:ep11server.(*CryptoServer).adminCommand:53: m_admin returned an error  #033[36merror code#033[0m=CKR_IBM_TARGET_INVALID #033[36mmodule#033[0m=util
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[36mINFO#033[0m[2023-02-14 17:38:23.450] admin.ep11.go:ep11server.(*CryptoServer).adminCommand:53: m_admin returned an error  #033[36merror code#033[0m=CKR_IBM_TARGET_INVALID #033[36mmodule#033[0m=util
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[37mDEBU#033[0m[2023-02-14 17:38:23.450] Creating service backing server for *config.EP11CryptoOpts  #033[37mmodule#033[0m=entry
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[36mINFO#033[0m[2023-02-14 17:38:23.450] Loading ep11crypto service                    #033[36mmodule#033[0m=entry
Feb 14 17:38:23 ubuntu2204 compose-student02-ep11server-1[1439]:  #033[36mINFO#033[0m[2023-02-14 17:38:23.450] GRPC Server listening on [::]:9876 with TLS enabled  #033[36mmodule#033[0m=entry
Feb 14 17:38:23 ubuntu2204 systemd[1439]:  systemd-update-utmp-runlevel.service: Succeeded.
Feb 14 17:38:23 ubuntu2204 systemd[1439]:  Finished Update UTMP about System Runlevel Changes.
Feb 14 17:38:23 ubuntu2204 systemd[1439]:  Startup finished in 26.715s (kernel) + 4.878s (userspace) = 31.594s.
Feb 14 17:38:23 ubuntu2204 systemd[1439]:  dmesg.service: Succeeded.
Feb 14 17:38:24 ubuntu2204 systemd-networkd[1439]:  br-a0e686f1e37f: Gained IPv6LL
Feb 14 17:38:25 ubuntu2204 systemd-networkd[1439]:  vetha7147ab: Gained IPv6LL
Feb 14 17:38:25 ubuntu2204 verify-disk-encryption[1439]:  HPL13000I: Verify LUKS Encryption
Feb 14 17:38:25 ubuntu2204 systemd[1439]:  verify-disk-encryption-invoker.service: Succeeded.
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  Return value for disk-encrypt: 0
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  Executed cmd: (&#39;lsblk&#39;, &#39;-b&#39;, &#39;-n&#39;, &#39;-o&#39;, &#39;NAME,SIZE&#39;)
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  Return value: 0
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  Stdout: vda                                                 417792
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  vdb                                           107374182400
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  ├─vdb1                                          4292870144
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  └─vdb2                                        103079215104
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:    └─luks-83ed88f3-2a74-47bb-b3c1-1b0a2ff3dc03 103062437888
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  List of volumes greater than or equal to 10GB are: [&#39;/dev/vdb&#39;]
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  Updated Volumes list: [&#39;/dev/vdb2&#39;]
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  Executed cmd: (&#39;lsblk&#39;, &#39;/dev/vdb2&#39;, &#39;-b&#39;, &#39;-n&#39;, &#39;-o&#39;, &#39;NAME,MOUNTPOINT&#39;)
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  Return value: 0
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  Stdout: vdb2
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  └─luks-83ed88f3-2a74-47bb-b3c1-1b0a2ff3dc03 /
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  Boot volume is /dev/vdb2
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  Volume /dev/vdb2 has mount point /
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  List of mounted volumes are: [&#39;/dev/vdb2&#39;]
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  Verifying the boot disk /dev/vdb2 is encrypted or not
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  Executed cmd: (&#39;lsblk&#39;, &#39;/dev/vdb2&#39;, &#39;-b&#39;, &#39;-n&#39;, &#39;-o&#39;, &#39;NAME,TYPE&#39;)
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  Return value: 0
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  Stdout: vdb2                                        part
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  └─luks-83ed88f3-2a74-47bb-b3c1-1b0a2ff3dc03 crypt
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  Executed cmd: (&#39;cryptsetup&#39;, &#39;isLuks&#39;, &#39;/dev/vdb2&#39;)
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  Return value: 0
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  Executed cmd: (&#39;cryptsetup&#39;, &#39;luksDump&#39;, &#39;/dev/vdb2&#39;)
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  Return value: 0
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  Checked for mount point /, LUKS encryption with 1 key slot found
Feb 14 17:38:26 ubuntu2204 verify-disk-encryption[1439]:  HPL13001I: Boot volume and all the data volumes are encrypted
Feb 14 17:38:49 ubuntu2204 systemd[1439]:  systemd-fsckd.service: Succeeded.
Feb 14 17:38:50 ubuntu2204 systemd[1439]:  systemd-hostnamed.service: Succeeded.
Feb 14 17:39:15 ubuntu2204 systemd[1439]:  Starting Online ext4 Metadata Check for All Filesystems...
Feb 14 17:39:15 ubuntu2204 systemd[1439]:  e2scrub_all.service: Succeeded.
Feb 14 17:39:15 ubuntu2204 systemd[1439]:  Finished Online ext4 Metadata Check for All Filesystems.
</code></pre></div>
</details>
<p><em>Congratulations!</em> You have reached a significant milestone in the lab.  You have successfully configured and launched your HPVS 2.1.3 <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server. Now all that is left is to test its functionality with some sample <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> client code.  You will set that up on your Ubuntu KVM guest.  Click <em>Next</em> at the bottom right of the page to continue.</p></section><section class="print-page" id="lab-configuregrep11testclient"><h1 id="lab-configuregrep11testclient-run-grep11-client-code">Run <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Client code<a class="headerlink" href="#lab-configuregrep11testclient-run-grep11-client-code" title="Permanent link">&para;</a></h1>
<h2 id="lab-configuregrep11testclient-overview-of-this-section">Overview of this section<a class="headerlink" href="#lab-configuregrep11testclient-overview-of-this-section" title="Permanent link">&para;</a></h2>
<p>You have done a lot of work in this lab, have learned so much, and yet have had so much fun! 
It doesn't get any better than this!</p>
<p>Let's recap the highlights:</p>
<p>You configured an <em><abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr></em> service on your Ubuntu KVM guest</p>
<p>You did the X509 work to enable communication between the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> server and the <em><abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr></em> service.</p>
<p>You did the X509 work to enable the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server to communicate with the <abbr title="This is an instructor-coined acronym for the Crypto Express Network API for Secure Execution Enclaves component of the Hyper Protect Virtual Servers product. You will not see CENA4SEE in official product documentation- official documentation often uses the mnemonic c16 to refer to the server provided by Crypto Expres Network API for Secure Execution Enclaves.  You can consider 'c16', 'c16 server'  and 'CENA4SEE' to be synonyms of each other for the purposes of this lab.">CENA4SEE</abbr> server.</p>
<p>You did the server side of the X509 work to enable the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server to communicate with <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> clients</p>
<p>You created the <em>contract</em> expected by HPVS 2.1.3.</p>
<p>You successfully launched the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> server as a <abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr>-protected HPVS 2.1.3 KVM Guest!</p>
<p>Your last task is to run some <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> client code to verify that everything is working from end-to-end!</p>
<p>In this section you will:</p>
<ol>
<li>
<p>Install Go on your Ubuntu KVM guest</p>
</li>
<li>
<p>Download the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> client code from GitHub</p>
</li>
<li>
<p>Do the client side of the X509 work to enable communication between your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server and this <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> client code.</p>
</li>
<li>
<p>Modify the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> client code to point to your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server</p>
</li>
<li>
<p>Run the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> client code</p>
</li>
</ol>
<h2 id="lab-configuregrep11testclient-start-this-section-in-your-ubuntu-kvm-guest-session">Start this section in your Ubuntu KVM guest session<a class="headerlink" href="#lab-configuregrep11testclient-start-this-section-in-your-ubuntu-kvm-guest-session" title="Permanent link">&para;</a></h2>
<p>This section starts out in your Ubuntu KVM guest, which is where you should be if you have been doing the lab in order in one sitting. 
If you are not logged in, the command to log in is <code>ssh -p ${Student_SSH_Port} -l student 192.168.22.64</code></p>
<h2 id="lab-configuregrep11testclient-install-go">Install Go<a class="headerlink" href="#lab-configuregrep11testclient-install-go" title="Permanent link">&para;</a></h2>
<p>The <em>Go</em> language compiler is not installed on your system.  Prove that with this command:</p>
<div class="highlight"><pre><span></span><code>go<span class="w"> </span>version
</code></pre></div>
<p>You'll be given some ideas on how to install it:</p>
<details class="- example">
<summary>Output when go is not installed</summary>
<div class="highlight"><pre><span></span><code>sudo snap install go         # version 1.19.5, or
sudo apt  install golang-go  # version 2:1.18~0ubuntu2
sudo apt  install gccgo-go   # version 2:1.18~0ubuntu2
See &#39;snap info go&#39; for additional versions.
</code></pre></div>
</details>
<p>Please pick the second option to avoid breaking this lab's warranty <img alt="😄" class="twemoji" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f604.svg" title=":smile:" /> as that is the option the instructors used when creating the lab.</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>golang-go
</code></pre></div>
<p>Type <em>Y</em> when prompted to continue.  The output from the installation will look like this:</p>
<details class="- example">
<summary>Output from installation of golang-go</summary>
<div class="highlight"><pre><span></span><code>Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  bzip2 cpp cpp-11 fontconfig-config fonts-dejavu-core g++ g++-11 gcc gcc-11 gcc-11-base golang-1.18-go golang-1.18-src golang-src libasan6
  libatomic1 libc-dev-bin libc-devtools libc6-dev libcc1-0 libcrypt-dev libdeflate0 libdpkg-perl libfile-fcntllock-perl libfontconfig1
  libfreetype6 libgcc-11-dev libgd3 libgomp1 libisl23 libitm1 libjbig0 libjpeg-turbo8 libjpeg8 libmpc3 libnsl-dev libstdc++-11-dev libtiff5
  libtirpc-dev libubsan1 libwebp7 libxpm4 linux-libc-dev manpages-dev pkg-config rpcsvc-proto
Suggested packages:
  bzip2-doc cpp-doc gcc-11-locales g++-multilib g++-11-multilib gcc-11-doc gcc-multilib make autoconf automake libtool flex bison gdb
  gcc-doc gcc-11-multilib bzr | brz mercurial subversion glibc-doc debian-keyring bzr libgd-tools libstdc++-11-doc dpkg-dev
The following NEW packages will be installed:
  bzip2 cpp cpp-11 fontconfig-config fonts-dejavu-core g++ g++-11 gcc gcc-11 gcc-11-base golang-1.18-go golang-1.18-src golang-go
  golang-src libasan6 libatomic1 libc-dev-bin libc-devtools libc6-dev libcc1-0 libcrypt-dev libdeflate0 libdpkg-perl libfile-fcntllock-perl
  libfontconfig1 libfreetype6 libgcc-11-dev libgd3 libgomp1 libisl23 libitm1 libjbig0 libjpeg-turbo8 libjpeg8 libmpc3 libnsl-dev
  libstdc++-11-dev libtiff5 libtirpc-dev libubsan1 libwebp7 libxpm4 linux-libc-dev manpages-dev pkg-config rpcsvc-proto
0 upgraded, 46 newly installed, 0 to remove and 12 not upgraded.
Need to get 127 MB of archives.
After this operation, 592 MB of additional disk space will be used.
Do you want to continue? [Y/n] Y
Get:1 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x bzip2 s390x 1.0.8-5build1 [34.4 kB]
Get:2 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x gcc-11-base s390x 11.3.0-1ubuntu1~22.04 [20.8 kB]
Get:3 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x libisl23 s390x 0.24-2build1 [701 kB]
Get:4 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x libmpc3 s390x 1.2.1-2build1 [47.7 kB]
Get:5 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x cpp-11 s390x 11.3.0-1ubuntu1~22.04 [7848 kB]
Get:6 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x cpp s390x 4:11.2.0-1ubuntu1 [27.7 kB]
Get:7 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x fonts-dejavu-core all 2.37-2build1 [1041 kB]
Get:8 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x fontconfig-config all 2.13.1-4.2ubuntu5 [29.1 kB]
Get:9 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x libcc1-0 s390x 12.1.0-2ubuntu1~22.04 [46.3 kB]
Get:10 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x libgomp1 s390x 12.1.0-2ubuntu1~22.04 [123 kB]
Get:11 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x libitm1 s390x 12.1.0-2ubuntu1~22.04 [29.9 kB]
Get:12 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x libatomic1 s390x 12.1.0-2ubuntu1~22.04 [9008 B]
Get:13 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x libasan6 s390x 11.3.0-1ubuntu1~22.04 [2242 kB]
Get:14 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x libubsan1 s390x 12.1.0-2ubuntu1~22.04 [967 kB]
Get:15 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x libgcc-11-dev s390x 11.3.0-1ubuntu1~22.04 [825 kB]
Get:16 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x gcc-11 s390x 11.3.0-1ubuntu1~22.04 [15.7 MB]
Get:17 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x gcc s390x 4:11.2.0-1ubuntu1 [5118 B]
Get:18 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x libc-dev-bin s390x 2.35-0ubuntu3.1 [20.0 kB]
Get:19 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x linux-libc-dev s390x 5.15.0-60.66 [1338 kB]
Get:20 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x libcrypt-dev s390x 1:4.4.27-1 [114 kB]
Get:21 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x rpcsvc-proto s390x 1.4.2-0ubuntu6 [64.7 kB]
Get:22 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x libtirpc-dev s390x 1.3.2-2ubuntu0.1 [189 kB]
Get:23 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x libnsl-dev s390x 1.3.0-2build2 [70.9 kB]
Get:24 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x libc6-dev s390x 2.35-0ubuntu3.1 [1499 kB]
Get:25 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x libstdc++-11-dev s390x 11.3.0-1ubuntu1~22.04 [2089 kB]
Get:26 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x g++-11 s390x 11.3.0-1ubuntu1~22.04 [9169 kB]
Get:27 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x g++ s390x 4:11.2.0-1ubuntu1 [1408 B]
Get:28 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x golang-1.18-src all 1.18.1-1ubuntu1 [16.2 MB]
Get:29 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x golang-1.18-go s390x 1.18.1-1ubuntu1 [62.6 MB]
Get:30 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x golang-src all 2:1.18~0ubuntu2 [4438 B]
Get:31 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x golang-go s390x 2:1.18~0ubuntu2 [41.8 kB]
Get:32 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x libfreetype6 s390x 2.11.1+dfsg-1ubuntu0.1 [382 kB]
Get:33 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x libfontconfig1 s390x 2.13.1-4.2ubuntu5 [133 kB]
Get:34 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x libjpeg-turbo8 s390x 2.1.2-0ubuntu1 [119 kB]
Get:35 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x libjpeg8 s390x 8c-2ubuntu10 [2264 B]                                           
Get:36 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x libdeflate0 s390x 1.10-2 [72.1 kB]                                             
Get:37 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x libjbig0 s390x 2.1-3.1ubuntu0.22.04.1 [29.9 kB]                        
Get:38 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x libwebp7 s390x 1.2.2-2 [167 kB]                                                
Get:39 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x libtiff5 s390x 4.3.0-6ubuntu0.3 [178 kB]                               
Get:40 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x libxpm4 s390x 1:3.5.12-1ubuntu0.22.04.1 [36.7 kB]                      
Get:41 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x libgd3 s390x 2.3.0-2ubuntu2 [131 kB]                                           
Get:42 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x libc-devtools s390x 2.35-0ubuntu3.1 [29.2 kB]                          
Get:43 http://ports.ubuntu.com/ubuntu-ports jammy-updates/main s390x libdpkg-perl all 1.21.1ubuntu2.1 [237 kB]                              
Get:44 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x libfile-fcntllock-perl s390x 0.22-3build7 [33.6 kB]                            
Get:45 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x manpages-dev all 5.10-1ubuntu1 [2309 kB]                                       
Get:46 http://ports.ubuntu.com/ubuntu-ports jammy/main s390x pkg-config s390x 0.29.2-1ubuntu3 [47.3 kB]                                     
Fetched 127 MB in 7s (17.1 MB/s)                                                                                                            
Extracting templates from packages: 100%
Selecting previously unselected package bzip2.
(Reading database ... 56573 files and directories currently installed.)
Preparing to unpack .../00-bzip2_1.0.8-5build1_s390x.deb ...
Unpacking bzip2 (1.0.8-5build1) ...
Selecting previously unselected package gcc-11-base:s390x.
Preparing to unpack .../01-gcc-11-base_11.3.0-1ubuntu1~22.04_s390x.deb ...
Unpacking gcc-11-base:s390x (11.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package libisl23:s390x.
Preparing to unpack .../02-libisl23_0.24-2build1_s390x.deb ...
Unpacking libisl23:s390x (0.24-2build1) ...
Selecting previously unselected package libmpc3:s390x.
Preparing to unpack .../03-libmpc3_1.2.1-2build1_s390x.deb ...
Unpacking libmpc3:s390x (1.2.1-2build1) ...
Selecting previously unselected package cpp-11.
Preparing to unpack .../04-cpp-11_11.3.0-1ubuntu1~22.04_s390x.deb ...
Unpacking cpp-11 (11.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package cpp.
Preparing to unpack .../05-cpp_4%3a11.2.0-1ubuntu1_s390x.deb ...
Unpacking cpp (4:11.2.0-1ubuntu1) ...
Selecting previously unselected package fonts-dejavu-core.
Preparing to unpack .../06-fonts-dejavu-core_2.37-2build1_all.deb ...
Unpacking fonts-dejavu-core (2.37-2build1) ...
Selecting previously unselected package fontconfig-config.
Preparing to unpack .../07-fontconfig-config_2.13.1-4.2ubuntu5_all.deb ...
Unpacking fontconfig-config (2.13.1-4.2ubuntu5) ...
Selecting previously unselected package libcc1-0:s390x.
Preparing to unpack .../08-libcc1-0_12.1.0-2ubuntu1~22.04_s390x.deb ...
Unpacking libcc1-0:s390x (12.1.0-2ubuntu1~22.04) ...
Selecting previously unselected package libgomp1:s390x.
Preparing to unpack .../09-libgomp1_12.1.0-2ubuntu1~22.04_s390x.deb ...
Unpacking libgomp1:s390x (12.1.0-2ubuntu1~22.04) ...
Selecting previously unselected package libitm1:s390x.
Preparing to unpack .../10-libitm1_12.1.0-2ubuntu1~22.04_s390x.deb ...
Unpacking libitm1:s390x (12.1.0-2ubuntu1~22.04) ...
Selecting previously unselected package libatomic1:s390x.
Preparing to unpack .../11-libatomic1_12.1.0-2ubuntu1~22.04_s390x.deb ...
Unpacking libatomic1:s390x (12.1.0-2ubuntu1~22.04) ...
Selecting previously unselected package libasan6:s390x.
Preparing to unpack .../12-libasan6_11.3.0-1ubuntu1~22.04_s390x.deb ...
Unpacking libasan6:s390x (11.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package libubsan1:s390x.
Preparing to unpack .../13-libubsan1_12.1.0-2ubuntu1~22.04_s390x.deb ...
Unpacking libubsan1:s390x (12.1.0-2ubuntu1~22.04) ...
Selecting previously unselected package libgcc-11-dev:s390x.
Preparing to unpack .../14-libgcc-11-dev_11.3.0-1ubuntu1~22.04_s390x.deb ...
Unpacking libgcc-11-dev:s390x (11.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package gcc-11.
Preparing to unpack .../15-gcc-11_11.3.0-1ubuntu1~22.04_s390x.deb ...
Unpacking gcc-11 (11.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package gcc.
Preparing to unpack .../16-gcc_4%3a11.2.0-1ubuntu1_s390x.deb ...
Unpacking gcc (4:11.2.0-1ubuntu1) ...
Selecting previously unselected package libc-dev-bin.
Preparing to unpack .../17-libc-dev-bin_2.35-0ubuntu3.1_s390x.deb ...
Unpacking libc-dev-bin (2.35-0ubuntu3.1) ...
Selecting previously unselected package linux-libc-dev:s390x.
Preparing to unpack .../18-linux-libc-dev_5.15.0-60.66_s390x.deb ...
Unpacking linux-libc-dev:s390x (5.15.0-60.66) ...
Selecting previously unselected package libcrypt-dev:s390x.
Preparing to unpack .../19-libcrypt-dev_1%3a4.4.27-1_s390x.deb ...
Unpacking libcrypt-dev:s390x (1:4.4.27-1) ...
Selecting previously unselected package rpcsvc-proto.
Preparing to unpack .../20-rpcsvc-proto_1.4.2-0ubuntu6_s390x.deb ...
Unpacking rpcsvc-proto (1.4.2-0ubuntu6) ...
Selecting previously unselected package libtirpc-dev:s390x.
Preparing to unpack .../21-libtirpc-dev_1.3.2-2ubuntu0.1_s390x.deb ...
Unpacking libtirpc-dev:s390x (1.3.2-2ubuntu0.1) ...
Selecting previously unselected package libnsl-dev:s390x.
Preparing to unpack .../22-libnsl-dev_1.3.0-2build2_s390x.deb ...
Unpacking libnsl-dev:s390x (1.3.0-2build2) ...
Selecting previously unselected package libc6-dev:s390x.
Preparing to unpack .../23-libc6-dev_2.35-0ubuntu3.1_s390x.deb ...
Unpacking libc6-dev:s390x (2.35-0ubuntu3.1) ...
Selecting previously unselected package libstdc++-11-dev:s390x.
Preparing to unpack .../24-libstdc++-11-dev_11.3.0-1ubuntu1~22.04_s390x.deb ...
Unpacking libstdc++-11-dev:s390x (11.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package g++-11.
Preparing to unpack .../25-g++-11_11.3.0-1ubuntu1~22.04_s390x.deb ...
Unpacking g++-11 (11.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package g++.
Preparing to unpack .../26-g++_4%3a11.2.0-1ubuntu1_s390x.deb ...
Unpacking g++ (4:11.2.0-1ubuntu1) ...
Selecting previously unselected package golang-1.18-src.
Preparing to unpack .../27-golang-1.18-src_1.18.1-1ubuntu1_all.deb ...
Unpacking golang-1.18-src (1.18.1-1ubuntu1) ...
Selecting previously unselected package golang-1.18-go.
Preparing to unpack .../28-golang-1.18-go_1.18.1-1ubuntu1_s390x.deb ...
Unpacking golang-1.18-go (1.18.1-1ubuntu1) ...
Selecting previously unselected package golang-src.
Preparing to unpack .../29-golang-src_2%3a1.18~0ubuntu2_all.deb ...
Unpacking golang-src (2:1.18~0ubuntu2) ...
Selecting previously unselected package golang-go:s390x.
Preparing to unpack .../30-golang-go_2%3a1.18~0ubuntu2_s390x.deb ...
Unpacking golang-go:s390x (2:1.18~0ubuntu2) ...
Selecting previously unselected package libfreetype6:s390x.
Preparing to unpack .../31-libfreetype6_2.11.1+dfsg-1ubuntu0.1_s390x.deb ...
Unpacking libfreetype6:s390x (2.11.1+dfsg-1ubuntu0.1) ...
Selecting previously unselected package libfontconfig1:s390x.
Preparing to unpack .../32-libfontconfig1_2.13.1-4.2ubuntu5_s390x.deb ...
Unpacking libfontconfig1:s390x (2.13.1-4.2ubuntu5) ...
Selecting previously unselected package libjpeg-turbo8:s390x.
Preparing to unpack .../33-libjpeg-turbo8_2.1.2-0ubuntu1_s390x.deb ...
Unpacking libjpeg-turbo8:s390x (2.1.2-0ubuntu1) ...
Selecting previously unselected package libjpeg8:s390x.
Preparing to unpack .../34-libjpeg8_8c-2ubuntu10_s390x.deb ...
Unpacking libjpeg8:s390x (8c-2ubuntu10) ...
Selecting previously unselected package libdeflate0:s390x.
Preparing to unpack .../35-libdeflate0_1.10-2_s390x.deb ...
Unpacking libdeflate0:s390x (1.10-2) ...
Selecting previously unselected package libjbig0:s390x.
Preparing to unpack .../36-libjbig0_2.1-3.1ubuntu0.22.04.1_s390x.deb ...
Unpacking libjbig0:s390x (2.1-3.1ubuntu0.22.04.1) ...
Selecting previously unselected package libwebp7:s390x.
Preparing to unpack .../37-libwebp7_1.2.2-2_s390x.deb ...
Unpacking libwebp7:s390x (1.2.2-2) ...
Selecting previously unselected package libtiff5:s390x.
Preparing to unpack .../38-libtiff5_4.3.0-6ubuntu0.3_s390x.deb ...
Unpacking libtiff5:s390x (4.3.0-6ubuntu0.3) ...
Selecting previously unselected package libxpm4:s390x.
Preparing to unpack .../39-libxpm4_1%3a3.5.12-1ubuntu0.22.04.1_s390x.deb ...
Unpacking libxpm4:s390x (1:3.5.12-1ubuntu0.22.04.1) ...
Selecting previously unselected package libgd3:s390x.
Preparing to unpack .../40-libgd3_2.3.0-2ubuntu2_s390x.deb ...
Unpacking libgd3:s390x (2.3.0-2ubuntu2) ...
Selecting previously unselected package libc-devtools.
Preparing to unpack .../41-libc-devtools_2.35-0ubuntu3.1_s390x.deb ...
Unpacking libc-devtools (2.35-0ubuntu3.1) ...
Selecting previously unselected package libdpkg-perl.
Preparing to unpack .../42-libdpkg-perl_1.21.1ubuntu2.1_all.deb ...
Unpacking libdpkg-perl (1.21.1ubuntu2.1) ...
Selecting previously unselected package libfile-fcntllock-perl.
Preparing to unpack .../43-libfile-fcntllock-perl_0.22-3build7_s390x.deb ...
Unpacking libfile-fcntllock-perl (0.22-3build7) ...
Selecting previously unselected package manpages-dev.
Preparing to unpack .../44-manpages-dev_5.10-1ubuntu1_all.deb ...
Unpacking manpages-dev (5.10-1ubuntu1) ...
Selecting previously unselected package pkg-config.
Preparing to unpack .../45-pkg-config_0.29.2-1ubuntu3_s390x.deb ...
Unpacking pkg-config (0.29.2-1ubuntu3) ...
Setting up gcc-11-base:s390x (11.3.0-1ubuntu1~22.04) ...
Setting up manpages-dev (5.10-1ubuntu1) ...
Setting up libxpm4:s390x (1:3.5.12-1ubuntu0.22.04.1) ...
Setting up libfile-fcntllock-perl (0.22-3build7) ...
Setting up libdeflate0:s390x (1.10-2) ...
Setting up linux-libc-dev:s390x (5.15.0-60.66) ...
Setting up libgomp1:s390x (12.1.0-2ubuntu1~22.04) ...
Setting up bzip2 (1.0.8-5build1) ...
Setting up libjbig0:s390x (2.1-3.1ubuntu0.22.04.1) ...
Setting up libasan6:s390x (11.3.0-1ubuntu1~22.04) ...
Setting up libtirpc-dev:s390x (1.3.2-2ubuntu0.1) ...
Setting up rpcsvc-proto (1.4.2-0ubuntu6) ...
Setting up libfreetype6:s390x (2.11.1+dfsg-1ubuntu0.1) ...
Setting up libmpc3:s390x (1.2.1-2build1) ...
Setting up libatomic1:s390x (12.1.0-2ubuntu1~22.04) ...
Setting up fonts-dejavu-core (2.37-2build1) ...
Setting up golang-1.18-src (1.18.1-1ubuntu1) ...
Setting up libjpeg-turbo8:s390x (2.1.2-0ubuntu1) ...
Setting up libdpkg-perl (1.21.1ubuntu2.1) ...
Setting up libwebp7:s390x (1.2.2-2) ...
Setting up libubsan1:s390x (12.1.0-2ubuntu1~22.04) ...
Setting up libnsl-dev:s390x (1.3.0-2build2) ...
Setting up libcrypt-dev:s390x (1:4.4.27-1) ...
Setting up libisl23:s390x (0.24-2build1) ...
Setting up libc-dev-bin (2.35-0ubuntu3.1) ...
Setting up golang-src (2:1.18~0ubuntu2) ...
Setting up libcc1-0:s390x (12.1.0-2ubuntu1~22.04) ...
Setting up libitm1:s390x (12.1.0-2ubuntu1~22.04) ...
Setting up libjpeg8:s390x (8c-2ubuntu10) ...
Setting up cpp-11 (11.3.0-1ubuntu1~22.04) ...
Setting up fontconfig-config (2.13.1-4.2ubuntu5) ...
Setting up golang-1.18-go (1.18.1-1ubuntu1) ...
Setting up pkg-config (0.29.2-1ubuntu3) ...
Setting up libgcc-11-dev:s390x (11.3.0-1ubuntu1~22.04) ...
Setting up gcc-11 (11.3.0-1ubuntu1~22.04) ...
Setting up cpp (4:11.2.0-1ubuntu1) ...
Setting up libc6-dev:s390x (2.35-0ubuntu3.1) ...
Setting up libtiff5:s390x (4.3.0-6ubuntu0.3) ...
Setting up libfontconfig1:s390x (2.13.1-4.2ubuntu5) ...
Setting up golang-go:s390x (2:1.18~0ubuntu2) ...
Setting up gcc (4:11.2.0-1ubuntu1) ...
Setting up libgd3:s390x (2.3.0-2ubuntu2) ...
Setting up libstdc++-11-dev:s390x (11.3.0-1ubuntu1~22.04) ...
Setting up libc-devtools (2.35-0ubuntu3.1) ...
Setting up g++-11 (11.3.0-1ubuntu1~22.04) ...
Setting up g++ (4:11.2.0-1ubuntu1) ...
update-alternatives: using /usr/bin/g++ to provide /usr/bin/c++ (c++) in auto mode
Processing triggers for man-db (2.10.2-1) ...
Processing triggers for libc-bin (2.35-0ubuntu3.1) ...
Scanning processes...                                                                                                                        
Scanning linux images...                                                                                                                     

Running kernel seems to be up-to-date (ABI upgrades are not detected).

No services need to be restarted.

No containers need to be restarted.

No user sessions are running outdated binaries.

No VM guests are running outdated hypervisor (qemu) binaries on this host.
</code></pre></div>
</details>
<p>Now convince yourself that you have installed Go correctly:</p>
<div class="highlight"><pre><span></span><code>go<span class="w"> </span>version
</code></pre></div>
<details class="- example">
<summary>Go has been installed if you see this:</summary>
<div class="highlight"><pre><span></span><code>go version go1.18.1 linux/s390x
</code></pre></div>
</details>
<p>The version of go that you see may differ slightly if a newer version has become available.</p>
<h2 id="lab-configuregrep11testclient-download-the-grep11-code-repo">Download the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> code repo<a class="headerlink" href="#lab-configuregrep11testclient-download-the-grep11-code-repo" title="Permanent link">&para;</a></h2>
<p>You are probably already in your home directory, but this command won't cause any harm if you are:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~
</code></pre></div>
<p>The instructor has created a <em>fork</em> of a GitHub repo that is provided by an <em>IBM Cloud</em> GitHub repo. 
The instructor could have just pointed you to the <em>IBM Cloud</em> GitHub repo, but, had he done that, you can
be assured that a file that had not been changed in nineteen months would have changed an hour before 
you started the lab, breaking this section, frustrating you, humiliating the instructor, and by creating
his own fork he can ensure he has complete control of the code, and you probably think he's being paranoid 
and that this sort of thing would never have happened to him during a live demo (on a different product) in
front of an audience of hundreds of people.  Nope, that would never happen.  Fortunately it was only an IBM 
internal audience. The instructor has since recovered.</p>
<p>Having said that, clone the instructor's GitHub repo:</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/silliman/hpcs-grep11-go<span class="w"> </span>
</code></pre></div>
<details class="- example">
<summary>Example output from git clone</summary>
<div class="highlight"><pre><span></span><code>Cloning into &#39;hpcs-grep11-go&#39;...
remote: Enumerating objects: 61, done.
remote: Counting objects: 100% (61/61), done.
remote: Compressing objects: 100% (32/32), done.
remote: Total 61 (delta 22), reused 56 (delta 20), pack-reused 0
Receiving objects: 100% (61/61), 121.04 KiB | 8.07 MiB/s, done.
Resolving deltas: 100% (22/22), done.
</code></pre></div>
</details>
<p>The git clone created a directory named <code>hpcs-grep11-go</code>, change into it:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>hpcs-grep11-go
</code></pre></div>
<p>List the contents of the <code>cert</code> directory, see that there is a single file named <code>README</code> </p>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>-l<span class="w"> </span>certs/
</code></pre></div>
<p>READ IT (weeping is optional):</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>certs/README
</code></pre></div>
<p>You read that right- more X509 work!! </p>
<h2 id="lab-configuregrep11testclient-create-tls-certificate-and-key-for-your-grep11-client">Create TLS certificate and key for your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Client<a class="headerlink" href="#lab-configuregrep11testclient-create-tls-certificate-and-key-for-your-grep11-client" title="Permanent link">&para;</a></h2>
<p>Go to the <code>certs</code> directory:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>certs
</code></pre></div>
<p>Create an RSA private key (this is one of three files needed in this directory)</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>genrsa<span class="w"> </span>-out<span class="w"> </span>client.key<span class="w"> </span><span class="m">2048</span>
</code></pre></div>
<p>Create a configuration file to avoid interrogation by <em>openssl</em>:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; client.cnf</span>
<span class="s">RANDFILE               = \$ENV::HOME/.rnd</span>

<span class="s">[ req ]</span>
<span class="s">default_bits           = 2048</span>
<span class="s">default_keyfile        = keyfile.pem</span>
<span class="s">distinguished_name     = req_distinguished_name</span>
<span class="s">attributes             = req_attributes</span>
<span class="s">prompt                 = no</span>
<span class="s">output_password        = mypass</span>

<span class="s">[ req_distinguished_name ]</span>
<span class="s">C                      = US</span>
<span class="s">ST                     = Virginia</span>
<span class="s">L                      = Herndon</span>
<span class="s">O                      = IBM</span>
<span class="s">OU                     = Washington Systems Center - IBM zSystems and LinuxONE</span>
<span class="s">CN                     = Lab Student</span>
<span class="s">emailAddress           = student@not.real.email.com</span>

<span class="s">[ req_attributes ]</span>
<span class="s">challengePassword              = A challenge password</span>

<span class="s">[ x509_extensions ]</span>
<span class="s">subjectKeyIdentifier   = hash</span>
<span class="s">authorityKeyIdentifier = keyid,issuer</span>
<span class="s">basicConstraints       = critical,CA:TRUE</span>
<span class="s">EOF</span>
</code></pre></div>
<p>Create a certificate signing request:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>req<span class="w"> </span>-new<span class="w"> </span>-key<span class="w"> </span>client.key<span class="w"> </span>-out<span class="w"> </span>client.csr<span class="w"> </span>-config<span class="w"> </span>client.cnf
</code></pre></div>
<p>Display the <abbr title="certificate signing request">CSR</abbr> that you created:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>req<span class="w"> </span>-noout<span class="w"> </span>-text<span class="w"> </span>-in<span class="w"> </span>client.csr
</code></pre></div>
<p>It will look like this:</p>
<details class="- example">
<summary>Example <abbr title="certificate signing request">CSR</abbr> display</summary>
<div class="highlight"><pre><span></span><code>Certificate Request:
    Data:
        Version: 1 (0x0)
        Subject: C = US, ST = Virginia, L = Herndon, O = IBM, OU = Washington Systems Center - IBM zSystems and LinuxONE, CN = Lab Student, emailAddress = student@not.real.email.com
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                Public-Key: (2048 bit)
                Modulus:
                    00:e4:07:f9:43:c6:6b:fd:2c:39:d4:ef:b4:cb:db:
                    f5:06:b1:82:bc:48:1a:a1:57:3c:1d:05:a9:fe:65:
                    c2:bb:a0:ed:12:58:51:e0:95:2f:44:95:5c:be:88:
                    82:a0:c0:4d:28:62:c4:32:90:66:2e:aa:bc:77:cc:
                    a0:bc:04:3f:22:01:37:58:0a:44:ab:29:9f:4c:01:
                    8b:24:33:21:a5:bf:27:5d:4e:1e:a3:14:15:79:f1:
                    8d:02:61:7b:4d:9f:18:d9:4a:5e:b9:62:d9:c3:96:
                    79:cd:2c:82:f2:f1:3e:8f:ca:29:89:6a:45:b7:48:
                    b5:54:4a:bc:0d:0e:1c:22:8b:f7:8d:e4:72:54:9e:
                    8e:ef:b7:2e:d3:3b:e3:10:9e:1c:35:79:eb:57:1b:
                    aa:61:15:d7:19:6a:89:76:2e:63:19:07:c1:db:92:
                    98:bb:48:2b:e7:55:8b:cb:74:e1:00:76:f5:0a:8e:
                    e8:1a:69:a6:14:bf:7c:7f:eb:a8:ee:ad:b1:f0:df:
                    92:cc:0c:10:3d:42:b3:02:0d:7c:0d:55:38:70:49:
                    ab:84:da:d0:1e:52:1b:19:47:6e:26:b9:8c:cf:0e:
                    12:17:b1:cd:d8:bd:55:2f:fd:6b:6e:12:f1:8b:c4:
                    60:96:67:c4:55:a3:03:43:1b:70:a2:d7:0e:73:c6:
                    79:23
                Exponent: 65537 (0x10001)
        Attributes:
            challengePassword        :A challenge password
            Requested Extensions:
    Signature Algorithm: sha256WithRSAEncryption
    Signature Value:
        3d:ef:35:37:b6:aa:e4:33:cb:fe:17:aa:18:a5:77:d2:23:3b:
        b7:01:ac:6e:65:0c:0c:68:a6:80:37:04:8d:d2:7e:e8:9b:57:
        9d:63:8f:82:06:22:07:7f:bc:6b:b3:60:1c:3f:a1:3d:75:c5:
        3a:d5:f6:74:5c:93:9a:60:9e:40:4a:95:09:bf:38:6b:fb:fb:
        1a:6a:91:be:6d:4d:15:46:79:b4:e1:19:cb:9d:00:97:95:75:
        c1:3a:1d:4b:10:0f:c0:90:5b:f0:b9:5a:e6:b8:6d:11:84:d3:
        0b:aa:7c:eb:07:51:4c:0c:c3:7d:e5:7e:d0:5a:81:f8:0e:3f:
        08:db:3b:78:3d:aa:38:a0:65:60:60:f5:19:4f:47:fe:08:2d:
        4a:af:f9:40:1d:ff:2b:92:67:91:99:eb:b1:8c:cf:d1:2a:c1:
        c0:0d:6c:38:2b:ca:69:d2:40:7e:9d:84:c6:7a:2c:33:d0:28:
        b0:09:97:19:e7:3c:e9:fe:dc:bf:71:a3:00:2f:46:19:f4:1a:
        7c:fc:0f:ff:18:1f:38:77:78:17:49:0e:3e:e7:8a:f0:29:bb:
        a2:37:f4:4a:12:48:e2:ea:1f:14:cc:31:ac:19:6d:b5:bf:98:
        2b:91:aa:a8:71:07:62:54:48:79:55:72:11:9e:87:86:36:3d:
        5d:24:b0:9b
</code></pre></div>
</details>
<p>Your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> <abbr title="certification authority">CA</abbr> is on your account on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host. Send your <abbr title="certificate signing request">CSR</abbr> to it:</p>
<div class="highlight"><pre><span></span><code>scp<span class="w"> </span>client.csr<span class="w"> </span><span class="si">${</span><span class="nv">StudentID</span><span class="si">}</span>@192.168.22.64:GREP11CAwork/.<span class="w"> </span>
</code></pre></div>
<p><strong>Switch to your terminal tab or window for your <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host session.</strong></p>
<p>Change to your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> <abbr title="certification authority">CA</abbr> working directory:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/GREP11CAwork
</code></pre></div>
<p>Display the <abbr title="certificate signing request">CSR</abbr> that the client sent you:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>req<span class="w"> </span>-noout<span class="w"> </span>-text<span class="w"> </span>-in<span class="w"> </span>client.csr
</code></pre></div>
<p><em>Note:</em> The output is not shown here as it should look the same as when you displayed this same certificate moments ago when you were in "client" mode.</p>
<p>Create the certificate for the client:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>x509<span class="w"> </span>-req<span class="w"> </span>-days<span class="w"> </span><span class="m">300</span><span class="w"> </span>-in<span class="w"> </span>client.csr<span class="w"> </span>-CA<span class="w"> </span>grep11-ca.pem<span class="w"> </span>-CAcreateserial<span class="w"> </span>-CAkey<span class="w"> </span>grep11-ca-key.pem<span class="w"> </span>-out<span class="w"> </span>client.pem
</code></pre></div>
<details class="- example">
<summary>Output from certificate creation</summary>
<div class="highlight"><pre><span></span><code>Signature ok
subject=C = US, ST = Virginia, L = Herndon, O = IBM, OU = Washington Systems Center - IBM zSystems and LinuxONE, CN = Lab Student, emailAddress = student@not.real.email.com
Getting CA Private Key
</code></pre></div>
</details>
<p>Display the certificate before sending it to the client:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>x509<span class="w"> </span>-noout<span class="w"> </span>-text<span class="w"> </span>-in<span class="w"> </span>client.pem
</code></pre></div>
<details class="- example">
<summary>Display of <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> client certificate</summary>
<div class="highlight"><pre><span></span><code>Certificate:
    Data:
        Version: 1 (0x0)
        Serial Number:
            79:dd:5b:25:cc:24:f9:71:e5:e0:71:23:db:f8:9e:b8:92:b9:2d:1a
        Signature Algorithm: sha256WithRSAEncryption
        Issuer: C = US, ST = Virginia, L = Herndon, O = IBM, OU = Washington Systems Center - IBM zSystems and LinuxONE, CN = WSC student02 HPVS CA, emailAddress = student@notreal.email.com.com
        Validity
            Not Before: Feb 15 16:07:56 2023 GMT
            Not After : Dec 12 16:07:56 2023 GMT
        Subject: C = US, ST = Virginia, L = Herndon, O = IBM, OU = Washington Systems Center - IBM zSystems and LinuxONE, CN = Lab Student, emailAddress = student@not.real.email.com
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                RSA Public-Key: (2048 bit)
                Modulus:
                    00:e4:07:f9:43:c6:6b:fd:2c:39:d4:ef:b4:cb:db:
                    f5:06:b1:82:bc:48:1a:a1:57:3c:1d:05:a9:fe:65:
                    c2:bb:a0:ed:12:58:51:e0:95:2f:44:95:5c:be:88:
                    82:a0:c0:4d:28:62:c4:32:90:66:2e:aa:bc:77:cc:
                    a0:bc:04:3f:22:01:37:58:0a:44:ab:29:9f:4c:01:
                    8b:24:33:21:a5:bf:27:5d:4e:1e:a3:14:15:79:f1:
                    8d:02:61:7b:4d:9f:18:d9:4a:5e:b9:62:d9:c3:96:
                    79:cd:2c:82:f2:f1:3e:8f:ca:29:89:6a:45:b7:48:
                    b5:54:4a:bc:0d:0e:1c:22:8b:f7:8d:e4:72:54:9e:
                    8e:ef:b7:2e:d3:3b:e3:10:9e:1c:35:79:eb:57:1b:
                    aa:61:15:d7:19:6a:89:76:2e:63:19:07:c1:db:92:
                    98:bb:48:2b:e7:55:8b:cb:74:e1:00:76:f5:0a:8e:
                    e8:1a:69:a6:14:bf:7c:7f:eb:a8:ee:ad:b1:f0:df:
                    92:cc:0c:10:3d:42:b3:02:0d:7c:0d:55:38:70:49:
                    ab:84:da:d0:1e:52:1b:19:47:6e:26:b9:8c:cf:0e:
                    12:17:b1:cd:d8:bd:55:2f:fd:6b:6e:12:f1:8b:c4:
                    60:96:67:c4:55:a3:03:43:1b:70:a2:d7:0e:73:c6:
                    79:23
                Exponent: 65537 (0x10001)
    Signature Algorithm: sha256WithRSAEncryption
         66:9c:1a:d8:75:5b:52:1c:8c:f7:d7:63:f6:ea:1e:4e:b1:fa:
         92:78:1a:ab:83:11:7d:73:50:b9:ce:34:2b:33:d1:97:1f:90:
         f6:c7:85:45:20:9f:95:6d:f7:16:f9:64:fd:7b:3d:48:44:33:
         af:9e:dc:5a:f4:56:dd:50:27:6f:3e:9e:75:f2:52:d1:cf:fe:
         76:52:98:8a:0b:cd:62:a6:68:49:34:43:f9:d2:e3:ab:f6:b3:
         3f:fd:ff:3a:92:06:32:2b:c0:64:29:b5:00:c4:b8:66:57:07:
         de:64:8a:7a:88:0b:27:79:5a:6d:8f:4d:52:bf:cc:5e:03:53:
         4a:40:4d:22:e5:e7:0f:c3:1e:6c:2a:cf:79:f2:d5:4b:b3:13:
         be:dd:51:c7:2f:2d:8b:f5:97:1e:3f:86:2e:6c:13:c5:43:0f:
         a6:49:ed:a4:a2:7e:ec:3f:f9:9b:f4:65:f1:ff:d5:9c:60:0f:
         90:a8:18:a7:e0:2a:e4:b9:f2:4c:36:d9:f7:94:c9:a5:71:10:
         bf:56:0d:df:d7:3e:71:a7:f7:d0:cc:dc:52:49:bf:c1:71:72:
         e3:46:89:d6:5d:d4:60:04:a3:5b:46:84:ef:9f:de:02:8c:c8:
         69:89:5a:ef:49:5a:48:fc:72:af:09:21:dd:22:f7:91:b5:57:
         3b:50:e3:58
</code></pre></div>
</details>
<p>Send the certificate back to the client that requested it:</p>
<div class="highlight"><pre><span></span><code>scp<span class="w"> </span>client.pem<span class="w"> </span>student@<span class="si">${</span><span class="nv">StudentGuestIP</span><span class="si">}</span>:./hpcs-grep11-go/certs/.<span class="w">   </span>
</code></pre></div>
<p>Your work as a <abbr title="certification authority">CA</abbr> registrar is done for the remainder of the lab!<br />
<strong>Switch to your terminal tab or window for your Ubuntu KVM guest session</strong></p>
<p>Change to the directory that has your certificates and key:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/hpcs-grep11-go/certs
</code></pre></div>
<p>Display the client certificate that your <abbr title="certification authority">CA</abbr> registrar sent you:</p>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>x509<span class="w"> </span>-noout<span class="w"> </span>-text<span class="w"> </span>-in<span class="w"> </span>client.pem
</code></pre></div>
<p>You know that you know what it should look like so we won't repeat the output here.</p>
<p>Get your <abbr title="certification authority">CA</abbr>'s public certificate so that you can authenticate your connection with the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server:</p>
<div class="highlight"><pre><span></span><code>scp<span class="w"> </span><span class="si">${</span><span class="nv">StudentID</span><span class="si">}</span>@192.168.22.64:GREP11CAwork/grep11-ca.pem<span class="w"> </span>.
</code></pre></div>
<h2 id="lab-configuregrep11testclient-modify-grep11-code-for-authentication-to-your-grep11-server">Modify <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> code for authentication to your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server<a class="headerlink" href="#lab-configuregrep11testclient-modify-grep11-code-for-authentication-to-your-grep11-server" title="Permanent link">&para;</a></h2>
<p>Switch to this directory:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>../examples
</code></pre></div>
<p>Run this command to see the one line you need to change in the source code you downloaded:</p>
<div class="highlight"><pre><span></span><code>grep<span class="w"> </span>--after-context<span class="w"> </span><span class="m">3</span><span class="w"> </span>STUDENT<span class="w"> </span>server_test.go
</code></pre></div>
<p>Your output will look like this:</p>
<details class="- example">
<summary>The line you need to change, plus the files you just made</summary>
<div class="highlight"><pre><span></span><code>const Address = &quot;STUDENT_GREP11SERVER_IP:9876&quot;
const cert = &quot;../certs/client.pem&quot;
const key = &quot;../certs/client.key&quot;
const ca = &quot;../certs/grep11-ca.pem&quot;
</code></pre></div>
</details>
<p>This also shows the three files in the <em>certs</em> directory that you have already taken care of, but the first line is the only line you need to change:</p>
<div class="highlight"><pre><span></span><code>sed -i -e &quot;s/STUDENT_GREP11SERVER_IP/${GREP11ServerIP}/g&quot; server_test.go
</code></pre></div>
<p>Run this command to ensure that you made the change correctly:</p>
<div class="highlight"><pre><span></span><code>grep --after-context 3 ${GREP11ServerIP} server_test.go
</code></pre></div>
<details class="- example">
<summary>Expected output (your IP will differ, example shown for student02)</summary>
<div class="highlight"><pre><span></span><code>const Address = &quot;172.16.0.62:9876&quot;
const cert = &quot;../certs/client.pem&quot;
const key = &quot;../certs/client.key&quot;
const ca = &quot;../certs/grep11-ca.pem&quot;
</code></pre></div>
</details>
<h2 id="lab-configuregrep11testclient-run-the-grep11-client-code">Run the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> client code<a class="headerlink" href="#lab-configuregrep11testclient-run-the-grep11-client-code" title="Permanent link">&para;</a></h2>
<p>Drum roll please...</p>
<p>Enter this command to test your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> client code:</p>
<div class="highlight"><pre><span></span><code>go<span class="w"> </span><span class="nb">test</span><span class="w"> </span>-v
</code></pre></div>
<p>Your output should look like this. If it does, you have reached a successful conclusion to the lab!!!</p>
<details class="- example">
<summary>Expected output from testing the <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> client code</summary>
<div class="highlight"><pre><span></span><code>go: downloading google.golang.org/grpc v1.34.0
go: downloading github.com/gogo/protobuf v1.3.2
go: downloading github.com/golang/protobuf v1.4.3
go: downloading golang.org/x/net v0.0.0-20201021035429-f5854403a974
go: downloading google.golang.org/genproto v0.0.0-20201001141541-efaab9d3c4f7
go: downloading google.golang.org/protobuf v1.25.0
go: downloading golang.org/x/sys v0.0.0-20200930185726-fdedc70b468f
go: downloading golang.org/x/text v0.3.3
=== RUN   Test_signAndVerifyUsingDilithiumKeyPair
Generated Dilithium key pair
Data signed
Verified
--- PASS: Test_signAndVerifyUsingDilithiumKeyPair (0.05s)
=== RUN   Test_rewrapKeyBlob
    server_test.go:1375: 

        Skipping the rewrapKeyBlob test. To enable, comment out the t.Skipf and message lines within the Test_rewrapKeyBlob test

        NOTE: This test contains two pauses that require the user to type CTRL-c after ensuring
              that the stated pre-requisite activity has been completed.  There needs to be 
              coordination with your HPCS cloud service contact in order to place your HSM
              into the required states.

--- SKIP: Test_rewrapKeyBlob (0.00s)
=== RUN   Example_getMechanismInfo
--- PASS: Example_getMechanismInfo (0.01s)
=== RUN   Example_generateGenericKey
--- PASS: Example_generateGenericKey (0.01s)
=== RUN   Example_encryptAndDecryptUsingAES
--- PASS: Example_encryptAndDecryptUsingAES (0.02s)
=== RUN   Example_digest
--- PASS: Example_digest (0.01s)
=== RUN   Example_signAndVerifyUsingRSAKeyPair
--- PASS: Example_signAndVerifyUsingRSAKeyPair (0.04s)
=== RUN   Example_signAndVerifyUsingDSAKeyPair
--- PASS: Example_signAndVerifyUsingDSAKeyPair (0.54s)
=== RUN   Example_deriveKeyUsingDHKeyPair
--- PASS: Example_deriveKeyUsingDHKeyPair (1.51s)
=== RUN   Example_signAndVerifyUsingECDSAKeyPair
--- PASS: Example_signAndVerifyUsingECDSAKeyPair (0.02s)
=== RUN   Example_signAndVerifyToTestErrorHandling
--- PASS: Example_signAndVerifyToTestErrorHandling (0.02s)
=== RUN   Example_wrapAndUnwrapKey
--- PASS: Example_wrapAndUnwrapKey (0.04s)
=== RUN   Example_deriveKey
--- PASS: Example_deriveKey (0.04s)
=== RUN   Example_wrapAndUnwrapAttributeBoundKey
--- PASS: Example_wrapAndUnwrapAttributeBoundKey (0.03s)
=== RUN   Example_tls
--- PASS: Example_tls (0.03s)
PASS
ok    github.com/IBM-Cloud/hpcs-grep11-go/examples    2.373s
</code></pre></div>
</details>
<p>Before you go, check out the your <abbr title="rsyslog is a system utility providing support for message logging.  Support of both internet and unix domain sockets enables this utility to support both local and remote logging">rsyslog</abbr> log messages to see evidence of the test you just ran:</p>
<div class="highlight"><pre><span></span><code>journalctl<span class="w"> </span>--since<span class="w"> </span><span class="s2">&quot;-5 minutes &quot;</span><span class="w"> </span>--output<span class="w"> </span>short-full<span class="w"> </span>--no-pager
</code></pre></div>
<p>The above command assumes you ran this within five minutes of running the test.  If you missed the boat, then just rerun the test again or change the argument to <em>--since</em> to show a longer timeframe of messages.</p></section><section class="print-page" id="lab-hackmeifyoucan"><h1 id="lab-hackmeifyoucan-demonstrate-the-protection-of-the-secure-execution-enabled-hpvs-213-guest">Demonstrate the protection of the <abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr>-enabled HPVS 2.1.3 guest<a class="headerlink" href="#lab-hackmeifyoucan-demonstrate-the-protection-of-the-secure-execution-enabled-hpvs-213-guest" title="Permanent link">&para;</a></h1>
<h2 id="lab-hackmeifyoucan-overview-of-this-section">Overview of this section<a class="headerlink" href="#lab-hackmeifyoucan-overview-of-this-section" title="Permanent link">&para;</a></h2>
<p>In this section you will demonstrate the protection offered by the <abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr>-enabled HPVS 2.1.3 guest in contrast to the ease in which a malicious insider can eavesdrop on a <abbr title="this is a term we use to refer to a KVM guest that is not protected with Secure Execution for Linux">standard KVM guest</abbr>.</p>
<h2 id="lab-hackmeifyoucan-log-out-of-your-ubuntu-kvm-guest">Log out of your Ubuntu KVM guest<a class="headerlink" href="#lab-hackmeifyoucan-log-out-of-your-ubuntu-kvm-guest" title="Permanent link">&para;</a></h2>
<p>All of the work in this section is performed on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> 8.5 host, so log out of your Ubuntu KVM guest. You have finished your work in the Ubuntu KVM guest for this lab:</p>
<div class="highlight"><pre><span></span><code><span class="nb">exit</span>
</code></pre></div>
<h2 id="lab-hackmeifyoucan-switch-to-your-rhel-host-terminal-session">Switch to your <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host terminal session<a class="headerlink" href="#lab-hackmeifyoucan-switch-to-your-rhel-host-terminal-session" title="Permanent link">&para;</a></h2>
<p>Switch to your terminal tab or window for your <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host session.  You should be logged in still if you have been following the lab in order in one sitting, but if you need to log in again the command is <code>ssh -l ${StudentID} 192.168.22.64</code></p>
<h2 id="lab-hackmeifyoucan-snoop-into-your-standard-kvm-guest-with-ease">Snoop into your <abbr title="this is a term we use to refer to a KVM guest that is not protected with Secure Execution for Linux">standard KVM guest</abbr> with ease<a class="headerlink" href="#lab-hackmeifyoucan-snoop-into-your-standard-kvm-guest-with-ease" title="Permanent link">&para;</a></h2>
<p>A systems administrator at the host level does not have a difficult time getting into a <abbr title="this is a term we use to refer to a KVM guest that is not protected with Secure Execution for Linux">standard KVM guest</abbr>'s business.  Try this command to dump the entire address space of your Ubuntu KVM guest:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>virsh<span class="w"> </span>dump<span class="w"> </span><span class="k">$(</span>whoami<span class="k">)</span><span class="w"> </span><span class="k">$(</span>whoami<span class="k">)</span>.dump
</code></pre></div>
<p>This will take a few seconds but you have just dumped the entire memory of your KVM guest.</p>
<p>Look at the file size:</p>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>-lh<span class="w"> </span><span class="k">$(</span>whoami<span class="k">)</span>.dump
</code></pre></div>
<p>We suspect that a malicious actor might have a few more tools in their toolbag than what we will show you here, but try this command:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>strings<span class="w"> </span><span class="k">$(</span>whoami<span class="k">)</span>.dump
</code></pre></div>
<p>The above command will print out all of the strings it recognizes in the memory dump.  You are probably getting tired of seeing them pass by on your terminal screen, so type <code>Ctrl-C</code> when you want your command prompt back.</p>
<p>Try this command to see how many strings were found in the file:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>strings<span class="w"> </span><span class="k">$(</span>whoami<span class="k">)</span>.dump<span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>--lines
</code></pre></div>
<p>Your output may differ, but when we tried this command while writing up the lab, we had 2,397,409 strings found in our dump.  Now we didn't dig much deeper than this, but it's possible that a motivated hacker might find something among those millions of strings with which to make mischief.</p>
<h2 id="lab-hackmeifyoucan-go-ahead-and-try-to-hack-me-says-the-hpvs-213-guest">Go ahead and try to hack me says the HPVS 2.1.3 guest<a class="headerlink" href="#lab-hackmeifyoucan-go-ahead-and-try-to-hack-me-says-the-hpvs-213-guest" title="Permanent link">&para;</a></h2>
<p>Try to snoop on your <abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr>-enabled Hyper Protect Virtual Servers 2.1.3 guest that is running your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> Server. See what happens:</p>
<div class="highlight"><pre><span></span><code><span class="nv">suffix</span><span class="o">=</span><span class="k">$(</span><span class="nv">temp</span><span class="o">=</span><span class="k">$(</span>whoami<span class="k">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">temp</span><span class="p">: -2</span><span class="si">}</span><span class="k">)</span><span class="w"> </span><span class="p">;</span><span class="w"> </span>sudo<span class="w"> </span>virsh<span class="w"> </span>dump<span class="w"> </span>grep11se<span class="si">${</span><span class="nv">suffix</span><span class="si">}</span><span class="w"> </span>grep11se<span class="si">${</span><span class="nv">suffix</span><span class="si">}</span>.dump
</code></pre></div>
<details class="example">
<summary>Shot down in flames, ain't it a shame</summary>
<div class="highlight"><pre><span></span><code>error: Failed to core dump domain &#39;grep11se01&#39; to grep11se01.dump
error: internal error: unable to execute QEMU command &#39;migrate&#39;: protected VMs are currently not migrateable.
</code></pre></div>
</details>
<p>If your name or address or credit card number or social security number or bank card PIN code or cryptocurrency wallet was in memory, would you have preferred it to be in memory in a <abbr title="this is a term we use to refer to a KVM guest that is not protected with Secure Execution for Linux">standard KVM guest</abbr> or in a <abbr title="IBM® Secure Execution for Linux® is a z/Architecture® security technology that is introduced with IBM z15™ and LinuxONE III. It protects data of workloads that run in a KVM guest from being inspected or modified by the server environment. In particular, no hardware administrator, no KVM code, and no KVM administrator can access the data in a guest that was started as an IBM Secure Execution guest.">Secure Execution</abbr>-enabled Hyper Protect Virtual Servers guest?  If you answered  <em><abbr title="this is a term we use to refer to a KVM guest that is not protected with Secure Execution for Linux">standard KVM guest</abbr></em>, then please return to the beginning of the lab and start over.  If you chose <em>SE-enabled HPVS guest</em>, then congratulations, you have successfully completed the lab!! (Except for cleanup).</p>
<p>Please proceed to the next section of the lab for lab cleanup.</p></section><section class="print-page" id="lab-labcleanup"><h1 id="lab-labcleanup-clean-up-the-resources-you-created-during-the-lab">Clean up the resources you created during the lab<a class="headerlink" href="#lab-labcleanup-clean-up-the-resources-you-created-during-the-lab" title="Permanent link">&para;</a></h1>
<p>All of the work in this section is performed on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> 8.5 host.  You should already be logged in to it if you have been following this lab in order.</p>
<h2 id="lab-labcleanup-shut-down-your-standard-ubuntu-kvm-guest">Shut down your standard Ubuntu KVM guest<a class="headerlink" href="#lab-labcleanup-shut-down-your-standard-ubuntu-kvm-guest" title="Permanent link">&para;</a></h2>
<p>Enter this command to shut down your standard Ubuntu KVM guest:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>virsh<span class="w"> </span>shutdown<span class="w"> </span><span class="k">$(</span>whoami<span class="k">)</span>
</code></pre></div>
<h2 id="lab-labcleanup-shut-down-your-hpvs-213-guest-your-grep11-server">Shut down your HPVS 2.1.3 guest (your <abbr title="This is an API that provides a set of EP11 calls over the gRPC protocol.  EP11 itself stands for 'Enterprise PKCS#11' which is an IBM-proprietary interface that is similar to the PKCS#11 standard.">GREP11</abbr> server):<a class="headerlink" href="#lab-labcleanup-shut-down-your-hpvs-213-guest-your-grep11-server" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="nv">suffix</span><span class="o">=</span><span class="k">$(</span><span class="nv">temp</span><span class="o">=</span><span class="k">$(</span>whoami<span class="k">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">temp</span><span class="p">: -2</span><span class="si">}</span><span class="k">)</span><span class="w"> </span><span class="p">;</span><span class="w"> </span>sudo<span class="w"> </span>virsh<span class="w"> </span>shutdown<span class="w"> </span>grep11se<span class="si">${</span><span class="nv">suffix</span><span class="si">}</span><span class="w"> </span>
</code></pre></div>
<h2 id="lab-labcleanup-clean-up-the-home-directory-of-your-userid-on-the-rhel-85-host">Clean up the home directory of your userid on the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> 8.5 host:<a class="headerlink" href="#lab-labcleanup-clean-up-the-home-directory-of-your-userid-on-the-rhel-85-host" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>rsyslogClientWork<span class="w"> </span>GREP11CAwork<span class="w"> </span>contract<span class="w"> </span><span class="k">$(</span>whoami<span class="k">)</span>.dump
</code></pre></div>
<h2 id="lab-labcleanup-log-out-of-the-rhel-host">Log out of the <abbr title="Red Hat Enterprise Linux">RHEL</abbr> host:<a class="headerlink" href="#lab-labcleanup-log-out-of-the-rhel-host" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="nb">exit</span>
</code></pre></div>
<p>Thank you for cleaning up and congratulations on finishing the lab!  We hope you enjoyed it and learned from it and we welcome your feedback on how to make it better.</p>
<p>There is no need to click the <code>Next</code> link at the bottom as that will take you to a page that is for instructor usage.  Feel free to check it out though, as it will give you insight into the tools that we use to create and update the lab documentation. </p></section><h1 class='nav-section-title-end'>Ended: Lab</h1><section class="print-page" id="localdocbuild"><h1 id="localdocbuild-building-the-documentation-yourself">Building the Documentation Yourself<a class="headerlink" href="#localdocbuild-building-the-documentation-yourself" title="Permanent link">&para;</a></h1>
<div class="admonition warning">
<p class="admonition-title">For Documentation Contributors Only</p>
<p>This is for people who want to update the documentation of <code>Confidential Computing LinuxONE Workshop</code> and see the updates locally or if you are a regular user and are curious on how to do it. In most cases, just accessing the documentation via this site (<a href="https://ibm-wsc.github.io/ConfidentialComputingOnLinuxONE/">https://ibm-wsc.github.io/ConfidentialComputingOnLinuxONE/</a>) is best. If you want to access the documentation without internet access, instead of following this documentation, you should navigate to the print page (which displays the documentation in printable format). Then, Print-&gt;Save to pdf in your web browser and access the PDF freely offline.</p>
</div>
<h2 id="localdocbuild-installing-necessary-pre-requisites">Installing Necessary Pre-requisites<a class="headerlink" href="#localdocbuild-installing-necessary-pre-requisites" title="Permanent link">&para;</a></h2>
<ol>
<li>Install pip3 on your computer, if it's not already installed (instructions vary depending on Operating System)</li>
<li>
<p>Install mkdocs and plugins used in <code>Confidential Computing LinuxONE Workshop</code> documentation</p>
<div class="highlight"><pre><span></span><code>pip3<span class="w"> </span>install<span class="w"> </span>mkdocs<span class="w"> </span>mkdocs-material<span class="w"> </span>mkdocs-git-revision-date-localized-plugin<span class="w"> </span>mkdocs-print-site-plugin
</code></pre></div>
</li>
<li>
<p>Get a local copy of the source code with:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="localdocbuild-__tabbed_1_1" name="localdocbuild-__tabbed_1" type="radio" /><input id="localdocbuild-__tabbed_1_2" name="localdocbuild-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="localdocbuild-__tabbed_1_1">HTTPS</label><label for="localdocbuild-__tabbed_1_2">SSH</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/ibm-wsc/ConfidentialComputingOnLinuxONE.git
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:ibm-wsc/ConfidentialComputingOnLinuxONE.git
</code></pre></div>
</div>
</div>
</div>
</li>
<li>
<p>Change into the source code directory in your terminal</p>
</li>
<li>
<p>Serve the documentation in a terminal while in your source code directory with:</p>
<div class="highlight"><pre><span></span><code>mkdocs<span class="w"> </span>serve
</code></pre></div>
</li>
<li>
<p>Open a web browser and access the documentation</p>
<p>The above <code>mkdocs serve</code> command should output an address to access the documentation which by default is: <a href="http://127.0.0.1:8000">http://127.0.0.1:8000</a> which is over localhost (only accessible locally). Go to this address to access the documentation.</p>
<div class="admonition tip">
<p class="admonition-title">Documentation updates automatically</p>
<p>If you leave the terminal tab where you ran <code>mkdocs serve</code> open, the docs will update automatically when your save your changes to the file. This way as you make changes you can check your changes at the given web site, displaying in the same way as it will when displayed as a static website on GitHub.</p>
</div>
</li>
<li>
<p>Make edits to the relevant markdown files in the <code>docs/</code> subfolder, and watch the changes display in realtime in your web browser when you save your file updates.</p>
</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Special Documentation Features</p>
<p>To use the special features of <code>mkdocs-material</code> and the plugins used in these docs that enhance the documentation from traditional markdown, please take a look at the syntax for the various features. You can find examples of them in action in the markdown of this site by either:</p>
<ul>
<li>
<p>Inspecting a given page of the site in your web browser</p>
<ol>
<li>scroll to the top of a page with a feature you want to see how to use</li>
<li>click the page with an eye icon to the right of the title</li>
<li>Inspect the markdown for the part of the page with the given feature</li>
</ol>
</li>
</ul>
<p>OR</p>
<ul>
<li>See the markdown for the entire site in the <code>docs/</code> subfolder of the GitHub project, navigating the markdown files for each page</li>
</ul>
<p>Additionally, you can find more examples and explainers on the <a href="https://squidfunk.github.io/mkdocs-material/reference/" rel="noopener" target="_blank">mkdocs-material reference page</a>.</p>
</div></section></div>


  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 21.35-1.45-1.32C5.4 15.36 2 12.27 2 8.5 2 5.41 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.08C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53L12 21.35Z"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 21.35-1.45-1.32C5.4 15.36 2 12.27 2 8.5 2 5.41 4.42 3 7.5 3c.67 0 1.32.12 1.94.33L13 9.35l-4 5 3 7M16.5 3C19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53L12 21.35l-1-7 4.5-5-2.65-5.08C13.87 3.47 15.17 3 16.5 3Z"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              Thanks for your feedback! Help us improve this page by using our <a href="https://github.com/ibm-wsc/ConfidentialComputingOnLinuxONE/issues/new/?title=[Feedback]+Print%20Site+-+/print_page/" target="_blank" rel="noopener">feedback form</a>.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 IBM – <a href="#__consent">Change cookie settings</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/ibm-wsc" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://hub.docker.com/u/s390x" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  


  
    
  



  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make the documentation as good as possible.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "/ConfidentialComputingOnLinuxONE/", "features": ["header.autohide", "navigation.sections", "navigation.expand", "navigation.top", "navigation.tabs", "navigation.tabs.sticky", "navigation.tracking", "navigation.footer", "search.share", "navigation.indexes", "announce.dismiss", "content.tabs.link", "content.code.copy", "content.action.edit", "content.action.view"], "search": "../assets/javascripts/workers/search.db81ec45.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.6df46069.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
    
  </body>
</html>